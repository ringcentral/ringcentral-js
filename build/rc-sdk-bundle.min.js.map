{"version":3,"sources":["webpack/universalModuleDefinition","rc-sdk-bundle.js","webpack/bootstrap f951bff4dc3d147053a1","../src/lib/RCSDK.ts","external {\"amd\":\"exports\",\"commonjs\":\"dom-storage\",\"commonjs2\":\"dom-storage\",\"root\":\"localStorage\"}","external {\"amd\":\"exports\",\"commonjs\":\"xhr2\",\"commonjs2\":\"xhr2\",\"root\":\"XMLHttpRequest\"}","../src/lib/core/pubnub/PubnubMock.ts","../src/lib/core/xhr/XhrMock.ts","../src/lib/core/xhr/XhrResponse.ts","../src/lib/core/AjaxObserver.ts","../src/lib/core/Cache.ts","../src/lib/core/Context.ts","../src/lib/core/Helper.ts","../src/lib/core/List.ts","../src/lib/core/Log.ts","../src/lib/core/Observable.ts","../src/lib/core/PageVisibility.ts","../src/lib/core/Platform.ts","../src/lib/core/Subscription.ts","../src/lib/core/Utils.ts","../src/lib/core/Validator.ts","../src/lib/helpers/Account.ts","../src/lib/helpers/BlockedNumber.ts","../src/lib/helpers/Call.ts","../src/lib/helpers/Contact.ts","../src/lib/helpers/ContactGroup.ts","../src/lib/helpers/Conferencing.ts","../src/lib/helpers/Country.ts","../src/lib/helpers/Device.ts","../src/lib/helpers/DeviceModel.ts","../src/lib/helpers/Extension.ts","../src/lib/helpers/ForwardingNumber.ts","../src/lib/helpers/Language.ts","../src/lib/helpers/Location.ts","../src/lib/helpers/Message.ts","../src/lib/helpers/PhoneNumber.ts","../src/lib/helpers/Presence.ts","../src/lib/helpers/Ringout.ts","../src/lib/helpers/Service.ts","../src/lib/helpers/ShippingMethod.ts","../src/lib/helpers/State.ts","../src/lib/helpers/Timezone.ts","bower_components/pubnub/web/pubnub.js","bower_components/es6-promise-polyfill/promise.js","../src/lib/core/http/Request.ts","(webpack)/buildin/module.js","(webpack)/~/node-libs-browser/~/timers-browserify/main.js","../src/lib/core/http/Headers.ts","../src/lib/core/http/Response.ts","(webpack)/~/node-libs-browser/~/process/browser.js"],"names":["root","factory","exports","module","require","e","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","pubnubMock","xhrMock","xhrResponse","ajaxObserver","cache","context","helper","list","log","observable","pageVisibility","platform","subscription","utils","validator","accountHelper","blockedNumberHelper","callHelper","contactHelper","contactGroupHelper","conferencingHelper","countryHelper","deviceHelper","deviceModelHelper","extensionHelper","forwardingNumberHelper","languageHelper","locationHelper","messageHelper","phoneNumberHelper","presenceHelper","ringoutHelper","serviceHelper","shippingMethodHelper","stateHelper","timezoneHelper","promise","pubnub","RCSDK","RCSDK.constructor","RCSDK.getContext","RCSDK.getAjaxObserver","RCSDK.getXhrResponse","RCSDK.getPlatform","RCSDK.getCache","RCSDK.getSubscription","RCSDK.getPageVisibility","RCSDK.getHelper","RCSDK.getObservable","RCSDK.getValidator","RCSDK.getLog","RCSDK.getUtils","RCSDK.getList","RCSDK.getCountryHelper","RCSDK.getDeviceModelHelper","RCSDK.getLanguageHelper","RCSDK.getLocationHelper","RCSDK.getShippingMethodHelper","RCSDK.getStateHelper","RCSDK.getTimezoneHelper","RCSDK.getAccountHelper","RCSDK.getBlockedNumberHelper","RCSDK.getCallHelper","RCSDK.getConferencingHelper","RCSDK.getContactHelper","RCSDK.getContactGroupHelper","RCSDK.getDeviceHelper","RCSDK.getExtensionHelper","RCSDK.getForwardingNumberHelper","RCSDK.getMessageHelper","RCSDK.getPhoneNumberHelper","RCSDK.getPresenceHelper","RCSDK.getRingoutHelper","RCSDK.getServiceHelper","Error","code","$get","__extends","d","b","__","constructor","hasOwnProperty","prototype","PubnubMock","_super","PubnubMock.constructor","PubnubMock.subscribe","PubnubMock.unsubscribe","PubnubMock.receiveMessage","Observable","PubnubFactory","PubnubFactory.constructor","PubnubFactory.init","XhrMock","XhrMock.constructor","XhrMock.getResponseHeader","XhrMock.setRequestHeader","XhrMock.getAllResponseHeaders","XhrMock.open","XhrMock.send","XhrMock.abort","XhrMock.getRequestHeader","XhrMock.setResponseHeader","XhrMock.setStatus","XhrResponse","XhrResponse.constructor","XhrResponse.add","XhrResponse.clear","XhrResponse.find","AjaxObserver","AjaxObserver.constructor","Cache","Cache.constructor","Cache.setPrefix","Cache.prefixKey","Cache.setItem","Cache.removeItem","Cache.getItem","Cache.clean","injections","Context","Context.constructor","Context.createSingleton","Context.usePubnubStub","Context.useAjaxStub","Context.getPubnub","Context.getPubnubReal","Context.getLocalStorage","Context.getPromise","Context.getXHR","Helper","Helper.constructor","Helper.getContext","Helper.createUrl","Helper.getId","Helper.isNew","Helper.resetAsNew","Helper.getUri","Helper.parseMultipartResponse","Helper.loadRequest","Helper.saveRequest","Helper.deleteRequest","Helper.syncRequest","Helper.nextPageExists","Helper.index","Helper.merge","List","List.constructor","List.propertyExtractor","List.stringComparator","List.numberComparator","List.comparator","List.equalsFilter","List.containsFilter","List.regexpFilter","List.filter","Log","Log.constructor","Log.disableAll","Log.enableAll","Log.parseArguments","Log.debug","Log.info","Log.warn","Log.error","Observable.constructor","Observable.hasListeners","Observable.registerOneTimeEvent","Observable.on","Observable.emit","Observable.off","Observable.isOneTimeEvent","Observable.isOneTimeEventFired","Observable.setOneTimeEventFired","Observable.setOneTimeEventArgumens","Observable.getOneTimeEventArgumens","Observable.offAll","Observable.destroy","Observable.emitAndCallback","PageVisibility","PageVisibility.constructor","PageVisibility.isVisible","request","Platform","Platform.constructor","Platform.getStorage","Platform.getRequest","Platform.clearStorage","Platform.setCredentials","Platform.getCredentials","Platform.setServer","Platform.remember","Platform.getAuthURL","Platform.parseAuthRedirectUrl","Platform.authorize","Platform.isPaused","Platform.pause","Platform.resume","Platform.refresh","Platform.logout","Platform.refreshPolling","Platform.getToken","Platform.getTokenType","Platform.getAuthData","Platform.isTokenValid","Platform.isAuthorized","Platform.cancelAccessToken","Platform.setCache","Platform.forceAuthentication","Platform.apiCall","Platform.get","Platform.post","Platform.put","Platform.delete","Platform.authCall","Platform.apiUrl","Subscription","Subscription.constructor","Subscription.getPubnub","Subscription.getPlatform","Subscription.register","Subscription.addEvents","Subscription.setEvents","Subscription.getFullEventFilters","Subscription.subscribe","Subscription.renew","Subscription.remove","Subscription.destroy","Subscription.isSubscribed","Subscription.setTimeout","Subscription.clearTimeout","Subscription.updateSubscription","Subscription.unsubscribe","Subscription.decrypt","Subscription.notify","Subscription.subscribeAtPubnub","hasOwn","Object","toString","rdigit","class2type","split","forEach","name","toLowerCase","Utils","Utils.extend","Utils.forEach","Utils.queryStringify","Utils.parseQueryString","Utils.isEmail","Utils.isPhoneNumber","Utils.argumentsToArray","Utils.isDate","Utils.isFunction","Utils.isArray","Utils.isWindow","Utils.isNaN","Utils.type","Utils.isPlainObject","Utils.getProperty","Utils.poll","Utils.stopPolling","Utils.parseString","Utils.parseNumber","Validator","Validator.constructor","Validator.validate","Validator.email","Validator.phone","Validator.required","Validator.length","Account","Account.constructor","Account.createUrl","BlockedNumber","BlockedNumber.constructor","BlockedNumber.createUrl","BlockedNumber.validate","presence","contact","Call","Call.constructor","Call.createUrl","Call.getSessionId","Call.isInProgress","Call.isAlive","Call.isInbound","Call.isOutbound","Call.isMissed","Call.isFindMe","Call.getCallerInfo","Call.getAllCallerInfos","Call.formatDuration","Call.formatDuration.addZero","Call.filter","Call.comparator","Call.attachContacts","Call.checkMergeability","Call.combineCalls","Call.processCalls","Call.parsePresenceCalls","Call.getSignature","Call.mergePresenceCalls","Call.mergeAll","Contact","Contact.constructor","Contact.createUrl","Contact.getFieldValues","Contact.getFullName","Contact.getEmails","Contact.getPhones","Contact.getFaxes","Contact.getAddresses","Contact.isAlive","Contact.match","Contact.matchAsPhone","Contact.attachToCallerInfos","Contact.comparator","Contact.filter","Contact.validate","ContactGroup","ContactGroup.constructor","ContactGroup.createUrl","ContactGroup.validate","Conferencing","Conferencing.constructor","Conferencing.createUrl","Country","Country.constructor","Country.createUrl","extension","deviceModel","Device","Device.constructor","Device.createUrl","Device.validate","DeviceModel","DeviceModel.constructor","DeviceModel.getId","DeviceModel.cleanForSaving","Extension","Extension.constructor","Extension.createUrl","Extension.isUser","Extension.isDepartment","Extension.isAnnouncement","Extension.isVoicemail","Extension.comparator","Extension.filter","ForwardingNumber","ForwardingNumber.constructor","ForwardingNumber.createUrl","ForwardingNumber.getId","ForwardingNumber.hasFeature","ForwardingNumber.comparator","ForwardingNumber.filter","Language","Language.constructor","state","Location","Location.constructor","Location.createUrl","Location.filter","Location.comparator","Message","Message.constructor","Message.createUrl","Message.isInbound","Message.isOutbound","Message.isSMS","Message.isPager","Message.isVoiceMail","Message.isFax","Message.isAlive","Message.isRead","Message.setIsRead","Message.getAttachmentUrl","Message.getAttachmentContentType","Message.getSubscription","Message.getCallerInfos","Message.getAllCallerInfos","Message.comparator","Message.filter","Message.attachContacts","Message.shorten","Message.validateSMS","Message.validatePager","PhoneNumber","PhoneNumber.constructor","PhoneNumber.createUrl","PhoneNumber.isSMS","PhoneNumber.hasFeature","PhoneNumber.reserve","PhoneNumber.unreserve","PhoneNumber.comparator","PhoneNumber.filter","Presence","Presence.constructor","Presence.createUrl","Presence.getId","Presence.isAvailable","Presence.getSubscription","Presence.updateSubscription","Presence.attachToExtensions","Presence.isCallInProgress","Ringout","Ringout.constructor","Ringout.createUrl","Ringout.resetAsNew","Ringout.isInProgress","Ringout.isSuccess","Ringout.isError","Ringout.validate","Service","Service.constructor","Service.createUrl","Service.isEnabled","Service.isServiceFeatureEnabledMethod","ShippingMethod","ShippingMethod.constructor","ShippingMethod.createUrl","country","State","State.constructor","State.createUrl","State.filter","Timezone","Timezone.constructor","Timezone.createUrl","unique","NOW","Date","rnow","build_url","url_components","url_params","url","join","URLBIT","params","each","key","value","value_str","JSON","encode","length","push","PARAMSBIT","updater","fun","rate","timeout","last","runnit","clearTimeout","setTimeout","grep","fin","l","supplant","str","values","replace","REPL","_","match","wait","generate_uuid","callback","u","r","Math","random","v","isArray","arg","Array","o","f","i","map","k","pam_encode","encodeURIComponent","charCodeAt","toUpperCase","path","generate_channel_list","channels","nopresence","channel","status","search","subscribed","sort","generate_channel_group_list","channel_groups","channel_group","ready","READY","READY_BUFFER","connect","SECOND","PNmessage","args","msg","apns","keys","aps","alert","badge","exclude1","data","exclude","getPubnubMessage","publish","message","error","PN_API","setup","_get_url_params","_object_to_key_list","_object_to_key_list_sorted","_get_pam_sign_input_from_params","si","validate_presence_heartbeat","heartbeat","cur_heartbeat","err","PRESENCE_HB_THRESHOLD","PRESENCE_HB_DEFAULT","encrypt","input","crypto_obj","CIPHER_KEY","decrypt","_presence_heartbeat","PRESENCE_HB_TIMEOUT","PRESENCE_HB_INTERVAL","CHANNELS","CHANNEL_GROUPS","PRESENCE_HB_RUNNING","SELF","stringify","start_presence_heartbeat","next","NO_WAIT_FOR_PENDING","PUB_QUEUE","sending","xdr","shift","each_channel_group","count","chang","each_channel","chan","_invoke_callback","response","callback_data","_invoke_error","CR","url1","jsonp","jsonp_cb","AUTH_KEY","STD_ORIGIN","SUBSCRIBE_KEY","apply","success","fail","_poll_online","_is_online","_reset_offline","_poll_timer","_poll_online2","TIME_CHECK","detect_time_detla","_poll_timer2","KEEPALIVE","SUB_RECEIVER","detect_latency","tt","adjusted_time","TIME_DRIFT","cb","time","calculate","ptime","latency","stime","SUB_WINDOWING","DEF_WINDOWING","SUB_TIMEOUT","DEF_SUB_TIMEOUT","DEF_KEEPALIVE","NOLEAVE","PUBLISH_KEY","SECRET_KEY","hmac_SHA256","SSL","ORIGIN","nextorigin","SUB_ORIGIN","CONNECT","CLOAK","SUB_CALLBACK","SUB_CHANNEL","SUB_RESTORE","TIMETOKEN","RESUMED","STATE","PRESENCE_HB","COMPATIBLE_35","db","get","set","UUID","USE_INSTANCEID","INSTANCEID","a","LEAVE","blocking","auth_key","uuid","auth","origin","indexOf","PRESENCE_SUFFIX","LEAVE_GROUP","set_resumed","resumed","get_cipher_key","set_cipher_key","raw_encrypt","raw_decrypt","get_heartbeat","set_heartbeat","heartbeat_interval","get_heartbeat_interval","set_heartbeat_interval","get_version","SDK_VER","getGcmMessageObject","obj","getApnsMessageObject","x","newPnMessage","gcm","n","_add_param","val","namespace","ns_ch","cloak","mode","ns_ch_a","channel_group_list_groups","channel_group_list_channels","channel_group_remove_channel","channel_group_remove_group","channel_group_add_channel","channel_group_cloak","channel_group_list_namespaces","channel_group_remove_namespace","history","reverse","cipher_key","start","end","include_token","payload","messages","decrypted_messages","new_message","replay","source","destination","stop","limit","post","store","add_msg","unsubscribe","ch","CB_CALLED","action","chg","subscribe","_test_connection","disconnected","reconnect","disconnect","_connect","st","sub_timeout","SUB_ERROR","idlecb","connected","windowing","backfill","next_callback","channels2","list2","channel2","chobj","decrypted_msg","noheresync","timetoken","restore","settings","here","uid","timestamp","floor","occupancy","here_now","uuids","where_now","grant","ttl","w","getTime","sign_input","signature","mobile_gw_provision","op","gw_type","device_id","type","audit","revoke","set_uuid","get_uuid","get_subscibed_channels","presence_heartbeat","stop_timers","each-channel","offline","now","SHA256","s","CryptoJS","parse_options","options","defaultOptions","allowedKeyEncodings","allowedKeyLengths","parseInt","allowedModes","decode_key","get_padded_key","get_mode","get_iv","iv","encryptKey","keyEncoding","keyLength","hex_message","encryptedHexArray","base_64_encrypted","binary_enc","json_plain","ciphertext","plaintext","undefined","window","toJSON","valueOf","quote","string","escapable","lastIndex","test","meta","slice","holder","partial","mind","gap","rep","isFinite","String","indent","cx","\b","\t","\n","\f","\r","\"","\\","replacer","space","text","eval","DEF_TIMEOUT","max","ori","failover","get_hmac_SHA256","hash","$","document","getElementById","console","elements","el","getElementsByTagName","node","bind","etype","rapfun","event","cancelBubble","preventDefault","stopPropagation","addEventListener","attachEvent","head","attr","attribute","setAttribute","getAttribute","css","element","styles","style","create","createElement","XORIGN","FDomainRequest","ajax","script","finished","xhrtme","timer","done","append","appendChild","failed","onerror","parentNode","removeChild","ASYNC","src","xhr","responseText","complete","async","onload","abort","XDomainRequest","XMLHttpRequest","onabort","onloadend","onreadystatechange","readyState","open","send","eee","navigator","pubnubs","fdomainrequest","method","SWF","UA","userAgent","PNSDK","opera","postError","ls","cookieGet","cookie","RegExp","cookieSet","cookieTest","getItem","setItem","events","unbind","fire","PDIV","CREATE_PUBNUB","leave_on_unload","pnsdk","PN","prop","pdiv","PUBNUB","notest","publish_key","subscribe_key","ssl","location","href","position","top","unescape","WS","protocols","self","bits","protocol","reason","wasClean","close","h","g","lib","q","Base","extend","mixIn","init","$super","arguments","clone","WordArray","words","sigBytes","concat","clamp","ceil","enc","Hex","parse","substr","Latin1","fromCharCode","j","Utf8","decodeURIComponent","escape","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","blockSize","_minBufferSize","min","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","t","HMAC","algo","sqrt","pow","_hash","HmacSHA256","_hasher","_oKey","_iKey","Base64","_map","charAt","abs","sin","MD5","z","A","B","C","D","E","HmacMD5","EvpKDF","keySize","hasher","iterations","compute","Cipher","createEncryptor","_ENC_XFORM_MODE","createDecryptor","_DEC_XFORM_MODE","_xformMode","_key","process","ivSize","StreamCipher","_iv","_prevBlock","BlockCipherMode","Encryptor","Decryptor","_cipher","processBlock","encryptBlock","decryptBlock","CBC","pad","Pkcs7","unpad","BlockCipher","padding","_mode","CipherParams","formatter","format","OpenSSL","salt","SerializableCipher","algorithm","_parse","kdf","execute","PasswordBasedCipher","F","G","y","H","AES","_nRounds","_keySchedule","_invKeySchedule","_doCryptBlock","ECB","offset","setImmediate","global","asyncFlush","asyncQueue","asyncTimer","asyncCall","asyncSetTimer","invokeResolver","resolver","resolvePromise","resolve","rejectPromise","reject","invokeCallback","subscriber","owner","settled","state_","data_","then","FULFILLED","handleThenable","REJECTED","resolved","TypeError","fulfill","PENDING","SEALED","publishFulfillment","publishRejection","then_","Promise","NativePromise","nativePromiseSupported","NOOP","onFulfillment","onRejection","fulfilled","rejected","catch","all","promises","Class","index","remaining","results","race","Function","Request","Request.constructor","Request.isLoaded","Request.setOptions","Request.checkOptions","Request.getEncodedBody","Request.send","Request.getXHR","Request.destroy","Headers","webpackPolyfill","deprecate","paths","children","clearImmediate","Timeout","clearFn","_id","_clearFn","nextTick","immediateIds","nextImmediateId","setInterval","clearInterval","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","fn","Headers.constructor","Headers.setHeader","Headers.getHeader","Headers.hasHeader","Headers.setHeaders","Headers.isContentType","Headers.setContentType","Headers.getContentType","Headers.isMultipart","Headers.isUrlEncoded","Headers.isJson","statusText","body","headers","Response","Response.constructor","Response.isUnauthorized","Response.checkStatus","Response.getError","drainQueue","draining","currentQueue","len","queue","noop","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","umask"],"mappings":"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","file":"rc-sdk-bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"dom-storage\"), (function webpackLoadOptionalExternalModule() { try { return require(\"xhr2\"); } catch(e) {} }()));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"exports\", \"exports\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RCSDK\"] = factory(require(\"dom-storage\"), (function webpackLoadOptionalExternalModule() { try { return require(\"xhr2\"); } catch(e) {} }()));\n\telse\n\t\troot[\"RCSDK\"] = factory(root[\"localStorage\"], root[\"XMLHttpRequest\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"dom-storage\"), (function webpackLoadOptionalExternalModule() { try { return require(\"xhr2\"); } catch(e) {} }()));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"exports\", \"exports\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RCSDK\"] = factory(require(\"dom-storage\"), (function webpackLoadOptionalExternalModule() { try { return require(\"xhr2\"); } catch(e) {} }()));\n\telse\n\t\troot[\"RCSDK\"] = factory(root[\"localStorage\"], root[\"XMLHttpRequest\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../typings/externals.d.ts\" />\nvar pubnubMock = __webpack_require__(3);\nvar xhrMock = __webpack_require__(4);\nvar xhrResponse = __webpack_require__(5);\nvar ajaxObserver = __webpack_require__(6);\nvar cache = __webpack_require__(7);\nvar context = __webpack_require__(8);\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar log = __webpack_require__(11);\nvar observable = __webpack_require__(12);\nvar pageVisibility = __webpack_require__(13);\nvar platform = __webpack_require__(14);\nvar subscription = __webpack_require__(15);\nvar utils = __webpack_require__(16);\nvar validator = __webpack_require__(17);\nvar accountHelper = __webpack_require__(18);\nvar blockedNumberHelper = __webpack_require__(19);\nvar callHelper = __webpack_require__(20);\nvar contactHelper = __webpack_require__(21);\nvar contactGroupHelper = __webpack_require__(22);\nvar conferencingHelper = __webpack_require__(23);\nvar countryHelper = __webpack_require__(24);\nvar deviceHelper = __webpack_require__(25);\nvar deviceModelHelper = __webpack_require__(26);\nvar extensionHelper = __webpack_require__(27);\nvar forwardingNumberHelper = __webpack_require__(28);\nvar languageHelper = __webpack_require__(29);\nvar locationHelper = __webpack_require__(30);\nvar messageHelper = __webpack_require__(31);\nvar phoneNumberHelper = __webpack_require__(32);\nvar presenceHelper = __webpack_require__(33);\nvar ringoutHelper = __webpack_require__(34);\nvar serviceHelper = __webpack_require__(35);\nvar shippingMethodHelper = __webpack_require__(36);\nvar stateHelper = __webpack_require__(37);\nvar timezoneHelper = __webpack_require__(38);\nvar promise = __webpack_require__(40);\nvar pubnub = __webpack_require__(39);\nvar RCSDK = (function () {\n    function RCSDK(options) {\n        options = options || {};\n        this._context = context.$get(RCSDK.injections);\n        this.getCache().setPrefix(options.cachePrefix || '');\n        this.getPlatform().setServer(options.server || '').setCredentials(options.appKey || '', options.appSecret || '');\n        //TODO Link Platform events with Subscriptions and the rest\n    }\n    // Internals\n    RCSDK.prototype.getContext = function () {\n        return this._context;\n    };\n    // Core\n    RCSDK.prototype.getAjaxObserver = function () {\n        return ajaxObserver.$get(this.getContext());\n    };\n    RCSDK.prototype.getXhrResponse = function () {\n        return xhrResponse.$get(this.getContext());\n    };\n    RCSDK.prototype.getPlatform = function () {\n        return platform.$get(this.getContext());\n    };\n    RCSDK.prototype.getCache = function () {\n        return cache.$get(this.getContext());\n    };\n    RCSDK.prototype.getSubscription = function () {\n        return subscription.$get(this.getContext());\n    };\n    RCSDK.prototype.getPageVisibility = function () {\n        return pageVisibility.$get(this.getContext());\n    };\n    RCSDK.prototype.getHelper = function () {\n        return helper.$get(this.getContext());\n    };\n    RCSDK.prototype.getObservable = function () {\n        return observable.$get(this.getContext());\n    };\n    RCSDK.prototype.getValidator = function () {\n        return validator.$get(this.getContext());\n    };\n    RCSDK.prototype.getLog = function () {\n        return log.$get(this.getContext());\n    };\n    RCSDK.prototype.getUtils = function () {\n        return utils.$get(this.getContext());\n    };\n    RCSDK.prototype.getList = function () {\n        return list.$get(this.getContext());\n    };\n    // Helpers\n    RCSDK.prototype.getCountryHelper = function () {\n        return countryHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getDeviceModelHelper = function () {\n        return deviceModelHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getLanguageHelper = function () {\n        return languageHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getLocationHelper = function () {\n        return locationHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getShippingMethodHelper = function () {\n        return shippingMethodHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getStateHelper = function () {\n        return stateHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getTimezoneHelper = function () {\n        return timezoneHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getAccountHelper = function () {\n        return accountHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getBlockedNumberHelper = function () {\n        return blockedNumberHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getCallHelper = function () {\n        return callHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getConferencingHelper = function () {\n        return conferencingHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getContactHelper = function () {\n        return contactHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getContactGroupHelper = function () {\n        return contactGroupHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getDeviceHelper = function () {\n        return deviceHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getExtensionHelper = function () {\n        return extensionHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getForwardingNumberHelper = function () {\n        return forwardingNumberHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getMessageHelper = function () {\n        return messageHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getPhoneNumberHelper = function () {\n        return phoneNumberHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getPresenceHelper = function () {\n        return presenceHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getRingoutHelper = function () {\n        return ringoutHelper.$get(this.getContext());\n    };\n    RCSDK.prototype.getServiceHelper = function () {\n        return serviceHelper.$get(this.getContext());\n    };\n    RCSDK.version = '1.3.0';\n    RCSDK.url = {\n        sandbox: 'https://platform.devtest.ringcentral.com',\n        production: 'https://platform.ringcentral.com'\n    };\n    RCSDK.injections = {\n        localStorage: (typeof (localStorage) !== 'undefined' ? localStorage : __webpack_require__(1)),\n        Promise: typeof (Promise) !== 'undefined' ? Promise : promise.Promise,\n        PUBNUB: pubnub,\n        XHR: function () {\n            try {\n                return new XMLHttpRequest();\n            }\n            catch (e) {\n            }\n            try {\n                return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\");\n            }\n            catch (e1) {\n            }\n            try {\n                return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\");\n            }\n            catch (e2) {\n            }\n            try {\n                return new ActiveXObject(\"Msxml2.XMLHTTP\");\n            }\n            catch (e3) {\n            }\n            try {\n                return new (__webpack_require__(2))();\n            }\n            catch (e4) {\n            }\n            throw new Error(\"This browser does not support XMLHttpRequest.\");\n        },\n        pubnubMock: pubnubMock,\n        xhrMock: xhrMock\n    };\n    return RCSDK;\n})();\nmodule.exports = RCSDK;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\nif(typeof __WEBPACK_EXTERNAL_MODULE_2__ === 'undefined') {var e = new Error(\"Cannot find module \\\"undefined\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e;}\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar observable = __webpack_require__(12);\nvar PubnubMock = (function (_super) {\n    __extends(PubnubMock, _super);\n    function PubnubMock(context, options) {\n        this.options = options;\n        this.crypto_obj = context.getPubnubReal().crypto_obj;\n        _super.call(this, context);\n    }\n    PubnubMock.prototype.ready = function () {\n    };\n    PubnubMock.prototype.subscribe = function (options) {\n        this.on('message-' + options.channel, options.message);\n    };\n    PubnubMock.prototype.unsubscribe = function (options) {\n        this.off('message-' + options.channel);\n    };\n    PubnubMock.prototype.receiveMessage = function (msg, channel) {\n        this.emit('message-' + channel, msg, 'env', channel);\n    };\n    return PubnubMock;\n})(observable.Observable);\nexports.PubnubMock = PubnubMock;\nvar PubnubFactory = (function () {\n    function PubnubFactory(context) {\n        this.context = context;\n        this.crypto_obj = context.getPubnubReal().crypto_obj;\n    }\n    PubnubFactory.prototype.init = function (options) {\n        return new PubnubMock(this.context, options);\n    };\n    return PubnubFactory;\n})();\nexports.PubnubFactory = PubnubFactory;\nfunction $get(context) {\n    return new PubnubFactory(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(16);\nvar log = __webpack_require__(11);\nvar xhrResponse = __webpack_require__(5); //FIXME Circular\nvar XhrMock = (function () {\n    function XhrMock(context) {\n        // Service\n        this.context = context;\n        this.responses = xhrResponse.$get(context);\n        this.log = log.$get(context);\n        this.utils = utils.$get(context);\n        // Request\n        this.async = true;\n        this.method = '';\n        this.url = '';\n        this.requestHeaders = {};\n        this.withCredentials = false;\n        // Response\n        this.data = null;\n        this.readyState = 0;\n        this.responseHeaders = {};\n        this.status = 0;\n    }\n    XhrMock.prototype.getResponseHeader = function (header) {\n        return this.responseHeaders[header.toLowerCase()];\n    };\n    XhrMock.prototype.setRequestHeader = function (header, value) {\n        this.requestHeaders[header.toLowerCase()] = value;\n    };\n    XhrMock.prototype.getAllResponseHeaders = function () {\n        var res = [];\n        this.utils.forEach(this.responseHeaders, function (value, name) {\n            res.push(name + ':' + value);\n        });\n        return res.join('\\n');\n    };\n    XhrMock.prototype.open = function (method, url, async) {\n        this.method = method;\n        this.url = url;\n        this.async = async;\n    };\n    XhrMock.prototype.send = function (data) {\n        var _this = this;\n        var contentType = this.getRequestHeader('Content-Type');\n        this.data = data;\n        if (this.data && typeof this.data == 'string') {\n            // For convenience encoded post data will be decoded\n            if (contentType == 'application/json')\n                this.data = JSON.parse(this.data);\n            if (contentType == 'application/x-www-form-urlencoded')\n                this.data = this.utils.parseQueryString(this.data);\n        }\n        this.log.debug('API REQUEST', this.method, this.url);\n        var currentResponse = this.responses.find(this);\n        if (!currentResponse) {\n            setTimeout(function () {\n                if (_this.onerror)\n                    _this.onerror(new Error('Unknown request: ' + _this.url));\n            }, 1);\n            return;\n        }\n        this.setStatus(200);\n        this.setResponseHeader('Content-Type', 'application/json');\n        var res = currentResponse.response(this), Promise = this.context.getPromise(), onLoad = function (res) {\n            if (_this.getResponseHeader('Content-Type') == 'application/json')\n                res = JSON.stringify(res);\n            _this.responseText = res;\n            setTimeout(function () {\n                if (_this.onload)\n                    _this.onload();\n            }, 1);\n        };\n        if (res instanceof Promise) {\n            res.then(onLoad.bind(this)).catch(this.onerror.bind(this));\n        }\n        else\n            onLoad(res);\n    };\n    XhrMock.prototype.abort = function () {\n        this.log.debug('XhrMock.destroy(): Aborted');\n    };\n    XhrMock.prototype.getRequestHeader = function (header) {\n        return this.requestHeaders[header.toLowerCase()];\n    };\n    XhrMock.prototype.setResponseHeader = function (header, value) {\n        this.responseHeaders[header.toLowerCase()] = value;\n    };\n    XhrMock.prototype.setStatus = function (status) {\n        this.status = status;\n        return this;\n    };\n    return XhrMock;\n})();\nexports.XhrMock = XhrMock;\nfunction $get(context) {\n    return new XhrMock(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\nvar XhrResponse = (function () {\n    function XhrResponse(context) {\n        this.responses = [];\n    }\n    XhrResponse.prototype.add = function (response) {\n        this.responses.push(response);\n    };\n    XhrResponse.prototype.clear = function () {\n        this.responses = [];\n    };\n    XhrResponse.prototype.find = function (ajax) {\n        var currentResponse = null;\n        this.responses.forEach(function (response) {\n            if (ajax.url.indexOf(response.path) > -1 && (!response.test || response.test(ajax))) {\n                currentResponse = response;\n            }\n        });\n        return currentResponse;\n    };\n    return XhrResponse;\n})();\nexports.XhrResponse = XhrResponse;\nfunction $get(context) {\n    return context.createSingleton('XhrResponse', function () {\n        return new XhrResponse(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar observable = __webpack_require__(12);\nvar AjaxObserver = (function (_super) {\n    __extends(AjaxObserver, _super);\n    function AjaxObserver() {\n        _super.apply(this, arguments);\n        this.events = {\n            beforeRequest: 'beforeRequest',\n            requestSuccess: 'requestSuccess',\n            requestError: 'requestError' // means that request failed completely\n        };\n    }\n    return AjaxObserver;\n})(observable.Observable);\nexports.AjaxObserver = AjaxObserver;\nfunction $get(context) {\n    return context.createSingleton('AjaxObserver', function () {\n        return new AjaxObserver(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar Cache = (function () {\n    function Cache(context) {\n        this.setPrefix();\n        this.context = context;\n        this.storage = context.getLocalStorage(); // storage must be defined from outside\n    }\n    Cache.prototype.setPrefix = function (prefix) {\n        this.prefix = prefix || 'rc-';\n        return this;\n    };\n    Cache.prototype.prefixKey = function (key) {\n        return this.prefix + key;\n    };\n    Cache.prototype.setItem = function (key, data) {\n        this.storage.setItem(this.prefixKey(key), JSON.stringify(data));\n        return this;\n    };\n    Cache.prototype.removeItem = function (key) {\n        this.storage.removeItem(this.prefixKey(key));\n        return this;\n    };\n    Cache.prototype.getItem = function (key) {\n        var item = this.storage.getItem(this.prefixKey(key));\n        if (!item)\n            return null;\n        return JSON.parse(item);\n    };\n    Cache.prototype.clean = function () {\n        for (var key in this.storage) {\n            if (!this.storage.hasOwnProperty(key))\n                continue;\n            if (key.indexOf(this.prefix) === 0) {\n                this.storage.removeItem(key);\n                delete this.storage[key];\n            }\n        }\n        return this;\n    };\n    return Cache;\n})();\nexports.Cache = Cache;\nfunction $get(context) {\n    return context.createSingleton('Cache', function () {\n        return new Cache(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar Context = (function () {\n    function Context(injections) {\n        this.singletons = {};\n        this.injections = injections;\n        this.stubPubnub = false;\n        this.stubAjax = false;\n    }\n    Context.prototype.createSingleton = function (name, factory) {\n        if (!this.singletons[name])\n            this.singletons[name] = factory();\n        return this.singletons[name];\n    };\n    Context.prototype.usePubnubStub = function (flag) {\n        this.stubPubnub = !!flag;\n        return this;\n    };\n    Context.prototype.useAjaxStub = function (flag) {\n        this.stubAjax = !!flag;\n        return this;\n    };\n    Context.prototype.getPubnub = function () {\n        return this.stubPubnub ? this.injections.pubnubMock.$get(this) : this.getPubnubReal();\n    };\n    Context.prototype.getPubnubReal = function () {\n        return this.injections.PUBNUB;\n    };\n    Context.prototype.getLocalStorage = function () {\n        var _this = this;\n        return this.createSingleton('localStorage', function () {\n            if (typeof _this.injections.localStorage !== 'function') {\n                return _this.injections.localStorage; // this is window.localStorage\n            }\n            return new _this.injections.localStorage(); // this is NPM dom-storage constructor\n        });\n    };\n    Context.prototype.getPromise = function () {\n        return this.injections.Promise;\n    };\n    Context.prototype.getXHR = function () {\n        return (this.stubAjax ? this.injections.xhrMock.$get(this) : this.injections.XHR());\n    };\n    return Context;\n})();\nexports.Context = Context;\nfunction $get(injections) {\n    return new Context(injections);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar utils = __webpack_require__(16);\nvar Helper = (function () {\n    function Helper(context) {\n        this.defaultProperty = 'id';\n        this.context = context;\n        this.utils = utils.$get(context);\n    }\n    Helper.prototype.getContext = function () {\n        return this.context;\n    };\n    Helper.prototype.createUrl = function (options, id) {\n        return '';\n    };\n    Helper.prototype.getId = function (object) {\n        return object && object[this.defaultProperty];\n    };\n    Helper.prototype.isNew = function (object) {\n        return !this.getId(object) || !this.getUri(object);\n    };\n    Helper.prototype.resetAsNew = function (object) {\n        if (object) {\n            delete object.id;\n            delete object.uri;\n        }\n        return object;\n    };\n    Helper.prototype.getUri = function (object) {\n        return object && object.uri;\n    };\n    Helper.prototype.parseMultipartResponse = function (ajax) {\n        if (ajax.isMultipart()) {\n            // ajax.data has full array, leave only successful\n            return ajax.data.filter(function (result) {\n                return (!result.error);\n            }).map(function (result) {\n                return result.data;\n            });\n        }\n        else {\n            return [ajax.data];\n        }\n    };\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided, default will be returned\n     */\n    Helper.prototype.loadRequest = function (object, options) {\n        return this.utils.extend(options || {}, {\n            url: (options && options.url) || (object && this.getUri(object)) || this.createUrl(),\n            method: (options && options.method) || 'GET'\n        });\n    };\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided, default will be returned\n     */\n    Helper.prototype.saveRequest = function (object, options) {\n        if (!object && !(options && (options.post || options.body)))\n            throw new Error('No Object');\n        return this.utils.extend(options || {}, {\n            method: (options && options.method) || (this.isNew(object) ? 'POST' : 'PUT'),\n            url: (options && options.url) || this.getUri(object) || this.createUrl(),\n            body: (options && (options.body || options.post)) || object\n        });\n    };\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided exception will be thrown\n     */\n    Helper.prototype.deleteRequest = function (object, options) {\n        options = options || {};\n        if (!this.getUri(object) && !(options && options.url))\n            throw new Error('Object has to be not new or URL must be provided');\n        return this.utils.extend(options || {}, {\n            method: (options && options.method) || 'DELETE',\n            url: (options && options.url) || this.getUri(object)\n        });\n    };\n    /**\n     * If no url was provided, default SYNC url will be returned\n     */\n    Helper.prototype.syncRequest = function (options) {\n        options = options || {};\n        options.url = options.url || this.createUrl({ sync: true });\n        options.query = options.query || options.get || {};\n        if (!!options.query.syncToken) {\n            options.query = {\n                syncType: 'ISync',\n                syncToken: options.get.syncToken\n            };\n        }\n        else {\n            options.query.syncType = 'FSync';\n        }\n        return options;\n    };\n    Helper.prototype.nextPageExists = function (data) {\n        return (data && data.navigation && ('nextPage' in data.navigation));\n    };\n    /**\n     * array - an array to be indexed\n     * getIdFn - must return an ID for each array item\n     * gather - if true, then each index will have an array of items, that has same ID, otherwise the first indexed\n     * item wins\n     */\n    Helper.prototype.index = function (array, getIdFn, gather) {\n        getIdFn = getIdFn || this.getId.bind(this);\n        array = array || [];\n        return array.reduce(function (index, item) {\n            var id = getIdFn(item);\n            if (!id || (index[id] && !gather))\n                return index;\n            if (gather) {\n                if (!index[id])\n                    index[id] = [];\n                index[id].push(item);\n            }\n            else {\n                index[id] = item;\n            }\n            return index;\n        }, {});\n    };\n    /**\n     * Returns a shallow copy of merged _target_ array plus _supplement_ array\n     * mergeItems\n     * - if true, properties of _supplement_ item will be applied to _target_ item,\n     * - otherwise _target_ item will be replaced\n     */\n    Helper.prototype.merge = function (target, supplement, getIdFn, mergeItems) {\n        var _this = this;\n        getIdFn = getIdFn || this.getId.bind(this);\n        target = target || [];\n        supplement = supplement || [];\n        var supplementIndex = this.index(supplement, getIdFn), updatedIDs = [], result = target.map(function (item) {\n            var id = getIdFn(item), newItem = supplementIndex[id];\n            if (newItem)\n                updatedIDs.push(id);\n            return newItem ? (mergeItems ? _this.utils.extend(item, newItem) : newItem) : item;\n        });\n        supplement.forEach(function (item) {\n            if (updatedIDs.indexOf(getIdFn(item)) == -1)\n                result.push(item);\n        });\n        return result;\n    };\n    return Helper;\n})();\nexports.Helper = Helper;\nfunction $get(context) {\n    return new Helper(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar utils = __webpack_require__(16);\nvar List = (function () {\n    function List(context) {\n        this.context = context;\n        this.utils = utils.$get(context);\n        this.numberComparator = this.numberComparator.bind(this);\n        this.stringComparator = this.stringComparator.bind(this);\n    }\n    /**\n     * TODO Use utils getProperty\n     * @param {string} property\n     * @returns {function(object)}\n     */\n    List.prototype.propertyExtractor = function (property) {\n        return function (item, options) {\n            return property ? ((item && item[property]) || null) : item;\n        };\n    };\n    /**\n     * Non-string types are converted to string\n     * Non-string types are extracted as an empty string if they could be converted to false\n     * If no options.sortBy given the item itself is extracted\n     * Compares strings:\n     * - if (a is less than b) return -1;\n     * - if (a is greater than b) return 1;\n     * - else (a must be equal to b) return 0;\n     * Exceptions in will be suppressed, if any - a is assumed to be less than b\n     */\n    List.prototype.stringComparator = function (a, b, options) {\n        return this.utils.parseString(a).localeCompare(this.utils.parseString(b));\n    };\n    /**\n     * Non-numeric types are extracted as 0 if they could be converted to false\n     * Objects that could not be converted to number are extracted as 0\n     * If no options.sortBy given the item itself is extracted\n     * See parseFloat for more info\n     * Compares numbers:\n     * - if (a is less than b) return -1;\n     * - if (a is greater than b) return 1;\n     * - else (a must be equal to b) return 0;\n     * Function does not check types\n     * Exceptions in will be suppressed, if any - a is assumed to be less than b\n     */\n    List.prototype.numberComparator = function (a, b, options) {\n        return (this.utils.parseNumber(a) - this.utils.parseNumber(b));\n    };\n    /**\n     * Function extracts (using _extractFn_ option) values of a property (_sortBy_ option) and compares them using\n     * compare function (_compareFn_ option, by default Helper.stringComparator)\n     * Merged options are provided to _extractFn_ and _compareFn_\n     * TODO Check memory leaks for all that options links\n     */\n    List.prototype.comparator = function (options) {\n        options = this.utils.extend({\n            extractFn: this.propertyExtractor((options && options.sortBy) || null).bind(this),\n            compareFn: this.stringComparator.bind(this)\n        }, options);\n        return function (item1, item2) {\n            return options.compareFn(options.extractFn(item1, options), options.extractFn(item2, options), options);\n        };\n    };\n    List.prototype.equalsFilter = function (obj, options) {\n        return (options.condition === obj);\n    };\n    /**\n     * @param {string} obj\n     * @param {IListFilterOptions} options\n     * @returns {boolean}\n     */\n    List.prototype.containsFilter = function (obj, options) {\n        return (obj && obj.toString().indexOf(options.condition) > -1);\n    };\n    List.prototype.regexpFilter = function (obj, options) {\n        if (!(options.condition instanceof RegExp))\n            throw new Error('Condition must be an instance of RegExp');\n        return (options.condition.test(obj));\n    };\n    /**\n     * Function extracts (using `extractFn` option) values of a property (`filterBy` option) and filters them using\n     * compare function (`filterFn` option, by default Helper.equalsFilter)\n     * Merged options are provided to `extractFn` and `compareFn`\n     * Set `filterBy` to null to force `propertyExtractor` to return object itself\n     * TODO Check memory leaks for all that options links\n     */\n    List.prototype.filter = function (filterConfigs) {\n        var _this = this;\n        var self = this;\n        filterConfigs = (filterConfigs || []).map(function (opt) {\n            return _this.utils.extend({\n                condition: '',\n                extractFn: self.propertyExtractor((opt && opt.filterBy) || null).bind(_this),\n                filterFn: self.equalsFilter.bind(_this)\n            }, opt);\n        });\n        return function (item) {\n            return filterConfigs.reduce(function (pass, opt) {\n                if (!pass || !opt.condition)\n                    return pass;\n                return opt.filterFn(opt.extractFn(item, opt), opt);\n            }, true);\n        };\n    };\n    return List;\n})();\nexports.List = List;\nfunction $get(context) {\n    return context.createSingleton('List', function () {\n        return new List(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar utils = __webpack_require__(16);\nvar Log = (function () {\n    function Log(context, console) {\n        if (!console) {\n            console = {\n                log: function () {\n                },\n                warn: function () {\n                },\n                info: function () {\n                },\n                error: function () {\n                }\n            };\n        }\n        this.context = context;\n        this.console = console;\n        this.utils = utils.$get(context);\n        this.logDebug = false;\n        this.logInfo = false;\n        this.logWarnings = false;\n        this.logErrors = false;\n        this.addTimestamps = false;\n    }\n    Log.prototype.disableAll = function () {\n        this.logDebug = false;\n        this.logInfo = false;\n        this.logWarnings = false;\n        this.logErrors = false;\n    };\n    Log.prototype.enableAll = function () {\n        this.logDebug = true;\n        this.logInfo = true;\n        this.logWarnings = true;\n        this.logErrors = true;\n    };\n    Log.prototype.parseArguments = function (args) {\n        args = this.utils.argumentsToArray(args);\n        if (this.addTimestamps)\n            args.unshift(new Date().toLocaleString(), '-');\n        return args;\n    };\n    Log.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        if (this.logDebug)\n            this.console.log.apply(this.console, this.parseArguments(arguments));\n    };\n    Log.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        if (this.logInfo)\n            this.console.info.apply(this.console, this.parseArguments(arguments));\n    };\n    Log.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        if (this.logWarnings)\n            this.console.warn.apply(this.console, this.parseArguments(arguments));\n    };\n    Log.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i - 0] = arguments[_i];\n        }\n        if (this.logErrors)\n            this.console.error.apply(this.console, this.parseArguments(arguments));\n    };\n    return Log;\n})();\nexports.Log = Log;\nfunction $get(context) {\n    return context.createSingleton('Log', function () {\n        return new Log(context, console);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar utils = __webpack_require__(16);\nvar log = __webpack_require__(11);\n/**\n * @see https://github.com/Microsoft/TypeScript/issues/275\n */\nvar Observable = (function () {\n    function Observable(context) {\n        if (!(this instanceof Observable))\n            throw new Error('Observable(): New operator was omitted');\n        Object.defineProperty(this, 'listeners', { value: {}, enumerable: false, writable: true });\n        Object.defineProperty(this, 'oneTimeEvents', { value: {}, enumerable: false, writable: true });\n        Object.defineProperty(this, 'oneTimeArguments', { value: {}, enumerable: false, writable: true });\n        this.context = context;\n        this.utils = utils.$get(context);\n        this.log = log.$get(context);\n    }\n    Observable.prototype.hasListeners = function (event) {\n        return (event in this.listeners);\n    };\n    /**\n     * @deprecated\n     * @param {string} event\n     */\n    Observable.prototype.registerOneTimeEvent = function (event) {\n        this.oneTimeEvents[event] = false;\n        this.oneTimeArguments[event] = [];\n    };\n    Observable.prototype.on = function (events, callback) {\n        var _this = this;\n        if (typeof events == 'string')\n            events = [events];\n        if (!events)\n            throw new Error('No events to subscribe to');\n        if (typeof callback !== 'function')\n            throw new Error('Callback must be a function');\n        var self = this;\n        events.forEach(function (event) {\n            if (!self.hasListeners(event))\n                self.listeners[event] = [];\n            self.listeners[event].push(callback);\n            if (self.isOneTimeEventFired(event)) {\n                _this.log.debug('Observable.on(%s): One-time event has been fired already, executing callback', event);\n                callback.apply(self, self.getOneTimeEventArgumens(event));\n            }\n        });\n        return this;\n    };\n    Observable.prototype.emit = function (event) {\n        var _this = this;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (this.isOneTimeEventFired(event)) {\n            this.log.debug('Observable.emit(%s): One-time event has been fired already', event);\n            return null;\n        }\n        var result = null;\n        if (this.isOneTimeEvent(event)) {\n            this.setOneTimeEventFired(event);\n            this.setOneTimeEventArgumens(event, args);\n        }\n        if (!this.hasListeners(event))\n            return null;\n        this.listeners[event].some(function (callback) {\n            result = callback.apply(_this, args);\n            return (result === false);\n        });\n        return result;\n    };\n    Observable.prototype.off = function (event, callback) {\n        var _this = this;\n        if (!event) {\n            this.listeners = {};\n            this.oneTimeEvents = {};\n            this.oneTimeArguments = {};\n        }\n        else {\n            if (!callback) {\n                delete this.listeners[event];\n            }\n            else {\n                if (!this.hasListeners(event))\n                    return this;\n                this.listeners[event].forEach(function (cb, i) {\n                    if (cb === callback)\n                        delete _this.listeners[event][i];\n                });\n            }\n        }\n        return this;\n    };\n    /**\n     * @deprecated\n     * @param event\n     * @returns {boolean}\n     */\n    Observable.prototype.isOneTimeEvent = function (event) {\n        return (event in this.oneTimeEvents);\n    };\n    /**\n     * @deprecated\n     * @param {string} event\n     * @returns {boolean}\n     */\n    Observable.prototype.isOneTimeEventFired = function (event) {\n        if (!this.isOneTimeEvent(event))\n            return false;\n        return (this.oneTimeEvents[event]);\n    };\n    /**\n     * @deprecated\n     * @param event\n     */\n    Observable.prototype.setOneTimeEventFired = function (event) {\n        this.oneTimeEvents[event] = true;\n    };\n    /**\n     * @deprecated\n     * @param {string} event\n     * @param args\n     */\n    Observable.prototype.setOneTimeEventArgumens = function (event, args) {\n        this.oneTimeArguments[event] = args;\n    };\n    /**\n     * @deprecated\n     * @param {string} event\n     * @returns {any}\n     */\n    Observable.prototype.getOneTimeEventArgumens = function (event) {\n        return this.oneTimeArguments[event];\n    };\n    /**\n     * @deprecated\n     * @returns {T}\n     */\n    Observable.prototype.offAll = function () {\n        return this.off();\n    };\n    Observable.prototype.destroy = function () {\n        this.off();\n        this.log.debug('Observable.destroy(): Listeners were destroyed');\n        return this;\n    };\n    Observable.prototype.emitAndCallback = function (event, args, callback) {\n        args = this.utils.argumentsToArray(args);\n        if (event)\n            this.emit.apply(this, [event].concat(args));\n        if (callback)\n            callback.apply(this, args);\n        return this;\n    };\n    return Observable;\n})();\nexports.Observable = Observable;\nfunction $get(context) {\n    return new Observable(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar observable = __webpack_require__(12);\nvar PageVisibility = (function (_super) {\n    __extends(PageVisibility, _super);\n    function PageVisibility(context) {\n        var _this = this;\n        _super.call(this, context);\n        this.events = {\n            change: 'change'\n        };\n        var hidden = \"hidden\", onchange = function (evt) {\n            evt = evt || window.event;\n            var v = 'visible', h = 'hidden', evtMap = {\n                focus: v,\n                focusin: v,\n                pageshow: v,\n                blur: h,\n                focusout: h,\n                pagehide: h\n            };\n            _this.visible = (evt.type in evtMap) ? evtMap[evt.type] == v : !document[hidden];\n            _this.emit(_this.events.change, _this.visible);\n        };\n        this.visible = true;\n        if (typeof document == 'undefined' || typeof window == 'undefined')\n            return;\n        // Standards:\n        if (hidden in document)\n            document.addEventListener(\"visibilitychange\", onchange);\n        else if ((hidden = \"mozHidden\") in document)\n            document.addEventListener(\"mozvisibilitychange\", onchange);\n        else if ((hidden = \"webkitHidden\") in document)\n            document.addEventListener(\"webkitvisibilitychange\", onchange);\n        else if ((hidden = \"msHidden\") in document)\n            document.addEventListener(\"msvisibilitychange\", onchange);\n        else if ('onfocusin' in document)\n            document.onfocusin = document.onfocusout = onchange;\n        else\n            window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;\n    }\n    PageVisibility.prototype.isVisible = function () {\n        return this.visible;\n    };\n    return PageVisibility;\n})(observable.Observable);\nexports.PageVisibility = PageVisibility;\nfunction $get(context) {\n    return new PageVisibility(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar observable = __webpack_require__(12);\nvar cache = __webpack_require__(7);\nvar request = __webpack_require__(41);\nvar Platform = (function (_super) {\n    __extends(Platform, _super);\n    function Platform(context) {\n        _super.call(this, context);\n        this.events = {\n            accessViolation: 'accessViolation',\n            logoutSuccess: 'logoutSuccess',\n            logoutError: 'logoutError',\n            authorizeSuccess: 'authorizeSuccess',\n            authorizeError: 'authorizeError',\n            refreshSuccess: 'refreshSuccess',\n            refreshError: 'refreshError'\n        };\n        this.server = '';\n        this.apiKey = '';\n        this.account = '~';\n        this.urlPrefix = '/restapi';\n        this.apiVersion = 'v1.0';\n        this.accountPrefix = '/account/';\n        this.accessTokenTtl = null; // Platform server by default sets it to 60 * 60 = 1 hour\n        this.refreshTokenTtl = 10 * 60 * 60; // 10 hours\n        this.refreshTokenTtlRemember = 7 * 24 * 60 * 60; // 1 week\n        this.refreshHandicapMs = 60 * 1000; // 1 minute\n        this.refreshDelayMs = 100;\n        this.clearCacheOnRefreshError = true;\n        this.refreshPromise = null;\n        this.cacheId = 'platform';\n        this.pollInterval = 250;\n        this.releaseTimeout = 5000; // If queue was not released then force it to do so after some timeout\n    }\n    Platform.prototype.getStorage = function () {\n        return cache.$get(this.context);\n    };\n    Platform.prototype.getRequest = function () {\n        return request.$get(this.context);\n    };\n    Platform.prototype.clearStorage = function () {\n        this.getStorage().clean();\n        return this;\n    };\n    Platform.prototype.setCredentials = function (appKey, appSecret) {\n        var apiKey = (appKey || '') + ':' + (appSecret || '');\n        if (apiKey == ':')\n            return this;\n        this.apiKey = (typeof btoa == 'function') ? btoa(apiKey) : new Buffer(apiKey).toString('base64');\n        return this;\n    };\n    Platform.prototype.getCredentials = function () {\n        var credentials = ((typeof atob == 'function') ? atob(this.apiKey) : new Buffer(this.apiKey, 'base64').toString('utf-8')).split(':');\n        return {\n            key: credentials[0],\n            secret: credentials[1]\n        };\n    };\n    Platform.prototype.setServer = function (server) {\n        this.server = server || '';\n        return this;\n    };\n    Platform.prototype.remember = function (remember) {\n        var key = this.cacheId + '-remember';\n        if (remember !== undefined) {\n            this.getStorage().setItem(key, remember);\n            return this;\n        }\n        return this.getStorage().getItem(key) || false;\n    };\n    Platform.prototype.getAuthURL = function (options) {\n        options = options || {};\n        return this.apiUrl('/restapi/oauth/authorize?' + this.utils.queryStringify({\n            'response_type': 'code',\n            'redirect_uri': options.redirectUri || '',\n            'client_id': this.getCredentials().key,\n            'state': options.state || '',\n            'brand_id': options.brandId || '',\n            'display': options.display || '',\n            'prompt': options.prompt || ''\n        }), { addServer: true });\n    };\n    Platform.prototype.parseAuthRedirectUrl = function (url) {\n        var qs = this.utils.parseQueryString(url.split('?').reverse()[0]), error = qs.error_description || qs.error;\n        if (error) {\n            var e = new Error(error);\n            e.error = qs.error;\n            throw e;\n        }\n        return qs;\n    };\n    Platform.prototype.authorize = function (options) {\n        var _this = this;\n        options = options || {};\n        options.remember = options.remember || false;\n        var body = {\n            \"access_token_ttl\": this.accessTokenTtl,\n            \"refresh_token_ttl\": options.remember ? this.refreshTokenTtlRemember : this.refreshTokenTtl\n        };\n        if (options.username) {\n            body.grant_type = 'password';\n            body.username = options.username;\n            body.password = options.password;\n            body.extension = options.extension || '';\n        }\n        else if (options.code) {\n            body.grant_type = 'authorization_code';\n            body.code = options.code;\n            body.redirect_uri = options.redirectUri;\n        }\n        else {\n            return this.context.getPromise().reject(new Error('Unsupported authorization flow'));\n        }\n        return this.authCall({\n            url: '/restapi/oauth/token',\n            post: body\n        }).then(function (response) {\n            _this.setCache(response.data).remember(options.remember).emitAndCallback(_this.events.authorizeSuccess, []);\n            return response;\n        }).catch(function (e) {\n            _this.clearStorage().emitAndCallback(_this.events.authorizeError, [e]);\n            throw e;\n        });\n    };\n    Platform.prototype.isPaused = function () {\n        var storage = this.getStorage(), cacheId = this.cacheId + '-refresh';\n        return !!storage.getItem(cacheId) && Date.now() - parseInt(storage.getItem(cacheId)) < this.releaseTimeout;\n    };\n    Platform.prototype.pause = function () {\n        this.getStorage().setItem(this.cacheId + '-refresh', Date.now());\n        return this;\n    };\n    /**\n     * If the queue is unpaused internally, polling will be cancelled\n     * @returns {Platform}\n     */\n    Platform.prototype.resume = function () {\n        this.getStorage().removeItem(this.cacheId + '-refresh');\n        return this;\n    };\n    Platform.prototype.refresh = function () {\n        var _this = this;\n        var refresh = new (this.context.getPromise())(function (resolve, reject) {\n            if (_this.isPaused()) {\n                return resolve(_this.refreshPolling(null));\n            }\n            else {\n                _this.pause();\n            }\n            // Make sure all existing AJAX calls had a chance to reach the server\n            setTimeout(function () {\n                var authData = _this.getAuthData();\n                _this.log.debug('Platform.refresh(): Performing token refresh (access token', authData.access_token, ', refresh token', authData.refresh_token, ')');\n                if (!authData || !authData.refresh_token)\n                    return reject(new Error('Refresh token is missing'));\n                if (Date.now() > authData.refreshExpireTime)\n                    return reject(new Error('Refresh token has expired'));\n                if (!_this.isPaused())\n                    return reject(new Error('Queue was resumed before refresh call'));\n                resolve(_this.authCall({\n                    url: '/restapi/oauth/token',\n                    post: {\n                        \"grant_type\": \"refresh_token\",\n                        \"refresh_token\": authData.refresh_token,\n                        \"access_token_ttl\": _this.accessTokenTtl,\n                        \"refresh_token_ttl\": _this.remember() ? _this.refreshTokenTtlRemember : _this.refreshTokenTtl\n                    }\n                }));\n            }, _this.refreshDelayMs);\n        });\n        return refresh.then(function (response) {\n            // This means refresh has happened elsewhere and we are here because of timeout\n            if (!response || !response.data)\n                return response;\n            _this.log.info('Platform.refresh(): Token was refreshed');\n            if (!response.data.refresh_token || !response.data.access_token) {\n                var e = new Error('Malformed OAuth response');\n                e.ajax = response;\n                throw e;\n            }\n            _this.setCache(response.data).resume();\n            return response;\n        }).then(function (result) {\n            _this.emit(_this.events.refreshSuccess, result);\n            return result;\n        }).catch(function (e) {\n            if (_this.clearCacheOnRefreshError)\n                _this.clearStorage();\n            _this.emitAndCallback(_this.events.accessViolation, [e]).emitAndCallback(_this.events.refreshError, [e]);\n            throw e;\n        });\n    };\n    /**\n     * @returns {Promise}\n     */\n    Platform.prototype.logout = function () {\n        var _this = this;\n        this.pause();\n        return this.authCall({\n            url: '/restapi/oauth/revoke',\n            post: {\n                token: this.getToken()\n            }\n        }).then(function (response) {\n            _this.resume().clearStorage().emit(_this.events.logoutSuccess, response);\n            return response;\n        }).catch(function (e) {\n            _this.resume().emitAndCallback(_this.events.accessViolation, [e]).emitAndCallback(_this.events.logoutError, [e]);\n            throw e;\n        });\n    };\n    Platform.prototype.refreshPolling = function (result) {\n        var _this = this;\n        if (this.refreshPromise)\n            return this.refreshPromise;\n        this.refreshPromise = new (this.context.getPromise())(function (resolve, reject) {\n            _this.log.warn('Platform.refresh(): Refresh is already in progress polling started');\n            _this.utils.poll(function (next) {\n                if (_this.isPaused())\n                    return next();\n                _this.refreshPromise = null;\n                _this.resume();\n                if (_this.isTokenValid()) {\n                    resolve(result);\n                }\n                else {\n                    reject(new Error('Automatic authentification timeout'));\n                }\n            }, _this.pollInterval);\n        });\n        return this.refreshPromise;\n    };\n    Platform.prototype.getToken = function () {\n        return this.getAuthData().access_token;\n    };\n    Platform.prototype.getTokenType = function () {\n        return this.getAuthData().token_type;\n    };\n    Platform.prototype.getAuthData = function () {\n        return this.getStorage().getItem(this.cacheId) || {\n            token_type: '',\n            access_token: '',\n            expires_in: 0,\n            refresh_token: '',\n            refresh_token_expires_in: 0\n        };\n    };\n    /**\n     * Check if there is a valid (not expired) access token\n     */\n    Platform.prototype.isTokenValid = function () {\n        var authData = this.getAuthData();\n        return (authData.token_type == Platform.forcedTokenType || (new Date(authData.expireTime).getTime() - this.refreshHandicapMs) > Date.now() && !this.isPaused());\n    };\n    /**\n     * Checks if user is authorized\n     * If there is no access token, refresh will be performed\n     */\n    Platform.prototype.isAuthorized = function () {\n        if (this.isTokenValid())\n            return this.context.getPromise().resolve(true);\n        return this.refresh();\n    };\n    Platform.prototype.cancelAccessToken = function () {\n        return this.setCache(this.utils.extend(this.getAuthData(), {\n            access_token: '',\n            expires_in: 0\n        }));\n    };\n    Platform.prototype.setCache = function (authData) {\n        var oldAuthData = this.getAuthData();\n        this.log.info('Platform.setCache(): Tokens were updated, new:', authData, ', old:', oldAuthData);\n        authData.expireTime = Date.now() + (authData.expires_in * 1000);\n        authData.refreshExpireTime = Date.now() + (authData.refresh_token_expires_in * 1000);\n        this.getStorage().setItem(this.cacheId, authData);\n        return this;\n    };\n    Platform.prototype.forceAuthentication = function () {\n        this.setCache({\n            token_type: Platform.forcedTokenType,\n            access_token: '',\n            expires_in: 0,\n            refresh_token: '',\n            refresh_token_expires_in: 0\n        });\n        return this;\n    };\n    Platform.prototype.apiCall = function (options) {\n        var _this = this;\n        options = options || {};\n        options.url = this.apiUrl(options.url, { addServer: true });\n        return this.isAuthorized().then(function () {\n            var token = _this.getToken();\n            return _this.getRequest().setOptions(options).setHeader('Authorization', _this.getTokenType() + (token ? ' ' + token : '')).send();\n        }).catch(function (e) {\n            if (!e.response || !e.response.isUnauthorized())\n                throw e;\n            _this.cancelAccessToken();\n            return _this.refresh().then(function () {\n                // Re-send with same options\n                return _this.apiCall(options);\n            });\n        });\n    };\n    Platform.prototype.get = function (url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'GET';\n        return this.apiCall(options);\n    };\n    Platform.prototype.post = function (url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'POST';\n        return this.apiCall(options);\n    };\n    Platform.prototype.put = function (url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'PUT';\n        return this.apiCall(options);\n    };\n    Platform.prototype['delete'] = function (url, options) {\n        options = options || {};\n        options.url = url;\n        options.method = 'DELETE';\n        return this.apiCall(options);\n    };\n    Platform.prototype.authCall = function (options) {\n        options = options || {};\n        options.method = options.method || 'POST';\n        options.url = this.apiUrl(options.url, { addServer: true });\n        return this.getRequest().setOptions(options).setHeader('Content-Type', 'application/x-www-form-urlencoded').setHeader('Accept', 'application/json').setHeader('Authorization', 'Basic ' + this.apiKey).send();\n    };\n    Platform.prototype.apiUrl = function (url, options) {\n        url = url || '';\n        options = options || {};\n        var builtUrl = '', hasHttp = url.indexOf('http://') != -1 || url.indexOf('https://') != -1;\n        if (options.addServer && !hasHttp)\n            builtUrl += this.server;\n        if (url.indexOf(this.urlPrefix) == -1 && !hasHttp)\n            builtUrl += this.urlPrefix + '/' + this.apiVersion;\n        if (url.indexOf(this.accountPrefix) > -1)\n            builtUrl.replace(this.accountPrefix + '~', this.accountPrefix + this.account);\n        builtUrl += url;\n        if (options.addMethod || options.addToken)\n            builtUrl += (url.indexOf('?') > -1 ? '&' : '?');\n        if (options.addMethod)\n            builtUrl += '_method=' + options.addMethod;\n        if (options.addToken)\n            builtUrl += (options.addMethod ? '&' : '') + 'access_token=' + this.getToken();\n        return builtUrl;\n    };\n    Platform.forcedTokenType = 'forced';\n    return Platform;\n})(observable.Observable);\nexports.Platform = Platform;\nfunction $get(context) {\n    return context.createSingleton('Platform', function () {\n        return new Platform(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar observable = __webpack_require__(12);\nvar platform = __webpack_require__(14);\nvar Subscription = (function (_super) {\n    __extends(Subscription, _super);\n    function Subscription(context) {\n        _super.call(this, context);\n        this.events = {\n            notification: 'notification',\n            removeSuccess: 'removeSuccess',\n            removeError: 'removeError',\n            renewSuccess: 'renewSuccess',\n            renewError: 'renewError',\n            subscribeSuccess: 'subscribeSuccess',\n            subscribeError: 'subscribeError'\n        };\n        this.pubnub = null;\n        this.eventFilters = [];\n        this.timeout = null;\n        this.subscription = {\n            eventFilters: [],\n            expirationTime: '',\n            expiresIn: 0,\n            deliveryMode: {\n                transportType: 'PubNub',\n                encryption: false,\n                address: '',\n                subscriberKey: '',\n                secretKey: ''\n            },\n            id: '',\n            creationTime: '',\n            status: '',\n            uri: ''\n        };\n    }\n    Subscription.prototype.getPubnub = function () {\n        return this.context.getPubnub();\n    };\n    Subscription.prototype.getPlatform = function () {\n        return platform.$get(this.context);\n    };\n    /**\n     * Creates or updates subscription if there is an active one\n     * @param {{events?:string[]}} [options] New array of events\n     * @returns {Promise}\n     */\n    Subscription.prototype.register = function (options) {\n        if (this.isSubscribed()) {\n            return this.renew(options);\n        }\n        else {\n            return this.subscribe(options);\n        }\n    };\n    Subscription.prototype.addEvents = function (events) {\n        this.eventFilters = this.eventFilters.concat(events);\n        return this;\n    };\n    Subscription.prototype.setEvents = function (events) {\n        this.eventFilters = events;\n        return this;\n    };\n    Subscription.prototype.getFullEventFilters = function () {\n        var _this = this;\n        return this.eventFilters.map(function (event) {\n            return _this.getPlatform().apiUrl(event);\n        });\n    };\n    Subscription.prototype.subscribe = function (options) {\n        var _this = this;\n        options = options || {};\n        if (options.events)\n            this.eventFilters = options.events;\n        this.clearTimeout();\n        return new (this.context.getPromise())(function (resolve, reject) {\n            if (!_this.eventFilters || !_this.eventFilters.length)\n                throw new Error('Events are undefined');\n            resolve(_this.getPlatform().apiCall({\n                method: 'POST',\n                url: '/restapi/v1.0/subscription',\n                post: {\n                    eventFilters: _this.getFullEventFilters(),\n                    deliveryMode: {\n                        transportType: 'PubNub'\n                    }\n                }\n            }));\n        }).then(function (ajax) {\n            _this.updateSubscription(ajax.data).subscribeAtPubnub().emit(_this.events.subscribeSuccess, ajax.data);\n            return ajax;\n        }).catch(function (e) {\n            _this.unsubscribe().emit(_this.events.subscribeError, e);\n            throw e;\n        });\n    };\n    Subscription.prototype.renew = function (options) {\n        var _this = this;\n        options = options || {};\n        if (options.events)\n            this.eventFilters = options.events;\n        this.clearTimeout();\n        return new (this.context.getPromise())(function (resolve, reject) {\n            if (!_this.subscription || !_this.subscription.id)\n                throw new Error('Subscription ID is required');\n            if (!_this.eventFilters || !_this.eventFilters.length)\n                throw new Error('Events are undefined');\n            resolve();\n        }).then(function () {\n            return _this.getPlatform().apiCall({\n                method: 'PUT',\n                url: '/restapi/v1.0/subscription/' + _this.subscription.id,\n                post: {\n                    eventFilters: _this.getFullEventFilters()\n                }\n            });\n        }).then(function (ajax) {\n            _this.updateSubscription(ajax.data).emit(_this.events.renewSuccess, ajax.data);\n            return ajax;\n        }).catch(function (e) {\n            _this.unsubscribe().emit(_this.events.renewError, e);\n            throw e;\n        });\n    };\n    Subscription.prototype.remove = function (options) {\n        var _this = this;\n        options = this.utils.extend({\n            async: true\n        }, options);\n        return new (this.context.getPromise())(function (resolve, reject) {\n            if (!_this.subscription || !_this.subscription.id)\n                throw new Error('Subscription ID is required');\n            resolve(_this.getPlatform().apiCall({\n                async: !!options.async,\n                // hook and has to be synchronous\n                method: 'DELETE',\n                url: '/restapi/v1.0/subscription/' + _this.subscription.id\n            }));\n        }).then(function (ajax) {\n            _this.unsubscribe().emit(_this.events.removeSuccess, ajax);\n            return ajax;\n        }).catch(function (e) {\n            _this.emit(_this.events.removeError, e);\n            throw e;\n        });\n    };\n    Subscription.prototype.destroy = function () {\n        this.unsubscribe();\n        this.log.info('RC.core.Subscription: Destroyed');\n        return _super.prototype.destroy.call(this);\n    };\n    Subscription.prototype.isSubscribed = function () {\n        return this.subscription && this.subscription.deliveryMode && this.subscription.deliveryMode.subscriberKey && this.subscription.deliveryMode.address;\n    };\n    Subscription.prototype.setTimeout = function () {\n        var _this = this;\n        var timeToExpiration = (this.subscription.expiresIn * 1000) - Subscription.renewHandicapMs;\n        this.timeout = setTimeout(function () {\n            _this.renew({});\n        }, timeToExpiration);\n    };\n    Subscription.prototype.clearTimeout = function () {\n        clearTimeout(this.timeout);\n    };\n    Subscription.prototype.updateSubscription = function (subscription) {\n        this.clearTimeout();\n        this.subscription = subscription;\n        this.setTimeout();\n        return this;\n    };\n    /**\n     * Remove subscription and disconnect from PUBNUB\n     */\n    Subscription.prototype.unsubscribe = function () {\n        this.clearTimeout();\n        if (this.pubnub && this.isSubscribed())\n            this.pubnub.unsubscribe({ channel: this.subscription.deliveryMode.address });\n        this.subscription = null;\n        return this;\n    };\n    /**\n     * Do not use this method! Internal use only\n     */\n    Subscription.prototype.decrypt = function (message) {\n        if (this.isSubscribed() && this.subscription.deliveryMode.encryptionKey) {\n            var PUBNUB = this.getPubnub();\n            message = PUBNUB.crypto_obj.decrypt(message, this.subscription.deliveryMode.encryptionKey, {\n                encryptKey: false,\n                keyEncoding: 'base64',\n                keyLength: 128,\n                mode: 'ecb'\n            });\n        }\n        return message;\n    };\n    /**\n     * Do not use this method! Internal use only\n     */\n    Subscription.prototype.notify = function (message) {\n        this.emit(this.events.notification, this.decrypt(message));\n        return this;\n    };\n    /**\n     * Do not use this method! Internal use only\n     */\n    Subscription.prototype.subscribeAtPubnub = function () {\n        var _this = this;\n        if (!this.isSubscribed())\n            return this;\n        var PUBNUB = this.getPubnub();\n        this.pubnub = PUBNUB.init({\n            ssl: true,\n            subscribe_key: this.subscription.deliveryMode.subscriberKey\n        });\n        this.pubnub.ready();\n        this.pubnub.subscribe({\n            channel: this.subscription.deliveryMode.address,\n            message: function (message, env, channel) {\n                _this.log.info('RC.core.Subscription: Incoming message', message);\n                _this.notify(message);\n            },\n            connect: function () {\n                _this.log.info('RC.core.Subscription: PUBNUB connected');\n            }\n        });\n        return this;\n    };\n    Subscription.renewHandicapMs = 60 * 1000;\n    return Subscription;\n})(observable.Observable);\nexports.Subscription = Subscription;\nfunction $get(context) {\n    return new Subscription(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar hasOwn = Object.prototype.hasOwnProperty, toString = Object.prototype.toString, rdigit = /\\d/, class2type = {};\n// Populate the class2type map\n'Boolean Number String Function Array Date RegExp Object'.split(' ').forEach(function (name) {\n    class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n});\nvar Utils = (function () {\n    function Utils() {\n    }\n    /**\n     * Ported from jQuery.fn.extend\n     * Optional first parameter makes deep copy\n     */\n    Utils.prototype.extend = function (targetObject, sourceObject) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;\n        // Handle a deep copy situation\n        if (typeof target === \"boolean\") {\n            deep = target;\n            // skip the boolean and the target\n            target = arguments[i] || {};\n            i++;\n        }\n        // Handle case when target is a string or something (possible in deep copy)\n        if (typeof target !== \"object\" && !this.isFunction(target)) {\n            target = {};\n        }\n        for (; i < length; i++) {\n            // Only deal with non-null/undefined values\n            if ((options = arguments[i]) !== null) {\n                for (name in options) {\n                    src = target[name];\n                    copy = options[name];\n                    // Prevent never-ending loop\n                    if (target === copy) {\n                        continue;\n                    }\n                    // Recurse if we're merging plain objects or arrays\n                    if (deep && copy && (this.isPlainObject(copy) || (copyIsArray = this.isArray(copy)))) {\n                        if (copyIsArray) {\n                            copyIsArray = false;\n                            clone = src && this.isArray(src) ? src : [];\n                        }\n                        else {\n                            clone = src && this.isPlainObject(src) ? src : {};\n                        }\n                        // Never move original objects, clone them\n                        target[name] = this.extend(deep, clone, copy);\n                    }\n                    else if (copy !== undefined) {\n                        target[name] = copy;\n                    }\n                }\n            }\n        }\n        // Return the modified object\n        return target;\n    };\n    Utils.prototype.forEach = function (object, cb) {\n        for (var i in object) {\n            if (!object.hasOwnProperty(i))\n                continue;\n            var res = cb(object[i], i);\n            if (res === false)\n                break;\n        }\n    };\n    /**\n     * TODO Replace with something better\n     * @see https://github.com/joyent/node/blob/master/lib/querystring.js\n     * @param {object} parameters\n     * @returns {string}\n     */\n    Utils.prototype.queryStringify = function (parameters) {\n        var _this = this;\n        var array = [];\n        this.forEach(parameters, function (v, i) {\n            if (_this.isArray(v)) {\n                v.forEach(function (vv) {\n                    array.push(encodeURIComponent(i) + '=' + encodeURIComponent(vv));\n                });\n            }\n            else {\n                array.push(encodeURIComponent(i) + '=' + encodeURIComponent(v));\n            }\n        });\n        return array.join('&');\n    };\n    /**\n     * TODO Replace with something better\n     * @see https://github.com/joyent/node/blob/master/lib/querystring.js\n     * @param {string} queryString\n     * @returns {object}\n     */\n    Utils.prototype.parseQueryString = function (queryString) {\n        var argsParsed = {}, self = this;\n        queryString.split('&').forEach(function (arg) {\n            arg = decodeURIComponent(arg);\n            if (arg.indexOf('=') == -1) {\n                argsParsed[arg.trim()] = true;\n            }\n            else {\n                var pair = arg.split('='), key = pair[0].trim(), value = pair[1].trim();\n                if (key in argsParsed) {\n                    if (key in argsParsed && !self.isArray(argsParsed[key]))\n                        argsParsed[key] = [argsParsed[key]];\n                    argsParsed[key].push(value);\n                }\n                else {\n                    argsParsed[key] = value;\n                }\n            }\n        });\n        return argsParsed;\n    };\n    /**\n     * Returns true if the passed value is valid email address.\n     * Checks multiple comma separated emails according to RFC 2822 if parameter `multiple` is `true`\n     */\n    Utils.prototype.isEmail = function (v, multiple) {\n        if (!!multiple) {\n            //this Regexp is also suitable for multiple emails (comma separated)\n            return /^(?:[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?[ ,;]*)+$/i.test(v);\n        }\n        else {\n            return /^[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(v);\n        }\n    };\n    Utils.prototype.isPhoneNumber = function (v) {\n        return (/\\+?1[0-9]{3}[0-9a-z]{7}/im.test(v.toString().split(/[^0-9a-z\\+]/im).join('')));\n    };\n    /**\n     * @param args\n     * @returns {Array}\n     */\n    Utils.prototype.argumentsToArray = function (args) {\n        return Array.prototype.slice.call(args || [], 0);\n    };\n    Utils.prototype.isDate = function (obj) {\n        return this.type(obj) === \"date\";\n    };\n    Utils.prototype.isFunction = function (obj) {\n        return this.type(obj) === \"function\";\n    };\n    Utils.prototype.isArray = function (obj) {\n        return Array.isArray ? Array.isArray(obj) : this.type(obj) === \"array\";\n    };\n    // A crude way of determining if an object is a window\n    Utils.prototype.isWindow = function (obj) {\n        return obj && typeof obj === \"object\" && \"setInterval\" in obj;\n    };\n    Utils.prototype.isNaN = function (obj) {\n        return obj === null || !rdigit.test(obj) || isNaN(obj);\n    };\n    Utils.prototype.type = function (obj) {\n        return obj === null ? String(obj) : class2type[toString.call(obj)] || \"object\";\n    };\n    Utils.prototype.isPlainObject = function (obj) {\n        // Must be an Object.\n        // Because of IE, we also have to check the presence of the constructor property.\n        // Make sure that DOM nodes and window objects don't pass through, as well\n        if (!obj || this.type(obj) !== \"object\" || obj.nodeType || this.isWindow(obj)) {\n            return false;\n        }\n        // Not own constructor property must be Object\n        if (obj.constructor && !hasOwn.call(obj, \"constructor\") && !hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\")) {\n            return false;\n        }\n        // Own properties are enumerated firstly, so to speed up,\n        // if last one is own, then all properties are own.\n        var key;\n        for (key in obj) {\n        }\n        return key === undefined || hasOwn.call(obj, key);\n    };\n    Utils.prototype.getProperty = function (obj, property) {\n        return property.split(/[.[\\]]/).reduce(function (res, part) {\n            if (!res)\n                return undefined;\n            return part ? res[part] : res;\n        }, obj);\n    };\n    Utils.prototype.poll = function (fn, interval, timeout) {\n        this.stopPolling(timeout);\n        interval = interval || 1000;\n        var next = function (delay) {\n            delay = delay || interval;\n            interval = delay;\n            return setTimeout(function () {\n                fn(next, delay);\n            }, delay);\n        };\n        return next();\n    };\n    Utils.prototype.stopPolling = function (timeout) {\n        if (timeout)\n            clearTimeout(timeout);\n    };\n    Utils.prototype.parseString = function (s) {\n        return s ? s.toString() : '';\n    };\n    Utils.prototype.parseNumber = function (n) {\n        if (!n)\n            return 0;\n        n = parseFloat(n);\n        return isNaN(n) ? 0 : n;\n    };\n    return Utils;\n})();\nexports.Utils = Utils;\nfunction $get(context) {\n    return context.createSingleton('Utils', function () {\n        return new Utils();\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar utils = __webpack_require__(16);\nvar Validator = (function () {\n    function Validator(context) {\n        this.context = context;\n        this.utils = utils.$get(context);\n    }\n    Validator.prototype.validate = function (validators) {\n        var result = {\n            errors: {},\n            isValid: true\n        };\n        result.errors = validators.reduce(function (errors, validator) {\n            var res = validator.validator();\n            if (res.length > 0) {\n                result.isValid = false;\n                errors[validator.field] = errors[validator.field] || [];\n                errors[validator.field] = errors[validator.field].concat(res);\n            }\n            return errors;\n        }, {});\n        return result;\n    };\n    /**\n     * It is not recommended to have any kinds of complex validators at front end\n     * @deprecated\n     */\n    Validator.prototype.email = function (value, multiple) {\n        var _this = this;\n        return function () {\n            if (!value)\n                return [];\n            return _this.utils.isEmail(value, multiple) ? [] : [new Error('Value has to be a valid email')];\n        };\n    };\n    /**\n     * It is not recommended to have any kinds of complex validators at front end\n     * TODO International phone numbers\n     * @deprecated\n     */\n    Validator.prototype.phone = function (value) {\n        var _this = this;\n        return function () {\n            if (!value)\n                return [];\n            return _this.utils.isPhoneNumber(value) ? [] : [new Error('Value has to be a valid US phone number')];\n        };\n    };\n    Validator.prototype.required = function (value) {\n        return function () {\n            return !value ? [new Error('Field is required')] : [];\n        };\n    };\n    Validator.prototype.length = function (value, max, min) {\n        return function () {\n            var errors = [];\n            if (!value)\n                return errors;\n            value = value.toString();\n            if (min && value.length < min)\n                errors.push(new Error('Minimum length of ' + min + ' characters is required'));\n            if (max && value.length > max)\n                errors.push(new Error('Maximum length of ' + max + ' characters is required'));\n            return errors;\n        };\n    };\n    return Validator;\n})();\nexports.Validator = Validator;\nfunction $get(context) {\n    return context.createSingleton('Validator', function () {\n        return new Validator(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar Account = (function (_super) {\n    __extends(Account, _super);\n    function Account() {\n        _super.apply(this, arguments);\n    }\n    Account.prototype.createUrl = function () {\n        return '/account/~';\n    };\n    return Account;\n})(helper.Helper);\nexports.Account = Account;\nfunction $get(context) {\n    return context.createSingleton('Account', function () {\n        return new Account(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar validator = __webpack_require__(17);\nvar BlockedNumber = (function (_super) {\n    __extends(BlockedNumber, _super);\n    function BlockedNumber(context) {\n        _super.call(this, context);\n        this.validator = validator.$get(context);\n    }\n    BlockedNumber.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (options.extensionId ? options.extensionId : '~') + '/blocked-number' + (id ? '/' + id : '');\n    };\n    BlockedNumber.prototype.validate = function (item) {\n        return this.validator.validate([\n            { field: 'phoneNumber', validator: this.validator.phone(item.phoneNumber) },\n            { field: 'phoneNumber', validator: this.validator.required(item.phoneNumber) },\n            { field: 'name', validator: this.validator.required(item.name) }\n        ]);\n    };\n    return BlockedNumber;\n})(helper.Helper);\nexports.BlockedNumber = BlockedNumber;\nfunction $get(context) {\n    return context.createSingleton('BlockedNumber', function () {\n        return new BlockedNumber(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar presence = __webpack_require__(33);\nvar contact = __webpack_require__(21);\nvar Call = (function (_super) {\n    __extends(Call, _super);\n    function Call(context) {\n        _super.call(this, context);\n        this.list = list.$get(context);\n        this.contact = contact.$get(context);\n        this.presence = presence.$get(context);\n    }\n    Call.prototype.createUrl = function (options, id) {\n        options = options || {};\n        if (!('personal' in options) && !('extensionId' in options))\n            options.personal = true;\n        return '/account/~/' + (options.personal || options.extensionId ? ('extension/' + (options.extensionId || '~') + '/') : '') + (options.active ? 'active-calls' : 'call-log') + (id ? '/' + id : '');\n    };\n    Call.prototype.getSessionId = function (call) {\n        return (call && call.sessionId);\n    };\n    Call.prototype.isInProgress = function (call) {\n        return (call && call.result == 'In Progress');\n    };\n    Call.prototype.isAlive = function (call) {\n        return (call && call.availability == 'Alive');\n    };\n    Call.prototype.isInbound = function (call) {\n        return (call && call.direction == 'Inbound');\n    };\n    Call.prototype.isOutbound = function (call) {\n        return !this.isInbound(call);\n    };\n    Call.prototype.isMissed = function (call) {\n        return (call && call.result == 'Missed');\n    };\n    Call.prototype.isFindMe = function (call) {\n        return (call && call.action == 'FindMe');\n    };\n    Call.prototype.getCallerInfo = function (call) {\n        return this.isInbound(call) ? call.from : call.to;\n    };\n    Call.prototype.getAllCallerInfos = function (call) {\n        return [this.getCallerInfo(call)].concat(this.isInbound(call) ? call.to : call.from);\n    };\n    Call.prototype.formatDuration = function (call) {\n        function addZero(v) {\n            return (v < 10) ? '0' + v : v;\n        }\n        var duration = parseInt(call.duration), hours = Math.floor(duration / (60 * 60)), mins = Math.floor((duration % (60 * 60)) / 60), secs = Math.floor(duration % 60);\n        return (hours ? hours + ':' : '') + addZero(mins) + ':' + addZero(secs);\n    };\n    Call.prototype.filter = function (options) {\n        options = this.utils.extend({\n            alive: true,\n            direction: '',\n            type: ''\n        }, options);\n        return this.list.filter([\n            { filterBy: 'direction', condition: options.direction },\n            { filterBy: 'type', condition: options.type }\n        ]);\n    };\n    Call.prototype.comparator = function (options) {\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'startTime'\n        }, options));\n    };\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all callerInfos found in\n     * all calls Warning, this function may be performance-consuming, reduce the amount of items passed to contacts\n     * and calls\n     */\n    Call.prototype.attachContacts = function (contacts, calls, options) {\n        var _this = this;\n        // Flatten all caller infos from all messages\n        var callerInfos = calls.reduce(function (callerInfos, call) {\n            return callerInfos.concat(_this.getAllCallerInfos(call));\n        }, []);\n        this.contact.attachToCallerInfos(callerInfos, contacts, options);\n    };\n    /**\n     * Check whether pair of calls are two legs of RingOut\n     */\n    Call.prototype.checkMergeability = function (outboundRingOutCall, inboundCall, options) {\n        var getTime = function (dateString) {\n            return (new Date(dateString)).getTime();\n        };\n        return ((!options.strict || outboundRingOutCall.action && outboundRingOutCall.action.toLowerCase().indexOf('ringout') != -1) && outboundRingOutCall.direction == 'Outbound' && inboundCall.direction == 'Inbound' && ((!inboundCall.startTime && !outboundRingOutCall.startTime) || Math.abs(getTime(inboundCall.startTime) - getTime(outboundRingOutCall.startTime)) < (options.maxStartTimeDiscrepancy || 5000)) && inboundCall.from.phoneNumber == outboundRingOutCall.to.phoneNumber && (inboundCall.to.phoneNumber == outboundRingOutCall.from.phoneNumber || inboundCall.to.name == outboundRingOutCall.from.name));\n    };\n    Call.prototype.combineCalls = function (outboundRingOutCall, inboundCall, options) {\n        options = options || {};\n        var result = [];\n        outboundRingOutCall.hasSubsequent = true;\n        if (options.merge) {\n            outboundRingOutCall.duration = (outboundRingOutCall.duration > inboundCall.duration) ? outboundRingOutCall.duration : inboundCall.duration;\n            // TODO Usually information from inbound call is more accurate for unknown reason\n            outboundRingOutCall.from = inboundCall.to;\n            outboundRingOutCall.to = inboundCall.from;\n            // Push only one \"merged\" outbound call\n            result.push(outboundRingOutCall);\n        }\n        else {\n            // Mark next call as subsequent\n            inboundCall.subsequent = true;\n            inboundCall.startTime = outboundRingOutCall.startTime; // Needed for sort\n            // Push both calls, first outbound then inbound\n            result.push(outboundRingOutCall);\n            result.push(inboundCall);\n        }\n        return result;\n    };\n    /**\n     * (!) Experimental (!)\n     *\n     * Calls in Recent Calls (Call Log) or Active Calls arrays can be combined if they are, for example, two legs of\n     * one RingOut. The logic that stands behind this process is simple:\n     *\n     * - Calls must have opposite directions\n     * - Must have been started within a certain limited time frame\n     * - Must have same phone numbers in their Caller Info sections (from/to)\n     *\n     * ```js\n     * var processedCalls = Call.processCalls(callsArray, {strict: false, merge: true});\n     * ```\n     *\n     * Flags:\n     *\n     * - if `strict` is `true` then only calls with RingOut in `action` property will be affected\n     * - `merge` &mdash; controls whether to merge calls (reducing the length of array) or give them `subsequent`\n     *     and `hasSubsequent` properties\n     */\n    Call.prototype.processCalls = function (calls, options) {\n        var processedCalls = [], callsToMerge = [], self = this;\n        // Iterate through calls\n        calls.forEach(function (call) {\n            var merged = false;\n            call.subsequent = false;\n            call.hasSubsequent = false;\n            // Second cycle to find other leg\n            // It is assumed that call is the outbound, secondCall is inbound\n            calls.some(function (secondCall) {\n                if (call === secondCall)\n                    return false;\n                if (self.checkMergeability(call, secondCall, options)) {\n                    // Push to result array merged call\n                    processedCalls = processedCalls.concat(self.combineCalls(call, secondCall, options));\n                    // Push to array calls that are merged\n                    callsToMerge.push(call);\n                    callsToMerge.push(secondCall);\n                    merged = true;\n                }\n                return merged;\n            });\n        });\n        // After all calls are merged, add non-merged calls\n        calls.forEach(function (call) {\n            if (callsToMerge.indexOf(call) == -1)\n                processedCalls.push(call);\n        });\n        return processedCalls;\n    };\n    /**\n     * Converts Presence's ActiveCall array into regular Calls array\n     */\n    Call.prototype.parsePresenceCalls = function (activeCalls) {\n        var _this = this;\n        return activeCalls.map(function (activeCall) {\n            return {\n                id: activeCall.id,\n                uri: '',\n                sessionId: activeCall.sessionId,\n                from: { phoneNumber: activeCall.from },\n                to: { phoneNumber: activeCall.to },\n                direction: activeCall.direction,\n                startTime: '',\n                duration: 0,\n                type: '',\n                action: '',\n                result: _this.presence.isCallInProgress(activeCall) ? 'In Progress' : activeCall.telephonyStatus,\n                telephonyStatus: activeCall.telephonyStatus // non-standard property for compatibility\n            };\n        });\n    };\n    Call.prototype.getSignature = function (call) {\n        var cleanup = function (phoneNumber) {\n            return (phoneNumber || '').toString().replace(/[^0-9]/ig, '');\n        };\n        return call.direction + '|' + (call.from && cleanup(call.from.phoneNumber)) + '|' + (call.to && cleanup(call.to.phoneNumber));\n    };\n    Call.prototype.mergePresenceCalls = function (presenceCalls, presence) {\n        var currentDate = new Date(), activeCalls = this.parsePresenceCalls(presence && presence.activeCalls || []).map(function (call) {\n            // delete property to make sure it is skipped during merge\n            delete call.startTime;\n            return call;\n        });\n        presenceCalls = this.merge(presenceCalls || [], activeCalls, this.getSessionId, true);\n        presenceCalls.forEach(function (call) {\n            if (!call.startTime)\n                call.startTime = currentDate.toISOString();\n        });\n        return presenceCalls;\n    };\n    Call.prototype.mergeAll = function (presenceCalls, calls, activeCalls) {\n        // First, merge calls into presence calls\n        var presenceAndCalls = this.merge(presenceCalls || [], calls || [], this.getSessionId, true);\n        // Second, merge activeCalls into previous result\n        return this.merge(presenceAndCalls, activeCalls || [], this.getSessionId, true);\n    };\n    return Call;\n})(helper.Helper);\nexports.Call = Call;\nfunction $get(context) {\n    return context.createSingleton('Call', function () {\n        return new Call(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar validator = __webpack_require__(17);\nvar list = __webpack_require__(10);\nvar Contact = (function (_super) {\n    __extends(Contact, _super);\n    function Contact(context) {\n        _super.call(this, context);\n        this.phoneFields = [\n            'homePhone',\n            'homePhone2',\n            'businessPhone',\n            'businessPhone2',\n            'mobilePhone',\n            'companyPhone',\n            'assistantPhone',\n            'carPhone',\n            'otherPhone',\n            'callbackPhone'\n        ];\n        this.faxFields = [\n            'businessFax',\n            'otherFax'\n        ];\n        this.addressFields = [\n            'homeAddress',\n            'businessAddress',\n            'otherAddress'\n        ];\n        this.addressSubFields = [\n            'street',\n            'city',\n            'state',\n            'zip'\n        ];\n        this.nameFields = [\n            'firstName',\n            'middleName',\n            'lastName',\n            'nickName'\n        ];\n        this.otherFields = [\n            'company',\n            'jobTitle',\n            'webPage',\n            'notes'\n        ];\n        this.emailFields = [\n            'email',\n            'email2',\n            'email3'\n        ];\n        this.list = list.$get(context);\n        this.validator = validator.$get(context);\n    }\n    Contact.prototype.createUrl = function (options, id) {\n        options = options || {};\n        var root = '/account/~/extension/' + (options.extensionId ? options.extensionId : '~') + '/address-book';\n        if (options.sync)\n            return root + '-sync';\n        return root + (options.groupId ? '/group/' + options.groupId + '/contact' : '/contact') + (id ? '/' + id : '');\n    };\n    /**\n     * Returns all values of the given fields if value exists\n     */\n    Contact.prototype.getFieldValues = function (where, fields, asHash) {\n        return fields.reduce(function (result, field) {\n            if (where && where[field]) {\n                if (asHash) {\n                    result[field] = where[field];\n                }\n                else {\n                    result.push(where[field]);\n                }\n            }\n            return result;\n        }, asHash ? {} : []);\n    };\n    Contact.prototype.getFullName = function (contact) {\n        return this.getFieldValues(contact, this.nameFields).join(' ');\n    };\n    Contact.prototype.getEmails = function (contact, asHash) {\n        return this.getFieldValues(contact, this.emailFields, asHash);\n    };\n    Contact.prototype.getPhones = function (contact, asHash) {\n        return this.getFieldValues(contact, this.phoneFields, asHash);\n    };\n    Contact.prototype.getFaxes = function (contact, asHash) {\n        return this.getFieldValues(contact, this.faxFields, asHash);\n    };\n    Contact.prototype.getAddresses = function (contact, asHash) {\n        return this.getFieldValues(contact, this.addressFields, asHash);\n    };\n    Contact.prototype.isAlive = function (contact) {\n        return (contact.availability == 'Alive');\n    };\n    /**\n     * Matches a contact against a given string, returns null if nothing found\n     */\n    Contact.prototype.match = function (contact, string, options) {\n        var _this = this;\n        options = this.utils.extend({\n            fields: [].concat(this.nameFields, this.emailFields, this.phoneFields, this.faxFields, this.otherFields),\n            inAddresses: true,\n            transformFn: function (value, options) {\n                return value ? value.toString().toLocaleLowerCase() : '';\n            },\n            strict: false\n        }, options);\n        string = options.transformFn(string, options);\n        var found = null;\n        if (!string)\n            return found;\n        var matchWith = function (value) {\n            // skip unnecessary cycles if match has been found\n            if (found)\n                return;\n            var transformed = options.transformFn(value, options);\n            if (!transformed)\n                return;\n            var match = (options.strict ? transformed == string : transformed.indexOf(string) > -1);\n            if (match)\n                found = value;\n        };\n        // Search in fields\n        options.fields.forEach(function (field) {\n            matchWith(contact[field]);\n        });\n        // Search in addresses, skip unnecessary cycles if match has been found\n        if (options.inAddresses && !found)\n            this.addressFields.forEach(function (field) {\n                // skip unnecessary cycles if match has been found or no field value\n                if (!contact[field] || found)\n                    return;\n                _this.addressSubFields.forEach(function (subField) {\n                    matchWith(contact[field][subField]);\n                });\n            });\n        return found;\n    };\n    /**\n     * Matches a contact against a given phone number, returns null if nothing found\n     */\n    Contact.prototype.matchAsPhone = function (contact, phone, options) {\n        return this.match(contact, phone, this.utils.extend({\n            fields: [].concat(this.phoneFields, this.faxFields),\n            inAddresses: false,\n            transformFn: function (value, options) {\n                return value ? value.toString().replace(/[^\\d\\w]/ig, '') : ''; //TODO Trickier removal reqired;\n            },\n            strict: false\n        }, options));\n    };\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all given {ICallerInfo}\n     * Warning, this function may be performance-consuming, reduce the amount of items passed to contacts and callerInfos\n     */\n    Contact.prototype.attachToCallerInfos = function (callerInfos, contacts, options) {\n        var self = this, callerInfoIndex = this.index(callerInfos, function (callerInfo) {\n            return callerInfo.phoneNumber;\n        }, true);\n        this.utils.forEach(callerInfoIndex, function (indexedCallerInfos, phoneNumber) {\n            var foundContact = null, foundPhone = null;\n            contacts.some(function (contact) {\n                foundPhone = self.matchAsPhone(contact, phoneNumber, options);\n                if (foundPhone)\n                    foundContact = contact;\n                return foundPhone;\n            });\n            if (foundContact) {\n                indexedCallerInfos.forEach(function (callerInfo) {\n                    callerInfo.contact = foundContact;\n                    callerInfo.contactPhone = foundPhone;\n                });\n            }\n        });\n    };\n    Contact.prototype.comparator = function (options) {\n        var _this = this;\n        return this.list.comparator(this.utils.extend({\n            extractFn: function (contact, options) {\n                return _this.getFullName(contact);\n            }\n        }, options));\n    };\n    /**\n     * TODO Add filtering by group http://jira.ringcentral.com/browse/SDK-4\n     */\n    Contact.prototype.filter = function (options) {\n        var _this = this;\n        options = this.utils.extend({\n            alive: true,\n            startsWith: '',\n            phonesOnly: false,\n            faxesOnly: false\n        }, options);\n        return this.list.filter([\n            { condition: options.alive, filterFn: this.isAlive },\n            { condition: options.startsWith, filterFn: function (item, opts) {\n                return _this.match(item, opts.condition);\n            } },\n            { condition: options.phonesOnly, filterFn: function (item, opts) {\n                return (_this.getPhones(item).length > 0);\n            } },\n            { condition: options.faxesOnly, filterFn: function (item, opts) {\n                return (_this.getFaxes(item).length > 0);\n            } }\n        ]);\n    };\n    Contact.prototype.validate = function (item) {\n        return this.validator.validate([\n            { field: 'firstName', validator: this.validator.required(item.firstName) },\n            { field: 'lastName', validator: this.validator.required(item.lastName) },\n            { field: 'email', validator: this.validator.email(item.email) },\n            { field: 'email2', validator: this.validator.email(item.email2) },\n            { field: 'email3', validator: this.validator.email(item.email3) }\n        ]);\n    };\n    return Contact;\n})(helper.Helper);\nexports.Contact = Contact;\nfunction $get(context) {\n    return context.createSingleton('Contact', function () {\n        return new Contact(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar validator = __webpack_require__(17);\nvar ContactGroup = (function (_super) {\n    __extends(ContactGroup, _super);\n    function ContactGroup(context) {\n        _super.call(this, context);\n        this.validator = validator.$get(context);\n    }\n    ContactGroup.prototype.createUrl = function (options, id) {\n        return '/account/~/extension/~/address-book/group' + (id ? '/' + id : '');\n    };\n    ContactGroup.prototype.validate = function (item) {\n        return this.validator.validate([\n            { field: 'groupName', validator: this.validator.required(item && item.groupName) }\n        ]);\n    };\n    return ContactGroup;\n})(helper.Helper);\nexports.ContactGroup = ContactGroup;\nfunction $get(context) {\n    return context.createSingleton('ContactGroup', function () {\n        return new ContactGroup(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar Conferencing = (function (_super) {\n    __extends(Conferencing, _super);\n    function Conferencing() {\n        _super.apply(this, arguments);\n    }\n    Conferencing.prototype.createUrl = function () {\n        return '/account/~/extension/~/conferencing';\n    };\n    return Conferencing;\n})(helper.Helper);\nexports.Conferencing = Conferencing;\nfunction $get(context) {\n    return context.createSingleton('Conferencing', function () {\n        return new Conferencing(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar Country = (function (_super) {\n    __extends(Country, _super);\n    function Country() {\n        _super.apply(this, arguments);\n    }\n    Country.prototype.createUrl = function (options, id) {\n        return '/dictionary/country';\n    };\n    return Country;\n})(helper.Helper);\nexports.Country = Country;\nfunction $get(context) {\n    return context.createSingleton('Country', function () {\n        return new Country(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar validator = __webpack_require__(17);\nvar extension = __webpack_require__(27);\nvar deviceModel = __webpack_require__(26);\nvar Device = (function (_super) {\n    __extends(Device, _super);\n    function Device(context) {\n        _super.call(this, context);\n        this.validator = validator.$get(context);\n        this.extension = extension.$get(context);\n        this.deviceModel = deviceModel.$get(context);\n    }\n    Device.prototype.createUrl = function (options, id) {\n        options = options || {};\n        if (options.order)\n            return '/account/~/order';\n        return '/account/~' + (options.extensionId ? '/extension/' + options.extensionId : '') + '/device' + (id ? '/' + id : '');\n    };\n    /**\n     * @param {IDevice} item\n     */\n    Device.prototype.validate = function (item) {\n        return this.validator.validate([\n            {\n                field: 'emergencyServiceAddress-street',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.street)\n            },\n            {\n                field: 'emergencyServiceAddress-city',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.city)\n            },\n            {\n                field: 'emergencyServiceAddress-state',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.state)\n            },\n            {\n                field: 'emergencyServiceAddress-country',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.country)\n            },\n            {\n                field: 'emergencyServiceAddress-zip',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.zip)\n            },\n            {\n                field: 'emergencyServiceAddress-customerName',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.customerName)\n            },\n            { field: 'extension', validator: this.validator.required(this.extension.getId(item && item.extension)) },\n            { field: 'model', validator: this.validator.required(this.deviceModel.getId(item && item.model)) }\n        ]);\n    };\n    return Device;\n})(helper.Helper);\nexports.Device = Device;\nfunction $get(context) {\n    return context.createSingleton('Device', function () {\n        return new Device(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar DeviceModel = (function (_super) {\n    __extends(DeviceModel, _super);\n    function DeviceModel() {\n        _super.apply(this, arguments);\n        /**\n         * TODO Remove when http://jira.ringcentral.com/browse/SDK-1 is done\n         */\n        this.devices = [\n            {\n                id: '-1',\n                name: 'Softphone'\n            },\n            {\n                id: '0',\n                name: 'Existing device'\n            },\n            {\n                id: '19',\n                name: 'Cisco SPA-525G2 Desk Phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '23',\n                name: 'Polycom IP 321 Basic IP phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '30',\n                name: 'Polycom IP 550 HD Manager IP phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '37',\n                name: 'Polycom IP 6000 Conference Phone',\n                deviceClass: 'Conference Phone'\n            },\n            {\n                id: '40',\n                name: 'Polycom IP 335 HD IP phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '51',\n                name: 'Cisco SPA-303 Desk Phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '16',\n                name: 'Cisco SPA-508G Desk Phone with 1 Expansion Module',\n                deviceClass: 'Desk Phone',\n                addons: [\n                    {\n                        id: '2',\n                        name: 'Cisco Sidecar',\n                        count: '1'\n                    }\n                ]\n            },\n            {\n                id: '16',\n                name: 'Cisco SPA-508G Desk Phone with 2 Expansion Modules',\n                deviceClass: 'Desk Phone',\n                addons: [\n                    {\n                        id: '2',\n                        name: 'Cisco Sidecar',\n                        count: '2'\n                    }\n                ]\n            },\n            {\n                id: '16',\n                name: 'Cisco SPA-508G Desk Phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '19',\n                name: 'Cisco SPA-525G2 Desk Phone with 1 Expansion Module',\n                deviceClass: 'Desk Phone',\n                addons: [\n                    {\n                        id: '2',\n                        name: 'Cisco Sidecar',\n                        count: '1'\n                    }\n                ]\n            },\n            {\n                id: '19',\n                name: 'Cisco SPA-525G2 Desk Phone with 2 Expansion Modules\tDesk Phone',\n                addons: [\n                    {\n                        id: '2',\n                        name: 'Cisco Sidecar',\n                        count: '2'\n                    }\n                ]\n            },\n            {\n                id: '34',\n                name: 'Polycom IP 650 HD Executive IP phone with 1 Expansion Module',\n                deviceClass: 'Desk Phone',\n                addons: [\n                    {\n                        id: '1',\n                        name: 'Plolycom Expansion',\n                        count: '1'\n                    }\n                ]\n            },\n            {\n                id: '34',\n                name: 'Polycom IP 650 HD Executive IP phone with 2 Expansion Modules',\n                deviceClass: 'Desk Phone',\n                addons: [\n                    {\n                        id: '1',\n                        name: 'Plolycom Expansion',\n                        count: '2'\n                    }\n                ]\n            },\n            {\n                id: '34',\n                name: 'Polycom IP 650 HD Executive IP phone with 3 Expansion Modules',\n                deviceClass: 'Desk Phone',\n                addons: [\n                    {\n                        id: '1',\n                        name: 'Plolycom Expansion',\n                        count: '3'\n                    }\n                ]\n            },\n            {\n                id: '34',\n                name: 'Polycom IP 650 HD Executive IP phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '52',\n                name: 'Cisco SPA-122 ATA',\n                deviceClass: 'Analog Adapter'\n            },\n            {\n                id: '53',\n                name: 'Polycom VVX-500 Color Touchscreen',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '54',\n                name: 'Polycom VVX-310 Gigabit Ethernet Phone',\n                deviceClass: 'Desk Phone'\n            },\n            {\n                id: '55',\n                name: 'Polycom VVX-410 Color Gigabit Ethernet Phone',\n                deviceClass: 'Desk Phone'\n            }\n        ];\n    }\n    DeviceModel.prototype.getId = function (device) {\n        if (!device)\n            return null;\n        return device.id + (device.addons && device.addons[0] ? '-' + device.addons[0].id + '-' + device.addons[0].count : '');\n    };\n    /**\n     * Remove extra textual information from device\n     * @exceptionalCase Platform does not understand full device info\n     */\n    DeviceModel.prototype.cleanForSaving = function (device) {\n        if (!device)\n            return null;\n        delete device.name;\n        delete device.deviceClass;\n        if (device.addons && device.addons.length > 0) {\n            device.addons.forEach(function (addon, i) {\n                delete device.addons[i].name;\n            });\n        }\n        else {\n            delete device.addons;\n        }\n        return device;\n    };\n    return DeviceModel;\n})(helper.Helper);\nexports.DeviceModel = DeviceModel;\nfunction $get(context) {\n    return context.createSingleton('DeviceModel', function () {\n        return new DeviceModel(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar Extension = (function (_super) {\n    __extends(Extension, _super);\n    function Extension(context) {\n        _super.call(this, context);\n        this.type = {\n            department: 'Department',\n            user: 'User',\n            announcement: 'Announcement',\n            voicemail: 'Voicemail'\n        };\n        this.list = list.$get(context);\n    }\n    Extension.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~' + (options.departmentId ? '/department/' + options.departmentId + '/members' : '/extension') + (id ? '/' + id : '');\n    };\n    Extension.prototype.isUser = function (extension) {\n        return extension && extension.type == this.type.user;\n    };\n    Extension.prototype.isDepartment = function (extension) {\n        return extension && extension.type == this.type.department;\n    };\n    Extension.prototype.isAnnouncement = function (extension) {\n        return extension && extension.type == this.type.announcement;\n    };\n    Extension.prototype.isVoicemail = function (extension) {\n        return extension && extension.type == this.type.voicemail;\n    };\n    Extension.prototype.comparator = function (options) {\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'extensionNumber',\n            compareFn: this.list.numberComparator\n        }, options));\n    };\n    Extension.prototype.filter = function (options) {\n        options = this.utils.extend({\n            search: '',\n            type: ''\n        }, options);\n        return this.list.filter([\n            { filterBy: 'type', condition: options.type },\n            {\n                condition: options.search.toLocaleLowerCase(),\n                filterFn: this.list.containsFilter,\n                extractFn: function (item) {\n                    return (item.name && (item.name.toLocaleLowerCase() + ' ')) + (item.extensionNumber && item.extensionNumber.toString().toLocaleLowerCase());\n                }\n            }\n        ]);\n    };\n    return Extension;\n})(helper.Helper);\nexports.Extension = Extension;\nfunction $get(context) {\n    return context.createSingleton('Extension', function () {\n        return new Extension(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar ForwardingNumber = (function (_super) {\n    __extends(ForwardingNumber, _super);\n    function ForwardingNumber(context) {\n        _super.call(this, context);\n        this.list = list.$get(context);\n    }\n    ForwardingNumber.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (options.extensionId || '~') + '/forwarding-number' + (id ? '/' + id : '');\n    };\n    ForwardingNumber.prototype.getId = function (forwardingNumber) {\n        return forwardingNumber && (forwardingNumber.id || (forwardingNumber.phoneNumber)); //TODO @exceptionalCase\n    };\n    ForwardingNumber.prototype.hasFeature = function (phoneNumber, feature) {\n        return (!!phoneNumber && !!phoneNumber.features && phoneNumber.features.indexOf(feature) != -1);\n    };\n    ForwardingNumber.prototype.comparator = function (options) {\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'label'\n        }, options));\n    };\n    ForwardingNumber.prototype.filter = function (options) {\n        var _this = this;\n        options = this.utils.extend({\n            features: []\n        }, options);\n        return this.list.filter([{\n            condition: options.features.length,\n            filterFn: function (item) {\n                return options.features.some(function (feature) {\n                    return _this.hasFeature(item, feature);\n                });\n            }\n        }]);\n    };\n    return ForwardingNumber;\n})(helper.Helper);\nexports.ForwardingNumber = ForwardingNumber;\nfunction $get(context) {\n    return context.createSingleton('ForwardingNumber', function () {\n        return new ForwardingNumber(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar Language = (function (_super) {\n    __extends(Language, _super);\n    function Language() {\n        _super.apply(this, arguments);\n        this.languages = [\n            {\n                id: '1033',\n                name: 'English (US)'\n            },\n            {\n                id: '3084',\n                name: 'French (Canada)'\n            }\n        ];\n    }\n    return Language;\n})(helper.Helper);\nexports.Language = Language;\nfunction $get(context) {\n    return context.createSingleton('Language', function () {\n        return new Language(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar state = __webpack_require__(37);\nvar Location = (function (_super) {\n    __extends(Location, _super);\n    function Location(context) {\n        _super.call(this, context);\n        this.list = list.$get(context);\n        this.state = state.$get(context);\n    }\n    Location.prototype.createUrl = function () {\n        return '/dictionary/location';\n    };\n    Location.prototype.filter = function (options) {\n        var _this = this;\n        var uniqueNPAs = [];\n        options = this.utils.extend({\n            stateId: '',\n            onlyUniqueNPA: false\n        }, options);\n        return this.list.filter([\n            {\n                condition: options.stateId,\n                filterFn: function (item, opts) {\n                    return (_this.state.getId(item.state) == opts.condition);\n                }\n            },\n            {\n                condition: options.onlyUniqueNPA,\n                filterFn: function (item, opts) {\n                    if (uniqueNPAs.indexOf(item.npa) == -1) {\n                        uniqueNPAs.push(item.npa);\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n        ]);\n    };\n    Location.prototype.comparator = function (options) {\n        options = this.utils.extend({\n            sortBy: 'npa'\n        }, options);\n        if (options.sortBy == 'nxx') {\n            options.extractFn = function (item) {\n                return (parseInt(item.npa) * 1000000) + parseInt(item.nxx);\n            };\n            options.compareFn = this.list.numberComparator;\n        }\n        return this.list.comparator(options);\n    };\n    return Location;\n})(helper.Helper);\nexports.Location = Location;\nfunction $get(context) {\n    return context.createSingleton('Location', function () {\n        return new Location(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar validator = __webpack_require__(17);\nvar subscription = __webpack_require__(15);\nvar platform = __webpack_require__(14);\nvar contact = __webpack_require__(21);\nvar Message = (function (_super) {\n    __extends(Message, _super);\n    function Message(context) {\n        _super.call(this, context);\n        this.contact = contact.$get(context);\n        this.list = list.$get(context);\n        this.platform = platform.$get(context);\n        this.validator = validator.$get(context);\n    }\n    /**\n     *\n     * @exceptionalCase Different endpoint when creating SMS/Pager\n     */\n    Message.prototype.createUrl = function (options, id) {\n        options = options || {};\n        var root = '/account/~/extension/' + (options.extensionId || '~');\n        if (options.fax)\n            return root + '/fax';\n        if (options.sms)\n            return root + '/sms';\n        if (options.pager)\n            return root + '/company-pager';\n        if (options.sync)\n            return root + '/message-sync';\n        return root + '/message-store' + (id ? '/' + id : '');\n    };\n    Message.prototype.isInbound = function (message) {\n        return (message && message.direction == 'Inbound');\n    };\n    Message.prototype.isOutbound = function (message) {\n        return !this.isInbound(message);\n    };\n    Message.prototype.isSMS = function (message) {\n        return (message && message.type == 'SMS');\n    };\n    Message.prototype.isPager = function (message) {\n        return (message && message.type == 'Pager');\n    };\n    Message.prototype.isVoiceMail = function (message) {\n        return (message && message.type == 'VoiceMail');\n    };\n    Message.prototype.isFax = function (message) {\n        return (message && message.type == 'Fax');\n    };\n    Message.prototype.isAlive = function (message) {\n        //return (this.availability != 'Deleted' && this.availability != 'Purged');\n        return (message && message.availability == 'Alive');\n    };\n    Message.prototype.isRead = function (message) {\n        return (message.readStatus == 'Read');\n    };\n    Message.prototype.setIsRead = function (message, isRead) {\n        message.readStatus = (!!isRead) ? 'Read' : 'Unread';\n        return message;\n    };\n    Message.prototype.getAttachmentUrl = function (message, i) {\n        return message.attachments[i] ? this.platform.apiUrl(message.attachments[i].uri, {\n            addMethod: 'GET',\n            addServer: true,\n            addToken: true\n        }) : '';\n    };\n    Message.prototype.getAttachmentContentType = function (message, i) {\n        return message.attachments[i] ? message.attachments[i].contentType : '';\n    };\n    Message.prototype.getSubscription = function (options) {\n        return subscription.$get(this.context).setEvents([this.createUrl(options)]);\n    };\n    /**\n     * Returns from-phones if inbound (oterwise to-phones)\n     */\n    Message.prototype.getCallerInfos = function (message) {\n        return this.isInbound(message) ? [message.from] : message.to;\n    };\n    /**\n     * Returns first from-phones if inbound (oterwise to-phones), then vice-versa\n     */\n    Message.prototype.getAllCallerInfos = function (message) {\n        return this.getCallerInfos(message).concat(this.isInbound(message) ? message.to : [message.from]);\n    };\n    /**\n     * TODO Compare as dates\n     */\n    Message.prototype.comparator = function (options) {\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'creationTime'\n        }, options));\n    };\n    Message.prototype.filter = function (options) {\n        options = this.utils.extend({\n            search: '',\n            alive: true,\n            direction: '',\n            conversationId: '',\n            readStatus: ''\n        }, options);\n        return this.list.filter([\n            { condition: options.alive, filterFn: this.isAlive },\n            { filterBy: 'type', condition: options.type },\n            { filterBy: 'direction', condition: options.direction },\n            { filterBy: 'conversationId', condition: options.conversationId },\n            { filterBy: 'readStatus', condition: options.readStatus },\n            { filterBy: 'subject', condition: options.search, filterFn: this.list.containsFilter }\n        ]);\n    };\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all callerInfos found in all messages\n     * Warning, this function may be performance-consuming, reduce the amount of items passed to contacts and messages\n     */\n    Message.prototype.attachContacts = function (contacts, messages, options) {\n        var self = this;\n        // Flatten all caller infos from all messages\n        var callerInfos = messages.reduce(function (callerInfos, message) {\n            return callerInfos.concat(self.getAllCallerInfos(message));\n        }, []);\n        this.contact.attachToCallerInfos(callerInfos, contacts, options);\n    };\n    Message.prototype.shorten = function (message) {\n        return {\n            from: message.from,\n            to: message.to,\n            text: message.subject\n        };\n    };\n    Message.prototype.validateSMS = function (item) {\n        return this.validator.validate([\n            { field: 'to', validator: this.validator.required(this.utils.getProperty(item, 'to[0].phoneNumber')) },\n            { field: 'from', validator: this.validator.required(this.utils.getProperty(item, 'from.phoneNumber')) },\n            { field: 'subject', validator: this.validator.required(this.utils.getProperty(item, 'subject')) },\n            { field: 'subject', validator: this.validator.length(this.utils.getProperty(item, 'subject'), 160) }\n        ]);\n    };\n    Message.prototype.validatePager = function (item) {\n        return this.validator.validate([\n            { field: 'to', validator: this.validator.required(this.utils.getProperty(item, 'to.extensionNumber')) },\n            { field: 'from', validator: this.validator.required(this.utils.getProperty(item, 'from.extensionNumber')) },\n            { field: 'subject', validator: this.validator.required(this.utils.getProperty(item, 'subject')) },\n            { field: 'subject', validator: this.validator.length(this.utils.getProperty(item, 'subject'), 160) }\n        ]);\n    };\n    return Message;\n})(helper.Helper);\nexports.Message = Message;\nfunction $get(context) {\n    return context.createSingleton('Message', function () {\n        return new Message(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar extension = __webpack_require__(27);\nvar PhoneNumber = (function (_super) {\n    __extends(PhoneNumber, _super);\n    function PhoneNumber(context) {\n        _super.call(this, context);\n        this.extension = extension.$get(context);\n        this.list = list.$get(context);\n    }\n    PhoneNumber.prototype.createUrl = function (options, id) {\n        options = options || {};\n        if (options.lookup)\n            return '/number-pool/lookup';\n        return '/account/~' + (options.extensionId ? '/extension/' + options.extensionId : '') + '/phone-number' + (id ? '/' + id : '');\n    };\n    PhoneNumber.prototype.isSMS = function (phoneNumber) {\n        return this.hasFeature(phoneNumber, 'SmsSender');\n    };\n    PhoneNumber.prototype.hasFeature = function (phoneNumber, feature) {\n        return (!!phoneNumber.features && phoneNumber.features.indexOf(feature) != -1);\n    };\n    PhoneNumber.prototype.reserve = function (phoneNumber, date) {\n        phoneNumber.reservedTill = new Date(date).toISOString();\n    };\n    PhoneNumber.prototype.unreserve = function (phoneNumber) {\n        phoneNumber.reservedTill = null;\n    };\n    PhoneNumber.prototype.comparator = function (options) {\n        return this.list.comparator(this.utils.extend({\n            extractFn: function (item) {\n                return item.usageType + '-' + item.paymentType + '-' + item.type;\n            }\n        }, options));\n    };\n    /**\n     * TODO Add other filtering methods http://jira.ringcentral.com/browse/SDK-5\n     */\n    PhoneNumber.prototype.filter = function (options) {\n        var _this = this;\n        options = this.utils.extend({\n            usageType: '',\n            paymentType: '',\n            type: '',\n            features: []\n        }, options);\n        return this.list.filter([\n            { filterBy: 'usageType', condition: options.usageType },\n            { filterBy: 'paymentType', condition: options.paymentType },\n            { filterBy: 'type', condition: options.type },\n            {\n                condition: options.features.length,\n                filterFn: function (item) {\n                    return options.features.some(function (feature) {\n                        return _this.hasFeature(item, feature);\n                    });\n                }\n            }\n        ]);\n    };\n    return PhoneNumber;\n})(helper.Helper);\nexports.PhoneNumber = PhoneNumber;\nfunction $get(context) {\n    return context.createSingleton('PhoneNumber', function () {\n        return new PhoneNumber(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar subscription = __webpack_require__(15);\nvar extension = __webpack_require__(27);\nvar Presence = (function (_super) {\n    __extends(Presence, _super);\n    function Presence(context) {\n        _super.call(this, context);\n        this.extension = extension.$get(context);\n    }\n    Presence.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (id || '~') + '/presence' + (options.detailed ? '?detailedTelephonyState=true' : '');\n    };\n    Presence.prototype.getId = function (presence) {\n        return presence && (this.extension.getId(presence.extension) || presence.extensionId);\n    };\n    Presence.prototype.isAvailable = function (presence) {\n        return presence && presence.presenceStatus == 'Available';\n    };\n    Presence.prototype.getSubscription = function (options, id) {\n        return subscription.$get(this.context).setEvents([this.createUrl(options, id)]);\n    };\n    Presence.prototype.updateSubscription = function (subscription, presences, options) {\n        var _this = this;\n        var events = presences.map(this.getId, this).map(function (id) {\n            return _this.createUrl(options, id);\n        }, this);\n        subscription.addEvents(events);\n        return subscription;\n    };\n    Presence.prototype.attachToExtensions = function (extensions, presences, merge) {\n        var _this = this;\n        var index = this.index(presences);\n        extensions.forEach(function (ex) {\n            var presence = index[_this.extension.getId(ex)];\n            if (presence) {\n                if ('presence' in ex && merge) {\n                    _this.utils.extend(ex.presence, presence);\n                }\n                else {\n                    ex.presence = presence;\n                }\n            }\n        }, this);\n        return this;\n    };\n    Presence.prototype.isCallInProgress = function (presenceCall) {\n        return (presenceCall && presenceCall.telephonyStatus != 'NoCall');\n    };\n    return Presence;\n})(helper.Helper);\nexports.Presence = Presence;\nfunction $get(context) {\n    return context.createSingleton('Presence', function () {\n        return new Presence(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar validator = __webpack_require__(17);\nvar Ringout = (function (_super) {\n    __extends(Ringout, _super);\n    function Ringout(context) {\n        _super.call(this, context);\n        this.validator = validator.$get(context);\n    }\n    Ringout.prototype.createUrl = function (options, id) {\n        options = options || {};\n        return '/account/~/extension/' + (options.extensionId || '~') + '/ringout' + (id ? '/' + id : '');\n    };\n    Ringout.prototype.resetAsNew = function (object) {\n        object = _super.prototype.resetAsNew.call(this, object);\n        if (object) {\n            delete object.status;\n        }\n        return object;\n    };\n    Ringout.prototype.isInProgress = function (ringout) {\n        return ringout && !this.isNew(ringout) && ringout.status && ringout.status.callStatus == 'InProgress';\n    };\n    Ringout.prototype.isSuccess = function (ringout) {\n        return ringout && !this.isNew(ringout) && ringout.status && ringout.status.callStatus == 'Success';\n    };\n    Ringout.prototype.isError = function (ringout) {\n        return !this.isNew(ringout) && !this.isInProgress(ringout) && !this.isSuccess(ringout);\n    };\n    Ringout.prototype.validate = function (item) {\n        return this.validator.validate([\n            { field: 'to', validator: this.validator.required(item && item.to && item.to.phoneNumber) },\n            { field: 'from', validator: this.validator.required(item && item.from && item.from.phoneNumber) }\n        ]);\n    };\n    return Ringout;\n})(helper.Helper);\nexports.Ringout = Ringout;\nfunction $get(context) {\n    return context.createSingleton('Ringout', function () {\n        return new Ringout(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar Service = (function (_super) {\n    __extends(Service, _super);\n    function Service() {\n        _super.apply(this, arguments);\n        this.isSmsEnabled = this.isServiceFeatureEnabledMethod('SMS');\n        this.isSmsReceivingEnabled = this.isServiceFeatureEnabledMethod('SMSReceiving');\n        this.isPresenceEnabled = this.isServiceFeatureEnabledMethod('Presence');\n        this.isRingOutEnabled = this.isServiceFeatureEnabledMethod('RingOut');\n        this.isInternationalCallingEnabled = this.isServiceFeatureEnabledMethod('InternationalCalling');\n        this.isDndEnabled = this.isServiceFeatureEnabledMethod('DND');\n        this.isFaxEnabled = this.isServiceFeatureEnabledMethod('Fax');\n        this.isFaxReceivingEnabled = this.isServiceFeatureEnabledMethod('FaxReceiving');\n        this.isVoicemailEnabled = this.isServiceFeatureEnabledMethod('Voicemail');\n        this.isPagerEnabled = this.isServiceFeatureEnabledMethod('Pager');\n        this.isPagerReceivingEnabled = this.isServiceFeatureEnabledMethod('PagerReceiving');\n        this.isVoipCallingEnabled = this.isServiceFeatureEnabledMethod('VoipCalling');\n        this.isVideoConferencingEnabled = this.isServiceFeatureEnabledMethod('VideoConferencing');\n        this.isSalesForceEnabled = this.isServiceFeatureEnabledMethod('SalesForce');\n        this.isIntercomEnabled = this.isServiceFeatureEnabledMethod('Intercom');\n        this.isPagingEnabled = this.isServiceFeatureEnabledMethod('Paging');\n        this.isConferencingEnabled = this.isServiceFeatureEnabledMethod('Conferencing');\n        this.isFreeSoftPhoneLinesEnabled = this.isServiceFeatureEnabledMethod('FreeSoftPhoneLines');\n        this.isHipaaComplianceEnabled = this.isServiceFeatureEnabledMethod('HipaaCompliance');\n        this.isCallParkEnabled = this.isServiceFeatureEnabledMethod('CallPark');\n        this.isOnDemandCallRecordingEnabled = this.isServiceFeatureEnabledMethod('OnDemandCallRecording');\n    }\n    Service.prototype.createUrl = function () {\n        return '/account/~/service-info';\n    };\n    Service.prototype.isEnabled = function (feature, serviceFeatures) {\n        return serviceFeatures.reduce(function (value, f) {\n            if (f.featureName == feature)\n                value = f.enabled;\n            return value;\n        }, false);\n    };\n    Service.prototype.isServiceFeatureEnabledMethod = function (feature) {\n        var _this = this;\n        return function (serviceFeatures) {\n            return _this.isEnabled(feature, serviceFeatures);\n        };\n    };\n    return Service;\n})(helper.Helper);\nexports.Service = Service;\nfunction $get(context) {\n    return context.createSingleton('Service', function () {\n        return new Service(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar ShippingMethod = (function (_super) {\n    __extends(ShippingMethod, _super);\n    function ShippingMethod() {\n        _super.apply(this, arguments);\n    }\n    /**\n     * TODO Add or describe options http://jira.ringcentral.com/browse/SDK-3 id done\n     */\n    ShippingMethod.prototype.createUrl = function () {\n        return '/dictionary/shipping-options';\n    };\n    return ShippingMethod;\n})(helper.Helper);\nexports.ShippingMethod = ShippingMethod;\nfunction $get(context) {\n    return context.createSingleton('ShippingMethod', function () {\n        return new ShippingMethod(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar list = __webpack_require__(10);\nvar country = __webpack_require__(24);\nvar State = (function (_super) {\n    __extends(State, _super);\n    function State(context) {\n        _super.call(this, context);\n        this.countryHelper = country.$get(context);\n        this.list = list.$get(context);\n    }\n    State.prototype.createUrl = function () {\n        return '/dictionary/state';\n    };\n    State.prototype.filter = function (options) {\n        var _this = this;\n        options = this.utils.extend({\n            countryId: ''\n        }, options);\n        return this.list.filter([\n            {\n                condition: options.countryId,\n                filterFn: function (item, opts) {\n                    return (_this.countryHelper.getId(item.country) == opts.condition);\n                }\n            }\n        ]);\n    };\n    return State;\n})(helper.Helper);\nexports.State = State;\nfunction $get(context) {\n    return context.createSingleton('State', function () {\n        return new State(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar helper = __webpack_require__(9);\nvar Timezone = (function (_super) {\n    __extends(Timezone, _super);\n    function Timezone() {\n        _super.apply(this, arguments);\n    }\n    Timezone.prototype.createUrl = function () {\n        return '/dictionary/timezone';\n    };\n    return Timezone;\n})(helper.Helper);\nexports.Timezone = Timezone;\nfunction $get(context) {\n    return context.createSingleton('Timezone', function () {\n        return new Timezone(context);\n    });\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module) {// Version: 3.7.10\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     JSON     =============================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\n(window['JSON'] && window['JSON']['stringify']) || (function () {\n    window['JSON'] || (window['JSON'] = {});\n\n    function toJSON(key) {\n        try      { return this.valueOf() }\n        catch(e) { return null }\n    }\n\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        gap,\n        indent,\n        meta = {    // table of character substitutions\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"' : '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        },\n        rep;\n\n    function quote(string) {\n        escapable.lastIndex = 0;\n        return escapable.test(string) ?\n            '\"' + string.replace(escapable, function (a) {\n                var c = meta[a];\n                return typeof c === 'string' ? c :\n                    '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + '\"' :\n            '\"' + string + '\"';\n    }\n\n    function str(key, holder) {\n        var i,          // The loop counter.\n            k,          // The member key.\n            v,          // The member value.\n            length,\n            partial,\n            mind  = gap,\n            value = holder[key];\n\n        if (value && typeof value === 'object') {\n            value = toJSON.call( value, key );\n        }\n\n        if (typeof rep === 'function') {\n            value = rep.call(holder, key, value);\n        }\n\n        switch (typeof value) {\n        case 'string':\n            return quote(value);\n\n        case 'number':\n            return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n            return String(value);\n\n        case 'object':\n\n            if (!value) {\n                return 'null';\n            }\n\n            gap += indent;\n            partial = [];\n\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n\n                v = partial.length === 0 ? '[]' :\n                    gap ? '[\\n' + gap +\n                            partial.join(',\\n' + gap) + '\\n' +\n                                mind + ']' :\n                          '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    k = rep[i];\n                    if (typeof k === 'string') {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            } else {\n                for (k in value) {\n                    if (Object.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n\n            v = partial.length === 0 ? '{}' :\n                gap ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' +\n                        mind + '}' : '{' + partial.join(',') + '}';\n            gap = mind;\n            return v;\n        }\n    }\n\n    if (typeof JSON['stringify'] !== 'function') {\n        JSON['stringify'] = function (value, replacer, space) {\n            var i;\n            gap = '';\n            indent = '';\n\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n            } else if (typeof space === 'string') {\n                indent = space;\n            }\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                    (typeof replacer !== 'object' ||\n                     typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n            return str('', {'': value});\n        };\n    }\n\n    if (typeof JSON['parse'] !== 'function') {\n        // JSON is parsed on the server for security.\n        JSON['parse'] = function (text) {return eval('('+text+')')};\n    }\n}());\nvar NOW             = 1\n,   READY           = false\n,   READY_BUFFER    = []\n,   PRESENCE_SUFFIX = '-pnpres'\n,   DEF_WINDOWING   = 10     // MILLISECONDS.\n,   DEF_TIMEOUT     = 10000  // MILLISECONDS.\n,   DEF_SUB_TIMEOUT = 310    // SECONDS.\n,   DEF_KEEPALIVE   = 60     // SECONDS (FOR TIMESYNC).\n,   SECOND          = 1000   // A THOUSAND MILLISECONDS.\n,   URLBIT          = '/'\n,   PARAMSBIT       = '&'\n,   PRESENCE_HB_THRESHOLD = 5\n,   PRESENCE_HB_DEFAULT  = 30\n,   SDK_VER         = '3.7.10'\n,   REPL            = /{([\\w\\-]+)}/g;\n\n/**\n * UTILITIES\n */\nfunction unique() { return'x'+ ++NOW+''+(+new Date) }\nfunction rnow()   { return+new Date }\n\n/**\n * NEXTORIGIN\n * ==========\n * var next_origin = nextorigin();\n */\nvar nextorigin = (function() {\n    var max = 20\n    ,   ori = Math.floor(Math.random() * max);\n    return function( origin, failover ) {\n        return origin.indexOf('pubsub.') > 0\n            && origin.replace(\n             'pubsub', 'ps' + (\n                failover ? generate_uuid().split('-')[0] :\n                (++ori < max? ori : ori=1)\n            ) ) || origin;\n    }\n})();\n\n\n/**\n * Build Url\n * =======\n *\n */\nfunction build_url( url_components, url_params ) {\n    var url    = url_components.join(URLBIT)\n    ,   params = [];\n\n    if (!url_params) return url;\n\n    each( url_params, function( key, value ) {\n        var value_str = (typeof value == 'object')?JSON['stringify'](value):value;\n        (typeof value != 'undefined' &&\n            value != null && encode(value_str).length > 0\n        ) && params.push(key + \"=\" + encode(value_str));\n    } );\n\n    url += \"?\" + params.join(PARAMSBIT);\n    return url;\n}\n\n/**\n * UPDATER\n * =======\n * var timestamp = unique();\n */\nfunction updater( fun, rate ) {\n    var timeout\n    ,   last   = 0\n    ,   runnit = function() {\n        if (last + rate > rnow()) {\n            clearTimeout(timeout);\n            timeout = setTimeout( runnit, rate );\n        }\n        else {\n            last = rnow();\n            fun();\n        }\n    };\n\n    return runnit;\n}\n\n/**\n * GREP\n * ====\n * var list = grep( [1,2,3], function(item) { return item % 2 } )\n */\nfunction grep( list, fun ) {\n    var fin = [];\n    each( list || [], function(l) { fun(l) && fin.push(l) } );\n    return fin\n}\n\n/**\n * SUPPLANT\n * ========\n * var text = supplant( 'Hello {name}!', { name : 'John' } )\n */\nfunction supplant( str, values ) {\n    return str.replace( REPL, function( _, match ) {\n        return values[match] || _\n    } );\n}\n\n/**\n * timeout\n * =======\n * timeout( function(){}, 100 );\n */\nfunction timeout( fun, wait ) {\n    return setTimeout( fun, wait );\n}\n\n/**\n * uuid\n * ====\n * var my_uuid = generate_uuid();\n */\nfunction generate_uuid(callback) {\n    var u = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,\n    function(c) {\n        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n        return v.toString(16);\n    });\n    if (callback) callback(u);\n    return u;\n}\n\nfunction isArray(arg) {\n  return !!arg && typeof arg !== 'string' && (Array.isArray && Array.isArray(arg) || typeof(arg.length) === \"number\")\n  //return !!arg && (Array.isArray && Array.isArray(arg) || typeof(arg.length) === \"number\")\n}\n\n/**\n * EACH\n * ====\n * each( [1,2,3], function(item) { } )\n */\nfunction each( o, f) {\n    if ( !o || !f ) return;\n\n    if ( isArray(o) )\n        for ( var i = 0, l = o.length; i < l; )\n            f.call( o[i], o[i], i++ );\n    else\n        for ( var i in o )\n            o.hasOwnProperty    &&\n            o.hasOwnProperty(i) &&\n            f.call( o[i], i, o[i] );\n}\n\n/**\n * MAP\n * ===\n * var list = map( [1,2,3], function(item) { return item + 1 } )\n */\nfunction map( list, fun ) {\n    var fin = [];\n    each( list || [], function( k, v ) { fin.push(fun( k, v )) } );\n    return fin;\n}\n\n\nfunction pam_encode(str) {\n  return encodeURIComponent(str).replace(/[!'()*~]/g, function(c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase();\n  });\n}\n\n/**\n * ENCODE\n * ======\n * var encoded_data = encode('path');\n */\nfunction encode(path) { return encodeURIComponent(path) }\n\n/**\n * Generate Subscription Channel List\n * ==================================\n * generate_channel_list(channels_object);\n */\nfunction generate_channel_list(channels, nopresence) {\n    var list = [];\n    each( channels, function( channel, status ) {\n        if (nopresence) {\n            if(channel.search('-pnpres') < 0) {\n                if (status.subscribed) list.push(channel);\n            }\n        } else {\n            if (status.subscribed) list.push(channel);\n        }\n    });\n    return list.sort();\n}\n\n/**\n * Generate Subscription Channel Groups List\n * ==================================\n * generate_channel_group_list(channels_groups object);\n */\nfunction generate_channel_group_list(channel_groups, nopresence) {\n    var list = [];\n    each(channel_groups, function( channel_group, status ) {\n        if (nopresence) {\n            if(channel_group.search('-pnpres') < 0) {\n                if (status.subscribed) list.push(channel_group);\n            }\n        } else {\n            if (status.subscribed) list.push(channel_group);\n        }\n    });\n    return list.sort();\n}\n\n// PUBNUB READY TO CONNECT\nfunction ready() { timeout( function() {\n    if (READY) return;\n    READY = 1;\n    each( READY_BUFFER, function(connect) { connect() } );\n}, SECOND ); }\n\nfunction PNmessage(args) {\n    msg = args || {'apns' : {}},\n    msg['getPubnubMessage'] = function() {\n        var m = {};\n\n        if (Object.keys(msg['apns']).length) {\n            m['pn_apns'] = {\n                    'aps' : {\n                        'alert' : msg['apns']['alert'] ,\n                        'badge' : msg['apns']['badge']\n                    }\n            }\n            for (var k in msg['apns']) {\n                m['pn_apns'][k] = msg['apns'][k];\n            }\n            var exclude1 = ['badge','alert'];\n            for (var k in exclude1) {\n                delete m['pn_apns'][exclude1[k]];\n            }\n        }\n\n\n\n        if (msg['gcm']) {\n            m['pn_gcm'] = {\n                'data' : msg['gcm']\n            }\n        }\n\n        for (var k in msg) {\n            m[k] = msg[k];\n        }\n        var exclude = ['apns','gcm','publish', 'channel','callback','error'];\n        for (var k in exclude) {\n            delete m[exclude[k]];\n        }\n\n        return m;\n    };\n    msg['publish'] = function() {\n\n        var m = msg.getPubnubMessage();\n\n        if (msg['pubnub'] && msg['channel']) {\n            msg['pubnub'].publish({\n                'message' : m,\n                'channel' : msg['channel'],\n                'callback' : msg['callback'],\n                'error' : msg['error']\n            })\n        }\n    };\n    return msg;\n}\n\nfunction PN_API(setup) {\n    var SUB_WINDOWING =  +setup['windowing']   || DEF_WINDOWING\n    ,   SUB_TIMEOUT   = (+setup['timeout']     || DEF_SUB_TIMEOUT) * SECOND\n    ,   KEEPALIVE     = (+setup['keepalive']   || DEF_KEEPALIVE)   * SECOND\n    ,   TIME_CHECK    = setup['timecheck']     || 0\n    ,   NOLEAVE       = setup['noleave']       || 0\n    ,   PUBLISH_KEY   = setup['publish_key']   || 'demo'\n    ,   SUBSCRIBE_KEY = setup['subscribe_key'] || 'demo'\n    ,   AUTH_KEY      = setup['auth_key']      || ''\n    ,   SECRET_KEY    = setup['secret_key']    || ''\n    ,   hmac_SHA256   = setup['hmac_SHA256']\n    ,   SSL           = setup['ssl']            ? 's' : ''\n    ,   ORIGIN        = 'http'+SSL+'://'+(setup['origin']||'pubsub.pubnub.com')\n    ,   STD_ORIGIN    = nextorigin(ORIGIN)\n    ,   SUB_ORIGIN    = nextorigin(ORIGIN)\n    ,   CONNECT       = function(){}\n    ,   PUB_QUEUE     = []\n    ,   CLOAK         = true\n    ,   TIME_DRIFT    = 0\n    ,   SUB_CALLBACK  = 0\n    ,   SUB_CHANNEL   = 0\n    ,   SUB_RECEIVER  = 0\n    ,   SUB_RESTORE   = setup['restore'] || 0\n    ,   SUB_BUFF_WAIT = 0\n    ,   TIMETOKEN     = 0\n    ,   RESUMED       = false\n    ,   CHANNELS      = {}\n    ,   CHANNEL_GROUPS       = {}\n    ,   SUB_ERROR     = function(){}\n    ,   STATE         = {}\n    ,   PRESENCE_HB_TIMEOUT  = null\n    ,   PRESENCE_HB          = validate_presence_heartbeat(\n        setup['heartbeat'] || setup['pnexpires'] || 0, setup['error']\n    )\n    ,   PRESENCE_HB_INTERVAL = setup['heartbeat_interval'] || (PRESENCE_HB / 2) -1\n    ,   PRESENCE_HB_RUNNING  = false\n    ,   NO_WAIT_FOR_PENDING  = setup['no_wait_for_pending']\n    ,   COMPATIBLE_35 = setup['compatible_3.5']  || false\n    ,   xdr           = setup['xdr']\n    ,   params        = setup['params'] || {}\n    ,   error         = setup['error']      || function() {}\n    ,   _is_online    = setup['_is_online'] || function() { return 1 }\n    ,   jsonp_cb      = setup['jsonp_cb']   || function() { return 0 }\n    ,   db            = setup['db']         || {'get': function(){}, 'set': function(){}}\n    ,   CIPHER_KEY    = setup['cipher_key']\n    ,   UUID          = setup['uuid'] || ( !setup['unique_uuid'] && db && db['get'](SUBSCRIBE_KEY+'uuid') || '')\n    ,   USE_INSTANCEID = setup['instance_id'] || false\n    ,   INSTANCEID     = ''\n    ,   _poll_timer\n    ,   _poll_timer2;\n\n    if (PRESENCE_HB === 2) PRESENCE_HB_INTERVAL = 1;\n\n    var crypto_obj    = setup['crypto_obj'] ||\n        {\n            'encrypt' : function(a,key){ return a},\n            'decrypt' : function(b,key){return b}\n        };\n\n    function _get_url_params(data) {\n        if (!data) data = {};\n        each( params , function( key, value ) {\n            if (!(key in data)) data[key] = value;\n        });\n        return data;\n    }\n\n    function _object_to_key_list(o) {\n        var l = []\n        each( o , function( key, value ) {\n            l.push(key);\n        });\n        return l;\n    }\n    function _object_to_key_list_sorted(o) {\n        return _object_to_key_list(o).sort();\n    }\n\n    function _get_pam_sign_input_from_params(params) {\n        var si = \"\";\n        var l = _object_to_key_list_sorted(params);\n\n        for (var i in l) {\n            var k = l[i]\n            si += k + \"=\" + pam_encode(params[k]) ;\n            if (i != l.length - 1) si += \"&\"\n        }\n        return si;\n    }\n\n    function validate_presence_heartbeat(heartbeat, cur_heartbeat, error) {\n        var err = false;\n\n        if (typeof heartbeat === 'undefined') {\n            return cur_heartbeat;\n        }\n\n        if (typeof heartbeat === 'number') {\n            if (heartbeat > PRESENCE_HB_THRESHOLD || heartbeat == 0)\n                err = false;\n            else\n                err = true;\n        } else if(typeof heartbeat === 'boolean'){\n            if (!heartbeat) {\n                return 0;\n            } else {\n                return PRESENCE_HB_DEFAULT;\n            }\n        } else {\n            err = true;\n        }\n\n        if (err) {\n            error && error(\"Presence Heartbeat value invalid. Valid range ( x > \" + PRESENCE_HB_THRESHOLD + \" or x = 0). Current Value : \" + (cur_heartbeat || PRESENCE_HB_THRESHOLD));\n            return cur_heartbeat || PRESENCE_HB_THRESHOLD;\n        } else return heartbeat;\n    }\n\n    function encrypt(input, key) {\n        return crypto_obj['encrypt'](input, key || CIPHER_KEY) || input;\n    }\n    function decrypt(input, key) {\n        return crypto_obj['decrypt'](input, key || CIPHER_KEY) ||\n               crypto_obj['decrypt'](input, CIPHER_KEY) ||\n               input;\n    }\n\n    function error_common(message, callback) {\n        callback && callback({ 'error' : message || \"error occurred\"});\n        error && error(message);\n    }\n    function _presence_heartbeat() {\n\n        clearTimeout(PRESENCE_HB_TIMEOUT);\n\n        if (!PRESENCE_HB_INTERVAL || PRESENCE_HB_INTERVAL >= 500 ||\n            PRESENCE_HB_INTERVAL < 1 ||\n            (!generate_channel_list(CHANNELS,true).length  && !generate_channel_group_list(CHANNEL_GROUPS, true).length ) )\n        {\n            PRESENCE_HB_RUNNING = false;\n            return;\n        }\n\n        PRESENCE_HB_RUNNING = true;\n        SELF['presence_heartbeat']({\n            'callback' : function(r) {\n                PRESENCE_HB_TIMEOUT = timeout( _presence_heartbeat, (PRESENCE_HB_INTERVAL) * SECOND );\n            },\n            'error' : function(e) {\n                error && error(\"Presence Heartbeat unable to reach Pubnub servers.\" + JSON.stringify(e));\n                PRESENCE_HB_TIMEOUT = timeout( _presence_heartbeat, (PRESENCE_HB_INTERVAL) * SECOND );\n            }\n        });\n    }\n\n    function start_presence_heartbeat() {\n        !PRESENCE_HB_RUNNING && _presence_heartbeat();\n    }\n\n    function publish(next) {\n\n        if (NO_WAIT_FOR_PENDING) {\n            if (!PUB_QUEUE.length) return;\n        } else {\n            if (next) PUB_QUEUE.sending = 0;\n            if ( PUB_QUEUE.sending || !PUB_QUEUE.length ) return;\n            PUB_QUEUE.sending = 1;\n        }\n\n        xdr(PUB_QUEUE.shift());\n    }\n    function each_channel_group(callback) {\n        var count = 0;\n\n        each( generate_channel_group_list(CHANNEL_GROUPS), function(channel_group) {\n            var chang = CHANNEL_GROUPS[channel_group];\n\n            if (!chang) return;\n\n            count++;\n            (callback||function(){})(chang);\n        } );\n\n        return count;\n    }\n\n    function each_channel(callback) {\n        var count = 0;\n\n        each( generate_channel_list(CHANNELS), function(channel) {\n            var chan = CHANNELS[channel];\n\n            if (!chan) return;\n\n            count++;\n            (callback||function(){})(chan);\n        } );\n\n        return count;\n    }\n    function _invoke_callback(response, callback, err) {\n        if (typeof response == 'object') {\n            if (response['error']) {\n                var callback_data = {};\n\n                if (response['message']) {\n                    callback_data['message'] = response['message'];\n                }\n\n                if (response['payload']) {\n                    callback_data['payload'] = response['payload'];\n                }\n\n                err && err(callback_data);\n                return;\n\n            }\n            if (response['payload']) {\n                if (response['next_page'])\n                    callback && callback(response['payload'], response['next_page']);\n                else\n                    callback && callback(response['payload']);\n                return;\n            }\n        }\n        callback && callback(response);\n    }\n\n    function _invoke_error(response,err) {\n\n        if (typeof response == 'object' && response['error']) {\n                var callback_data = {};\n\n                if (response['message']) {\n                    callback_data['message'] = response['message'];\n                }\n\n                if (response['payload']) {\n                    callback_data['payload'] = response['payload'];\n                }\n                \n                err && err(callback_data);\n                return;\n        } else {\n            err && err(response);\n        }\n    }\n    function CR(args, callback, url1, data) {\n            var callback        = args['callback']      || callback\n            ,   err             = args['error']         || error\n            ,   jsonp           = jsonp_cb();\n\n            data = data || {};\n            \n            if (!data['auth']) {\n                data['auth'] = args['auth_key'] || AUTH_KEY;\n            }\n            \n            var url = [\n                    STD_ORIGIN, 'v1', 'channel-registration',\n                    'sub-key', SUBSCRIBE_KEY\n                ];\n\n            url.push.apply(url,url1);\n            \n            if (jsonp) data['callback']              = jsonp;\n            \n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n\n    }\n\n    // Announce Leave Event\n    var SELF = {\n        'LEAVE' : function( channel, blocking, auth_key, callback, error ) {\n\n            var data   = { 'uuid' : UUID, 'auth' : auth_key || AUTH_KEY }\n            ,   origin = nextorigin(ORIGIN)\n            ,   callback = callback || function(){}\n            ,   err      = error    || function(){}\n            ,   jsonp  = jsonp_cb();\n\n            // Prevent Leaving a Presence Channel\n            if (channel.indexOf(PRESENCE_SUFFIX) > 0) return true;\n\n            if (COMPATIBLE_35) {\n                if (!SSL)         return false;\n                if (jsonp == '0') return false;\n            }\n\n            if (NOLEAVE)  return false;\n\n            if (jsonp != '0') data['callback'] = jsonp;\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                blocking : blocking || SSL,\n                timeout  : 2000,\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    origin, 'v2', 'presence', 'sub_key',\n                    SUBSCRIBE_KEY, 'channel', encode(channel), 'leave'\n                ]\n            });\n            return true;\n        },\n        'LEAVE_GROUP' : function( channel_group, blocking, auth_key, callback, error ) {\n\n            var data   = { 'uuid' : UUID, 'auth' : auth_key || AUTH_KEY }\n            ,   origin = nextorigin(ORIGIN)\n            ,   callback = callback || function(){}\n            ,   err      = error    || function(){}\n            ,   jsonp  = jsonp_cb();\n\n            // Prevent Leaving a Presence Channel Group\n            if (channel_group.indexOf(PRESENCE_SUFFIX) > 0) return true;\n\n            if (COMPATIBLE_35) {\n                if (!SSL)         return false;\n                if (jsonp == '0') return false;\n            }\n\n            if (NOLEAVE)  return false;\n\n            if (jsonp != '0') data['callback'] = jsonp;\n\n            if (channel_group && channel_group.length > 0) data['channel-group'] = channel_group;\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                blocking : blocking || SSL,\n                timeout  : 5000,\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    origin, 'v2', 'presence', 'sub_key',\n                    SUBSCRIBE_KEY, 'channel', encode(','), 'leave'\n                ]\n            });\n            return true;\n        },\n        'set_resumed' : function(resumed) {\n                RESUMED = resumed;\n        },\n        'get_cipher_key' : function() {\n            return CIPHER_KEY;\n        },\n        'set_cipher_key' : function(key) {\n            CIPHER_KEY = key;\n        },\n        'raw_encrypt' : function(input, key) {\n            return encrypt(input, key);\n        },\n        'raw_decrypt' : function(input, key) {\n            return decrypt(input, key);\n        },\n        'get_heartbeat' : function() {\n            return PRESENCE_HB;\n        },\n        \n        'set_heartbeat' : function(heartbeat, heartbeat_interval) {\n            PRESENCE_HB = validate_presence_heartbeat(heartbeat, PRESENCE_HB, error);\n            PRESENCE_HB_INTERVAL = heartbeat_interval || (PRESENCE_HB / 2) - 1;\n            if (PRESENCE_HB == 2) {\n                PRESENCE_HB_INTERVAL = 1;\n            }\n            CONNECT();\n            _presence_heartbeat();\n        },\n        \n        'get_heartbeat_interval' : function() {\n            return PRESENCE_HB_INTERVAL;\n        },\n        \n        'set_heartbeat_interval' : function(heartbeat_interval) {\n            PRESENCE_HB_INTERVAL = heartbeat_interval;\n            _presence_heartbeat();\n        },\n        \n        'get_version' : function() {\n            return SDK_VER;\n        },\n        'getGcmMessageObject' : function(obj) {\n            return {\n                'data' : obj\n            }\n        },\n        'getApnsMessageObject' : function(obj) {\n            var x =  {\n                'aps' : { 'badge' : 1, 'alert' : ''}\n            }\n            for (k in obj) {\n                k[x] = obj[k];\n            }\n            return x;\n        },\n        'newPnMessage' : function() {\n            var x = {};\n            if (gcm) x['pn_gcm'] = gcm;\n            if (apns) x['pn_apns'] = apns;\n            for ( k in n ) {\n                x[k] = n[k];\n            }\n            return x;\n        },\n\n        '_add_param' : function(key,val) {\n            params[key] = val;\n        },\n\n        'channel_group' : function(args, callback) {\n            var ns_ch       = args['channel_group']\n            ,   callback    = callback         || args['callback']\n            ,   channels    = args['channels'] || args['channel']\n            ,   cloak       = args['cloak']\n            ,   namespace\n            ,   channel_group\n            ,   url = []\n            ,   data = {}\n            ,   mode = args['mode'] || 'add';\n\n\n            if (ns_ch) {\n                var ns_ch_a = ns_ch.split(':');\n\n                if (ns_ch_a.length > 1) {\n                    namespace = (ns_ch_a[0] === '*')?null:ns_ch_a[0];\n\n                    channel_group = ns_ch_a[1];\n                } else {\n                    channel_group = ns_ch_a[0];\n                }\n            }\n\n            namespace && url.push('namespace') && url.push(encode(namespace));\n\n            url.push('channel-group');\n\n            if (channel_group && channel_group !== '*') {\n                url.push(channel_group);\n            }\n\n            if (channels ) {\n                if (isArray(channels)) {\n                    channels = channels.join(',');\n                }\n                data[mode] = channels;\n                data['cloak'] = (CLOAK)?'true':'false';\n            } else {\n                if (mode === 'remove') url.push('remove');\n            }\n\n            if (typeof cloak != 'undefined') data['cloak'] = (cloak)?'true':'false';\n\n            CR(args, callback, url, data);\n        },\n\n        'channel_group_list_groups' : function(args, callback) {\n            var namespace;\n\n            namespace = args['namespace'] || args['ns'] || args['channel_group'] || null;\n            if (namespace) {\n                args[\"channel_group\"] = namespace + \":*\";\n            }\n\n            SELF['channel_group'](args, callback);\n        },\n\n        'channel_group_list_channels' : function(args, callback) {\n            if (!args['channel_group']) return error('Missing Channel Group');\n            SELF['channel_group'](args, callback);\n        },\n\n        'channel_group_remove_channel' : function(args, callback) {\n            if (!args['channel_group']) return error('Missing Channel Group');\n            if (!args['channel'] && !args['channels'] ) return error('Missing Channel');\n\n            args['mode'] = 'remove';\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_remove_group' : function(args, callback) {\n            if (!args['channel_group']) return error('Missing Channel Group');\n            if (args['channel']) return error('Use channel_group_remove_channel if you want to remove a channel from a group.');\n\n            args['mode'] = 'remove';\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_add_channel' : function(args, callback) {\n           if (!args['channel_group']) return error('Missing Channel Group');\n           if (!args['channel'] && !args['channels'] ) return error('Missing Channel');\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_cloak' : function(args, callback) {\n            if (typeof args['cloak'] == 'undefined') {\n                callback(CLOAK);\n                return;\n            }\n            CLOAK = args['cloak'];\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_list_namespaces' : function(args, callback) {\n            var url = ['namespace'];\n            CR(args, callback, url);\n        },\n        'channel_group_remove_namespace' : function(args, callback) {\n            var url = ['namespace',args['namespace'],'remove'];\n            CR(args, callback, url);\n        },\n\n        /*\n            PUBNUB.history({\n                channel  : 'my_chat_channel',\n                limit    : 100,\n                callback : function(history) { }\n            });\n        */\n        'history' : function( args, callback ) {\n            var callback         = args['callback'] || callback\n            ,   count            = args['count']    || args['limit'] || 100\n            ,   reverse          = args['reverse']  || \"false\"\n            ,   err              = args['error']    || function(){}\n            ,   auth_key         = args['auth_key'] || AUTH_KEY\n            ,   cipher_key       = args['cipher_key']\n            ,   channel          = args['channel']\n            ,   channel_group    = args['channel_group']\n            ,   start            = args['start']\n            ,   end              = args['end']\n            ,   include_token    = args['include_token']\n            ,   params           = {}\n            ,   jsonp            = jsonp_cb();\n\n            // Make sure we have a Channel\n            if (!channel && !channel_group) return error('Missing Channel');\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            params['stringtoken'] = 'true';\n            params['count']       = count;\n            params['reverse']     = reverse;\n            params['auth']        = auth_key;\n\n            if (channel_group) {\n                params['channel-group'] = channel_group;\n                if (!channel) {\n                    channel = ','; \n                }\n            }\n            if (jsonp) params['callback']              = jsonp;\n            if (start) params['start']                 = start;\n            if (end)   params['end']                   = end;\n            if (include_token) params['include_token'] = 'true';\n\n            // Send Message\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(params),\n                success  : function(response) {\n                    if (typeof response == 'object' && response['error']) {\n                        err({'message' : response['message'], 'payload' : response['payload']});\n                        return;\n                    }\n                    var messages = response[0];\n                    var decrypted_messages = [];\n                    for (var a = 0; a < messages.length; a++) {\n                        var new_message = decrypt(messages[a],cipher_key);\n                        try {\n                            decrypted_messages['push'](JSON['parse'](new_message));\n                        } catch (e) {\n                            decrypted_messages['push']((new_message));\n                        }\n                    }\n                    callback([decrypted_messages, response[1], response[2]]);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v2', 'history', 'sub-key',\n                    SUBSCRIBE_KEY, 'channel', encode(channel)\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.replay({\n                source      : 'my_channel',\n                destination : 'new_channel'\n            });\n        */\n        'replay' : function(args, callback) {\n            var callback    = callback || args['callback'] || function(){}\n            ,   auth_key    = args['auth_key'] || AUTH_KEY\n            ,   source      = args['source']\n            ,   destination = args['destination']\n            ,   stop        = args['stop']\n            ,   start       = args['start']\n            ,   end         = args['end']\n            ,   reverse     = args['reverse']\n            ,   limit       = args['limit']\n            ,   jsonp       = jsonp_cb()\n            ,   data        = {}\n            ,   url;\n\n            // Check User Input\n            if (!source)        return error('Missing Source Channel');\n            if (!destination)   return error('Missing Destination Channel');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            // Setup URL Params\n            if (jsonp != '0') data['callback'] = jsonp;\n            if (stop)         data['stop']     = 'all';\n            if (reverse)      data['reverse']  = 'true';\n            if (start)        data['start']    = start;\n            if (end)          data['end']      = end;\n            if (limit)        data['count']    = limit;\n\n            data['auth'] = auth_key;\n\n            // Compose URL Parts\n            url = [\n                STD_ORIGIN, 'v1', 'replay',\n                PUBLISH_KEY, SUBSCRIBE_KEY,\n                source, destination\n            ];\n\n            // Start (or Stop) Replay!\n            xdr({\n                callback : jsonp,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function() { callback([ 0, 'Disconnected' ]) },\n                url      : url,\n                data     : _get_url_params(data)\n            });\n        },\n\n        /*\n            PUBNUB.auth('AJFLKAJSDKLA');\n        */\n        'auth' : function(auth) {\n            AUTH_KEY = auth;\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.time(function(time){ });\n        */\n        'time' : function(callback) {\n            var jsonp = jsonp_cb();\n\n            var data = { 'uuid' : UUID, 'auth' : AUTH_KEY }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                timeout  : SECOND * 5,\n                url      : [STD_ORIGIN, 'time', jsonp],\n                success  : function(response) { callback(response[0]) },\n                fail     : function() { callback(0) }\n            });\n        },\n\n        /*\n            PUBNUB.publish({\n                channel : 'my_chat_channel',\n                message : 'hello!'\n            });\n        */\n        'publish' : function( args, callback ) {\n            var msg      = args['message'];\n            if (!msg) return error('Missing Message');\n\n            var callback = callback || args['callback'] || msg['callback'] || function(){}\n            ,   channel  = args['channel'] || msg['channel']\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   cipher_key = args['cipher_key']\n            ,   err      = args['error'] || msg['error'] || function() {}\n            ,   post     = args['post'] || false\n            ,   store    = ('store_in_history' in args) ? args['store_in_history']: true\n            ,   jsonp    = jsonp_cb()\n            ,   add_msg  = 'push'\n            ,   url;\n\n            if (args['prepend']) add_msg = 'unshift'\n\n            if (!channel)       return error('Missing Channel');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (msg['getPubnubMessage']) {\n                msg = msg['getPubnubMessage']();\n            }\n\n            // If trying to send Object\n            msg = JSON['stringify'](encrypt(msg, cipher_key));\n\n            // Create URL\n            url = [\n                STD_ORIGIN, 'publish',\n                PUBLISH_KEY, SUBSCRIBE_KEY,\n                0, encode(channel),\n                jsonp, encode(msg)\n            ];\n\n            params = { 'uuid' : UUID, 'auth' : auth_key }\n\n            if (!store) params['store'] =\"0\"\n\n            if (USE_INSTANCEID) params['instanceid'] = INSTANCEID;\n\n            // Queue Message Send\n            PUB_QUEUE[add_msg]({\n                callback : jsonp,\n                timeout  : SECOND * 5,\n                url      : url,\n                data     : _get_url_params(params),\n                fail     : function(response){\n                    _invoke_error(response, err);\n                    publish(1);\n                },\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                    publish(1);\n                },\n                mode     : (post)?'POST':'GET'\n            });\n\n            // Send Message\n            publish();\n        },\n\n        /*\n            PUBNUB.unsubscribe({ channel : 'my_chat' });\n        */\n        'unsubscribe' : function(args, callback) {\n            var channel       = args['channel']\n            ,   channel_group = args['channel_group']\n            ,   auth_key      = args['auth_key']    || AUTH_KEY\n            ,   callback      = callback            || args['callback'] || function(){}\n            ,   err           = args['error']       || function(){};\n\n            TIMETOKEN   = 0;\n            //SUB_RESTORE = 1;    REVISIT !!!!\n\n            if (channel) {\n                // Prepare Channel(s)\n                channel = map( (\n                    channel.join ? channel.join(',') : ''+channel\n                ).split(','), function(channel) {\n                    if (!CHANNELS[channel]) return;\n                    return channel + ',' + channel + PRESENCE_SUFFIX;\n                } ).join(',');\n\n                // Iterate over Channels\n                each( channel.split(','), function(ch) {\n                    var CB_CALLED = true;\n                    if (!ch) return;\n                    CHANNELS[ch] = 0;\n                    if (ch in STATE) delete STATE[ch];\n                    if (READY) {\n                        CB_CALLED = SELF['LEAVE']( ch, 0 , auth_key, callback, err);\n                    }\n                    if (!CB_CALLED) callback({action : \"leave\"});\n\n                    \n                } );\n            }\n\n            if (channel_group) {\n                // Prepare channel group(s)\n                channel_group = map( (\n                    channel_group.join ? channel_group.join(',') : ''+channel_group\n                ).split(','), function(channel_group) {\n                    if (!CHANNEL_GROUPS[channel_group]) return;\n                    return channel_group + ',' + channel_group + PRESENCE_SUFFIX;\n                } ).join(',');\n\n                // Iterate over channel groups\n                each( channel_group.split(','), function(chg) {\n                    var CB_CALLED = true;\n                    if (!chg) return;\n                    CHANNEL_GROUPS[chg] = 0;\n                    if (chg in STATE) delete STATE[chg];\n                    if (READY) {\n                        CB_CALLED = SELF['LEAVE_GROUP']( chg, 0 , auth_key, callback, err);\n                    }\n                    if (!CB_CALLED) callback({action : \"leave\"});\n\n                } );\n            }\n\n            // Reset Connection if Count Less\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.subscribe({\n                channel  : 'my_chat'\n                callback : function(message) { }\n            });\n        */\n        'subscribe' : function( args, callback ) {\n            var channel         = args['channel']\n            ,   channel_group   = args['channel_group']\n            ,   callback        = callback            || args['callback']\n            ,   callback        = callback            || args['message']\n            ,   connect         = args['connect']     || function(){}\n            ,   reconnect       = args['reconnect']   || function(){}\n            ,   disconnect      = args['disconnect']  || function(){}\n            ,   SUB_ERROR       = args['error']       || SUB_ERROR || function(){}\n            ,   idlecb          = args['idle']        || function(){}\n            ,   presence        = args['presence']    || 0\n            ,   noheresync      = args['noheresync']  || 0\n            ,   backfill        = args['backfill']    || 0\n            ,   timetoken       = args['timetoken']   || 0\n            ,   sub_timeout     = args['timeout']     || SUB_TIMEOUT\n            ,   windowing       = args['windowing']   || SUB_WINDOWING\n            ,   state           = args['state']\n            ,   heartbeat       = args['heartbeat'] || args['pnexpires']\n            ,   heartbeat_interval = args['heartbeat_interval']\n            ,   restore         = args['restore'] || SUB_RESTORE;\n\n            AUTH_KEY            = args['auth_key']    || AUTH_KEY;\n\n            // Restore Enabled?\n            SUB_RESTORE = restore;\n\n            // Always Reset the TT\n            TIMETOKEN = timetoken;\n\n            // Make sure we have a Channel\n            if (!channel && !channel_group) {\n                return error('Missing Channel');\n            }\n\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (heartbeat || heartbeat === 0 || heartbeat_interval || heartbeat_interval === 0) {\n                SELF['set_heartbeat'](heartbeat, heartbeat_interval);\n            }\n\n            // Setup Channel(s)\n            if (channel) {\n                each( (channel.join ? channel.join(',') : ''+channel).split(','),\n                function(channel) {\n                    var settings = CHANNELS[channel] || {};\n\n                    // Store Channel State\n                    CHANNELS[SUB_CHANNEL = channel] = {\n                        name         : channel,\n                        connected    : settings.connected,\n                        disconnected : settings.disconnected,\n                        subscribed   : 1,\n                        callback     : SUB_CALLBACK = callback,\n                        'cipher_key' : args['cipher_key'],\n                        connect      : connect,\n                        disconnect   : disconnect,\n                        reconnect    : reconnect\n                    };\n\n                    if (state) {\n                        if (channel in state) {\n                            STATE[channel] = state[channel];\n                        } else {\n                            STATE[channel] = state;\n                        }\n                    }\n\n                    // Presence Enabled?\n                    if (!presence) return;\n\n                    // Subscribe Presence Channel\n                    SELF['subscribe']({\n                        'channel'  : channel + PRESENCE_SUFFIX,\n                        'callback' : presence,\n                        'restore'  : restore\n                    });\n\n                    // Presence Subscribed?\n                    if (settings.subscribed) return;\n\n                    // See Who's Here Now?\n                    if (noheresync) return;\n                    SELF['here_now']({\n                        'channel'  : channel,\n                        'data'     : _get_url_params({ 'uuid' : UUID, 'auth' : AUTH_KEY }),\n                        'callback' : function(here) {\n                            each( 'uuids' in here ? here['uuids'] : [],\n                            function(uid) { presence( {\n                                'action'    : 'join',\n                                'uuid'      : uid,\n                                'timestamp' : Math.floor(rnow() / 1000),\n                                'occupancy' : here['occupancy'] || 1\n                            }, here, channel ); } );\n                        }\n                    });\n                } );\n            }\n\n            // Setup Channel Groups\n            if (channel_group) {\n                each( (channel_group.join ? channel_group.join(',') : ''+channel_group).split(','),\n                function(channel_group) {\n                    var settings = CHANNEL_GROUPS[channel_group] || {};\n\n                    CHANNEL_GROUPS[channel_group] = {\n                        name         : channel_group,\n                        connected    : settings.connected,\n                        disconnected : settings.disconnected,\n                        subscribed   : 1,\n                        callback     : SUB_CALLBACK = callback,\n                        'cipher_key' : args['cipher_key'],\n                        connect      : connect,\n                        disconnect   : disconnect,\n                        reconnect    : reconnect\n                    };\n\n                    // Presence Enabled?\n                    if (!presence) return;\n\n                    // Subscribe Presence Channel\n                    SELF['subscribe']({\n                        'channel_group'  : channel_group + PRESENCE_SUFFIX,\n                        'callback' : presence,\n                        'restore'  : restore,\n                        'auth_key' : AUTH_KEY\n                    });\n\n                    // Presence Subscribed?\n                    if (settings.subscribed) return;\n\n                    // See Who's Here Now?\n                    if (noheresync) return;\n                    SELF['here_now']({\n                        'channel_group'  : channel_group,\n                        'data'           : _get_url_params({ 'uuid' : UUID, 'auth' : AUTH_KEY }),\n                        'callback' : function(here) {\n                            each( 'uuids' in here ? here['uuids'] : [],\n                            function(uid) { presence( {\n                                'action'    : 'join',\n                                'uuid'      : uid,\n                                'timestamp' : Math.floor(rnow() / 1000),\n                                'occupancy' : here['occupancy'] || 1\n                            }, here, channel_group ); } );\n                        }\n                    });\n                } );\n            }\n\n\n            // Test Network Connection\n            function _test_connection(success) {\n                if (success) {\n                    // Begin Next Socket Connection\n                    timeout( CONNECT, SECOND );\n                }\n                else {\n                    // New Origin on Failed Connection\n                    STD_ORIGIN = nextorigin( ORIGIN, 1 );\n                    SUB_ORIGIN = nextorigin( ORIGIN, 1 );\n\n                    // Re-test Connection\n                    timeout( function() {\n                        SELF['time'](_test_connection);\n                    }, SECOND );\n                }\n\n                // Disconnect & Reconnect\n                each_channel(function(channel){\n                    // Reconnect\n                    if (success && channel.disconnected) {\n                        channel.disconnected = 0;\n                        return channel.reconnect(channel.name);\n                    }\n\n                    // Disconnect\n                    if (!success && !channel.disconnected) {\n                        channel.disconnected = 1;\n                        channel.disconnect(channel.name);\n                    }\n                });\n                \n                // Disconnect & Reconnect for channel groups\n                each_channel_group(function(channel_group){\n                    // Reconnect\n                    if (success && channel_group.disconnected) {\n                        channel_group.disconnected = 0;\n                        return channel_group.reconnect(channel_group.name);\n                    }\n\n                    // Disconnect\n                    if (!success && !channel_group.disconnected) {\n                        channel_group.disconnected = 1;\n                        channel_group.disconnect(channel_group.name);\n                    }\n                });\n            }\n\n            // Evented Subscribe\n            function _connect() {\n                var jsonp           = jsonp_cb()\n                ,   channels        = generate_channel_list(CHANNELS).join(',')\n                ,   channel_groups  = generate_channel_group_list(CHANNEL_GROUPS).join(',');\n\n                // Stop Connection\n                if (!channels && !channel_groups) return;\n\n                if (!channels) channels = ',';\n\n                // Connect to PubNub Subscribe Servers\n                _reset_offline();\n\n                var data = _get_url_params({ 'uuid' : UUID, 'auth' : AUTH_KEY });\n\n                if (channel_groups) {\n                    data['channel-group'] = channel_groups;\n                }\n\n\n                var st = JSON.stringify(STATE);\n                if (st.length > 2) data['state'] = JSON.stringify(STATE);\n\n                if (PRESENCE_HB) data['heartbeat'] = PRESENCE_HB;\n\n                if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n                start_presence_heartbeat();\n                SUB_RECEIVER = xdr({\n                    timeout  : sub_timeout,\n                    callback : jsonp,\n                    fail     : function(response) {\n                        if (response && response['error'] && response['service']) {\n                            _invoke_error(response, SUB_ERROR);\n                            _test_connection(1);\n                        } else {\n                            SELF['time'](function(success){\n                                !success && ( _invoke_error(response, SUB_ERROR));\n                                _test_connection(success);\n                            });\n                        }\n                    },\n                    data     : _get_url_params(data),\n                    url      : [\n                        SUB_ORIGIN, 'subscribe',\n                        SUBSCRIBE_KEY, encode(channels),\n                        jsonp, TIMETOKEN\n                    ],\n                    success : function(messages) {\n\n                        // Check for Errors\n                        if (!messages || (\n                            typeof messages == 'object' &&\n                            'error' in messages         &&\n                            messages['error']\n                        )) {\n                            SUB_ERROR(messages['error']);\n                            return timeout( CONNECT, SECOND );\n                        }\n\n                        // User Idle Callback\n                        idlecb(messages[1]);\n\n                        // Restore Previous Connection Point if Needed\n                        TIMETOKEN = !TIMETOKEN               &&\n                                    SUB_RESTORE              &&\n                                    db['get'](SUBSCRIBE_KEY) || messages[1];\n\n                        /*\n                        // Connect\n                        each_channel_registry(function(registry){\n                            if (registry.connected) return;\n                            registry.connected = 1;\n                            registry.connect(channel.name);\n                        });\n                        */\n\n                        // Connect\n                        each_channel(function(channel){\n                            if (channel.connected) return;\n                            channel.connected = 1;\n                            channel.connect(channel.name);\n                        });\n\n                        // Connect for channel groups\n                        each_channel_group(function(channel_group){\n                            if (channel_group.connected) return;\n                            channel_group.connected = 1;\n                            channel_group.connect(channel_group.name);\n                        });\n\n                        if (RESUMED && !SUB_RESTORE) {\n                                TIMETOKEN = 0;\n                                RESUMED = false;\n                                // Update Saved Timetoken\n                                db['set']( SUBSCRIBE_KEY, 0 );\n                                timeout( _connect, windowing );\n                                return;\n                        }\n\n                        // Invoke Memory Catchup and Receive Up to 100\n                        // Previous Messages from the Queue.\n                        if (backfill) {\n                            TIMETOKEN = 10000;\n                            backfill  = 0;\n                        }\n\n                        // Update Saved Timetoken\n                        db['set']( SUBSCRIBE_KEY, messages[1] );\n\n                        // Route Channel <---> Callback for Message\n                        var next_callback = (function() {\n                            var channels = '';\n                            var channels2 = '';\n\n                            if (messages.length > 3) {\n                                channels  = messages[3];\n                                channels2 = messages[2];\n                            } else if (messages.length > 2) {\n                                channels = messages[2];\n                            } else {\n                                channels =  map(\n                                    generate_channel_list(CHANNELS), function(chan) { return map(\n                                        Array(messages[0].length)\n                                        .join(',').split(','),\n                                        function() { return chan; }\n                                    ) }).join(',')\n                            }\n\n                            var list  = channels.split(',');\n                            var list2 = (channels2)?channels2.split(','):[];\n\n                            return function() {\n                                var channel  = list.shift()||SUB_CHANNEL;\n                                var channel2 = list2.shift();\n\n                                var chobj = {};\n\n                                if (channel2) {\n                                    if (channel && channel.indexOf('-pnpres') >= 0 \n                                        && channel2.indexOf('-pnpres') < 0) {\n                                        channel2 += '-pnpres';\n                                    }\n                                    chobj = CHANNEL_GROUPS[channel2] || CHANNELS[channel2] || {'callback' : function(){}};\n                                } else {\n                                    chobj = CHANNELS[channel];\n                                }\n\n                                var r = [\n                                    chobj\n                                    .callback||SUB_CALLBACK,\n                                    channel.split(PRESENCE_SUFFIX)[0]\n                                ];\n                                channel2 && r.push(channel2.split(PRESENCE_SUFFIX)[0]);\n                                return r;\n                            };\n                        })();\n\n                        var latency = detect_latency(+messages[1]);\n                        each( messages[0], function(msg) {\n                            var next = next_callback();\n                            var decrypted_msg = decrypt(msg,\n                                (CHANNELS[next[1]])?CHANNELS[next[1]]['cipher_key']:null);\n                            next[0] && next[0]( decrypted_msg, messages, next[2] || next[1], latency, next[1]);\n                        });\n\n                        timeout( _connect, windowing );\n                    }\n                });\n            }\n\n            CONNECT = function() {\n                _reset_offline();\n                timeout( _connect, windowing );\n            };\n\n            // Reduce Status Flicker\n            if (!READY) return READY_BUFFER.push(CONNECT);\n\n            // Connect Now\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.here_now({ channel : 'my_chat', callback : fun });\n        */\n        'here_now' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   channel  = args['channel']\n            ,   channel_group = args['channel_group']\n            ,   jsonp    = jsonp_cb()\n            ,   uuids    = ('uuids' in args) ? args['uuids'] : true\n            ,   state    = args['state']\n            ,   data     = { 'uuid' : UUID, 'auth' : auth_key };\n\n            if (!uuids) data['disable_uuids'] = 1;\n            if (state) data['state'] = 1;\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            var url = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub_key', SUBSCRIBE_KEY\n                ];\n\n            channel && url.push('channel') && url.push(encode(channel));\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (channel_group) {\n                data['channel-group'] = channel_group;\n                !channel && url.push('channel') && url.push(','); \n            }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n        },\n\n        /*\n            PUBNUB.current_channels_by_uuid({ channel : 'my_chat', callback : fun });\n        */\n        'where_now' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   jsonp    = jsonp_cb()\n            ,   uuid     = args['uuid']     || UUID\n            ,   data     = { 'auth' : auth_key };\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub_key', SUBSCRIBE_KEY,\n                    'uuid', encode(uuid)\n                ]\n            });\n        },\n\n        'state' : function(args, callback) {\n            var callback = args['callback'] || callback || function(r) {}\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   jsonp    = jsonp_cb()\n            ,   state    = args['state']\n            ,   uuid     = args['uuid'] || UUID\n            ,   channel  = args['channel']\n            ,   channel_group = args['channel_group']\n            ,   url\n            ,   data     = _get_url_params({ 'auth' : auth_key });\n\n            // Make sure we have a Channel\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!uuid) return error('Missing UUID');\n            if (!channel && !channel_group) return error('Missing Channel');\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (typeof channel != 'undefined'\n                && CHANNELS[channel] && CHANNELS[channel].subscribed ) {\n                if (state) STATE[channel] = state;\n            }\n\n            if (typeof channel_group != 'undefined'\n                && CHANNEL_GROUPS[channel_group]\n                && CHANNEL_GROUPS[channel_group].subscribed\n                ) {\n                if (state) STATE[channel_group] = state;\n                data['channel-group'] = channel_group;\n\n                if (!channel) {\n                    channel = ',';\n                }\n            }\n\n            data['state'] = JSON.stringify(state);\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            if (state) {\n                url      = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel', channel,\n                    'uuid', uuid, 'data'\n                ]\n            } else {\n                url      = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel', channel,\n                    'uuid', encode(uuid)\n                ]\n            }\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n\n            });\n\n        },\n\n        /*\n            PUBNUB.grant({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                ttl      : 24 * 60, // Minutes\n                read     : true,\n                write    : true,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'grant' : function( args, callback ) {\n            var callback        = args['callback'] || callback\n            ,   err             = args['error']    || function(){}\n            ,   channel         = args['channel']  || args['channels']\n            ,   channel_group   = args['channel_group']\n            ,   jsonp           = jsonp_cb()\n            ,   ttl             = args['ttl']\n            ,   r               = (args['read'] )?\"1\":\"0\"\n            ,   w               = (args['write'])?\"1\":\"0\"\n            ,   m               = (args['manage'])?\"1\":\"0\"\n            ,   auth_key        = args['auth_key'] || args['auth_keys'];\n\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SECRET_KEY)    return error('Missing Secret Key');\n\n            var timestamp  = Math.floor(new Date().getTime() / 1000)\n            ,   sign_input = SUBSCRIBE_KEY + \"\\n\" + PUBLISH_KEY + \"\\n\"\n                    + \"grant\" + \"\\n\";\n\n            var data = {\n                'w'         : w,\n                'r'         : r,\n                'timestamp' : timestamp\n            };\n            if (args['manage']) {\n                data['m'] = m;\n            }\n            if (isArray(channel)) {\n                channel = channel['join'](',');\n            }\n            if (isArray(auth_key)) {\n                auth_key = auth_key['join'](',');\n            }\n            if (typeof channel != 'undefined' && channel != null && channel.length > 0) data['channel'] = channel;\n            if (typeof channel_group != 'undefined' && channel_group != null && channel_group.length > 0) {\n                data['channel-group'] = channel_group;\n            }\n            if (jsonp != '0') { data['callback'] = jsonp; }\n            if (ttl || ttl === 0) data['ttl'] = ttl;\n\n            if (auth_key) data['auth'] = auth_key;\n\n            data = _get_url_params(data)\n\n            if (!auth_key) delete data['auth'];\n\n            sign_input += _get_pam_sign_input_from_params(data);\n\n            var signature = hmac_SHA256( sign_input, SECRET_KEY );\n\n            signature = signature.replace( /\\+/g, \"-\" );\n            signature = signature.replace( /\\//g, \"_\" );\n\n            data['signature'] = signature;\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v1', 'auth', 'grant' ,\n                    'sub-key', SUBSCRIBE_KEY\n                ]\n            });\n        },\n\n        /*\n         PUBNUB.mobile_gw_provision ({\n         device_id: 'A655FBA9931AB',\n         op       : 'add' | 'remove',\n         gw_type  : 'apns' | 'gcm',\n         channel  : 'my_chat',\n         callback : fun,\n         error    : fun,\n         });\n         */\n\n        'mobile_gw_provision' : function( args ) {\n\n            var callback = args['callback'] || function(){}\n                ,   auth_key       = args['auth_key'] || AUTH_KEY\n                ,   err            = args['error'] || function() {}\n                ,   jsonp          = jsonp_cb()\n                ,   channel        = args['channel']\n                ,   op             = args['op']\n                ,   gw_type        = args['gw_type']\n                ,   device_id      = args['device_id']\n                ,   url;\n\n            if (!device_id)     return error('Missing Device ID (device_id)');\n            if (!gw_type)       return error('Missing GW Type (gw_type: gcm or apns)');\n            if (!op)            return error('Missing GW Operation (op: add or remove)');\n            if (!channel)       return error('Missing gw destination Channel (channel)');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            // Create URL\n            url = [\n                STD_ORIGIN, 'v1/push/sub-key',\n                SUBSCRIBE_KEY, 'devices', device_id\n            ];\n\n            params = { 'uuid' : UUID, 'auth' : auth_key, 'type': gw_type};\n\n            if (op == \"add\") {\n                params['add'] = channel;\n            } else if (op == \"remove\") {\n                params['remove'] = channel;\n            }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : params,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n\n        },\n\n        /*\n            PUBNUB.audit({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                read     : true,\n                write    : true,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'audit' : function( args, callback ) {\n            var callback        = args['callback'] || callback\n            ,   err             = args['error']    || function(){}\n            ,   channel         = args['channel']\n            ,   channel_group   = args['channel_group']\n            ,   auth_key        = args['auth_key']\n            ,   jsonp           = jsonp_cb();\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SECRET_KEY)    return error('Missing Secret Key');\n\n            var timestamp  = Math.floor(new Date().getTime() / 1000)\n            ,   sign_input = SUBSCRIBE_KEY + \"\\n\"\n                + PUBLISH_KEY + \"\\n\"\n                + \"audit\" + \"\\n\";\n\n            var data = {'timestamp' : timestamp };\n            if (jsonp != '0') { data['callback'] = jsonp; }\n            if (typeof channel != 'undefined' && channel != null && channel.length > 0) data['channel'] = channel;\n            if (typeof channel_group != 'undefined' && channel_group != null && channel_group.length > 0) {\n                data['channel-group'] = channel_group;\n            }\n            if (auth_key) data['auth']    = auth_key;\n\n            data = _get_url_params(data);\n\n            if (!auth_key) delete data['auth'];\n\n            sign_input += _get_pam_sign_input_from_params(data);\n\n            var signature = hmac_SHA256( sign_input, SECRET_KEY );\n\n            signature = signature.replace( /\\+/g, \"-\" );\n            signature = signature.replace( /\\//g, \"_\" );\n\n            data['signature'] = signature;\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v1', 'auth', 'audit' ,\n                    'sub-key', SUBSCRIBE_KEY\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.revoke({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'revoke' : function( args, callback ) {\n            args['read']  = false;\n            args['write'] = false;\n            SELF['grant']( args, callback );\n        },\n        'set_uuid' : function(uuid) {\n            UUID = uuid;\n            CONNECT();\n        },\n        'get_uuid' : function() {\n            return UUID;\n        },\n        'isArray'  : function(arg) {\n            return isArray(arg);\n        },\n        'get_subscibed_channels' : function() {\n            return generate_channel_list(CHANNELS, true);\n        },\n        'presence_heartbeat' : function(args) {\n            var callback = args['callback'] || function() {}\n            var err      = args['error']    || function() {}\n            var jsonp    = jsonp_cb();\n            var data     = { 'uuid' : UUID, 'auth' : AUTH_KEY };\n\n            var st = JSON['stringify'](STATE);\n            if (st.length > 2) data['state'] = JSON['stringify'](STATE);\n\n            if (PRESENCE_HB > 0 && PRESENCE_HB < 320) data['heartbeat'] = PRESENCE_HB;\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            var channels        = encode(generate_channel_list(CHANNELS, true)['join'](','));\n            var channel_groups  = generate_channel_group_list(CHANNEL_GROUPS, true)['join'](',');\n\n            if (!channels) channels = ',';\n            if (channel_groups) data['channel-group'] = channel_groups;\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                timeout  : SECOND * 5,\n                url      : [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel' , channels,\n                    'heartbeat'\n                ],\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) { _invoke_error(response, err); }\n            });\n        },\n        'stop_timers': function () {\n            clearTimeout(_poll_timer);\n            clearTimeout(_poll_timer2);\n        },\n\n        // Expose PUBNUB Functions\n        'xdr'           : xdr,\n        'ready'         : ready,\n        'db'            : db,\n        'uuid'          : generate_uuid,\n        'map'           : map,\n        'each'          : each,\n        'each-channel'  : each_channel,\n        'grep'          : grep,\n        'offline'       : function(){ _reset_offline(\n            1, { \"message\" : \"Offline. Please check your network settings.\" })\n        },\n        'supplant'      : supplant,\n        'now'           : rnow,\n        'unique'        : unique,\n        'updater'       : updater\n    };\n\n    function _poll_online() {\n        _is_online() || _reset_offline( 1, {\n            \"error\" : \"Offline. Please check your network settings. \"\n        });\n        _poll_timer && clearTimeout(_poll_timer);\n        _poll_timer = timeout( _poll_online, SECOND );\n    }\n\n    function _poll_online2() {\n        if (!TIME_CHECK) return;\n        SELF['time'](function(success){\n            detect_time_detla( function(){}, success );\n            success || _reset_offline( 1, {\n                \"error\" : \"Heartbeat failed to connect to Pubnub Servers.\" +\n                    \"Please check your network settings.\"\n                });\n            _poll_timer2 && clearTimeout(_poll_timer2);\n            _poll_timer2 = timeout( _poll_online2, KEEPALIVE );\n        });\n    }\n\n    function _reset_offline(err, msg) {\n        SUB_RECEIVER && SUB_RECEIVER(err, msg);\n        SUB_RECEIVER = null;\n\n        clearTimeout(_poll_timer);\n        clearTimeout(_poll_timer2);\n    }\n    \n    if (!UUID) UUID = SELF['uuid']();\n    if (!INSTANCEID) INSTANCEID = SELF['uuid']();\n    db['set']( SUBSCRIBE_KEY + 'uuid', UUID );\n\n    _poll_timer  = timeout( _poll_online,  SECOND    );\n    _poll_timer2 = timeout( _poll_online2, KEEPALIVE );\n    PRESENCE_HB_TIMEOUT = timeout(\n        start_presence_heartbeat,\n        ( PRESENCE_HB_INTERVAL - 3 ) * SECOND\n    );\n\n    // Detect Age of Message\n    function detect_latency(tt) {\n        var adjusted_time = rnow() - TIME_DRIFT;\n        return adjusted_time - tt / 10000;\n    }\n\n    detect_time_detla();\n    function detect_time_detla( cb, time ) {\n        var stime = rnow();\n\n        time && calculate(time) || SELF['time'](calculate);\n\n        function calculate(time) {\n            if (!time) return;\n            var ptime   = time / 10000\n            ,   latency = (rnow() - stime) / 2;\n            TIME_DRIFT = rnow() - (ptime + latency);\n            cb && cb(TIME_DRIFT);\n        }\n    }\n\n    return SELF;\n}\nfunction crypto_obj() {\n\n    function SHA256(s) {\n        return CryptoJS['SHA256'](s)['toString'](CryptoJS['enc']['Hex']);\n    }\n\n    var iv = \"0123456789012345\";\n\n    var allowedKeyEncodings = ['hex', 'utf8', 'base64', 'binary'];\n    var allowedKeyLengths = [128, 256];\n    var allowedModes = ['ecb', 'cbc'];\n\n    var defaultOptions = {\n        'encryptKey': true,\n        'keyEncoding': 'utf8',\n        'keyLength': 256,\n        'mode': 'cbc'\n    };\n\n    function parse_options(options) {\n\n        // Defaults\n        options = options || {};\n        if (!options['hasOwnProperty']('encryptKey')) options['encryptKey'] = defaultOptions['encryptKey'];\n        if (!options['hasOwnProperty']('keyEncoding')) options['keyEncoding'] = defaultOptions['keyEncoding'];\n        if (!options['hasOwnProperty']('keyLength')) options['keyLength'] = defaultOptions['keyLength'];\n        if (!options['hasOwnProperty']('mode')) options['mode'] = defaultOptions['mode'];\n\n        // Validation\n        if (allowedKeyEncodings['indexOf'](options['keyEncoding']['toLowerCase']()) == -1) options['keyEncoding'] = defaultOptions['keyEncoding'];\n        if (allowedKeyLengths['indexOf'](parseInt(options['keyLength'], 10)) == -1) options['keyLength'] = defaultOptions['keyLength'];\n        if (allowedModes['indexOf'](options['mode']['toLowerCase']()) == -1) options['mode'] = defaultOptions['mode'];\n\n        return options;\n\n    }\n\n    function decode_key(key, options) {\n        if (options['keyEncoding'] == 'base64') {\n            return CryptoJS['enc']['Base64']['parse'](key);\n        } else if (options['keyEncoding'] == 'hex') {\n            return CryptoJS['enc']['Hex']['parse'](key);\n        } else {\n            return key;\n        }\n    }\n\n    function get_padded_key(key, options) {\n        key = decode_key(key, options);\n        if (options['encryptKey']) {\n            return CryptoJS['enc']['Utf8']['parse'](SHA256(key)['slice'](0, 32));\n        } else {\n            return key;\n        }\n    }\n\n    function get_mode(options) {\n        if (options['mode'] == 'ecb') {\n            return CryptoJS['mode']['ECB'];\n        } else {\n            return CryptoJS['mode']['CBC'];\n        }\n    }\n\n    function get_iv(options) {\n        return (options['mode'] == 'cbc') ? CryptoJS['enc']['Utf8']['parse'](iv) : null;\n    }\n\n    return {\n\n        'encrypt': function(data, key, options) {\n            if (!key) return data;\n            options = parse_options(options);\n            var iv = get_iv(options);\n            var mode = get_mode(options);\n            var cipher_key = get_padded_key(key, options);\n            var hex_message = JSON['stringify'](data);\n            var encryptedHexArray = CryptoJS['AES']['encrypt'](hex_message, cipher_key, {'iv': iv, 'mode': mode})['ciphertext'];\n            var base_64_encrypted = encryptedHexArray['toString'](CryptoJS['enc']['Base64']);\n            return base_64_encrypted || data;\n        },\n\n        'decrypt': function(data, key, options) {\n            if (!key) return data;\n            options = parse_options(options);\n            var iv = get_iv(options);\n            var mode = get_mode(options);\n            var cipher_key = get_padded_key(key, options);\n            try {\n                var binary_enc = CryptoJS['enc']['Base64']['parse'](data);\n                var json_plain = CryptoJS['AES']['decrypt']({'ciphertext': binary_enc}, cipher_key, {'iv': iv, 'mode': mode})['toString'](CryptoJS['enc']['Utf8']);\n                var plaintext = JSON['parse'](json_plain);\n                return plaintext;\n            }\n            catch (e) {\n                return undefined;\n            }\n        }\n    };\n}\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     UTIL     =============================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\nwindow['PUBNUB'] || (function() {\n\n/**\n * UTIL LOCALS\n */\n\nvar SWF             = 'https://pubnub.a.ssl.fastly.net/pubnub.swf'\n,   ASYNC           = 'async'\n,   UA              = navigator.userAgent\n,   PNSDK           = 'PubNub-JS-' + 'Web' + '/' + '3.7.10'\n,   XORIGN          = UA.indexOf('MSIE 6') == -1;\n\n/**\n * CONSOLE COMPATIBILITY\n */\nwindow.console || (window.console=window.console||{});\nconsole.log    || (\n    console.log   =\n    console.error =\n    ((window.opera||{}).postError||function(){})\n);\n\n/**\n * LOCAL STORAGE OR COOKIE\n */\nvar db = (function(){\n    var store = {};\n    var ls = false;\n    try {\n        ls = window['localStorage'];\n    } catch (e) { }\n    var cookieGet = function(key) {\n        if (document.cookie.indexOf(key) == -1) return null;\n        return ((document.cookie||'').match(\n            RegExp(key+'=([^;]+)')\n        )||[])[1] || null;\n    };\n    var cookieSet = function( key, value ) {\n        document.cookie = key + '=' + value +\n            '; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/';\n    };\n    var cookieTest = (function() {\n        try {\n            cookieSet('pnctest', '1');\n            return cookieGet('pnctest') === '1';\n        } catch (e) {\n            return false;\n        }\n    }());\n    return {\n        'get' : function(key) {\n            try {\n                if (ls) return ls.getItem(key);\n                if (cookieTest) return cookieGet(key);\n                return store[key];\n            } catch(e) {\n                return store[key];\n            }\n        },\n        'set' : function( key, value ) {\n            try {\n                if (ls) return ls.setItem( key, value ) && 0;\n                if (cookieTest) cookieSet( key, value );\n                store[key] = value;\n            } catch(e) {\n                store[key] = value;\n            }\n        }\n    };\n})();\n\nfunction get_hmac_SHA256(data,key) {\n    var hash = CryptoJS['HmacSHA256'](data, key);\n    return hash.toString(CryptoJS['enc']['Base64']);\n}\n\n/**\n * $\n * =\n * var div = $('divid');\n */\nfunction $(id) { return document.getElementById(id) }\n\n/**\n * ERROR\n * =====\n * error('message');\n */\nfunction error(message) { console['error'](message) }\n\n/**\n * SEARCH\n * ======\n * var elements = search('a div span');\n */\nfunction search( elements, start) {\n    var list = [];\n    each( elements.split(/\\s+/), function(el) {\n        each( (start || document).getElementsByTagName(el), function(node) {\n            list.push(node);\n        } );\n    });\n    return list;\n}\n\n/**\n * BIND\n * ====\n * bind( 'keydown', search('a')[0], function(element) {\n *     ...\n * } );\n */\nfunction bind( type, el, fun ) {\n    each( type.split(','), function(etype) {\n        var rapfun = function(e) {\n            if (!e) e = window.event;\n            if (!fun(e)) {\n                e.cancelBubble = true;\n                e.preventDefault  && e.preventDefault();\n                e.stopPropagation && e.stopPropagation();\n            }\n        };\n\n        if ( el.addEventListener ) el.addEventListener( etype, rapfun, false );\n        else if ( el.attachEvent ) el.attachEvent( 'on' + etype, rapfun );\n        else  el[ 'on' + etype ] = rapfun;\n    } );\n}\n\n/**\n * UNBIND\n * ======\n * unbind( 'keydown', search('a')[0] );\n */\nfunction unbind( type, el, fun ) {\n    if ( el.removeEventListener ) el.removeEventListener( type, false );\n    else if ( el.detachEvent ) el.detachEvent( 'on' + type, false );\n    else  el[ 'on' + type ] = null;\n}\n\n/**\n * HEAD\n * ====\n * head().appendChild(elm);\n */\nfunction head() { return search('head')[0] }\n\n/**\n * ATTR\n * ====\n * var attribute = attr( node, 'attribute' );\n */\nfunction attr( node, attribute, value ) {\n    if (value) node.setAttribute( attribute, value );\n    else return node && node.getAttribute && node.getAttribute(attribute);\n}\n\n/**\n * CSS\n * ===\n * var obj = create('div');\n */\nfunction css( element, styles ) {\n    for (var style in styles) if (styles.hasOwnProperty(style))\n        try {element.style[style] = styles[style] + (\n            '|width|height|top|left|'.indexOf(style) > 0 &&\n            typeof styles[style] == 'number'\n            ? 'px' : ''\n        )}catch(e){}\n}\n\n/**\n * CREATE\n * ======\n * var obj = create('div');\n */\nfunction create(element) { return document.createElement(element) }\n\n\n/**\n * jsonp_cb\n * ========\n * var callback = jsonp_cb();\n */\nfunction jsonp_cb() { return XORIGN || FDomainRequest() ? 0 : unique() }\n\n\n\n/**\n * EVENTS\n * ======\n * PUBNUB.events.bind( 'you-stepped-on-flower', function(message) {\n *     // Do Stuff with message\n * } );\n *\n * PUBNUB.events.fire( 'you-stepped-on-flower', \"message-data\" );\n * PUBNUB.events.fire( 'you-stepped-on-flower', {message:\"data\"} );\n * PUBNUB.events.fire( 'you-stepped-on-flower', [1,2,3] );\n *\n */\nvar events = {\n    'list'   : {},\n    'unbind' : function( name ) { events.list[name] = [] },\n    'bind'   : function( name, fun ) {\n        (events.list[name] = events.list[name] || []).push(fun);\n    },\n    'fire' : function( name, data ) {\n        each(\n            events.list[name] || [],\n            function(fun) { fun(data) }\n        );\n    }\n};\n\n/**\n * XDR Cross Domain Request\n * ========================\n *  xdr({\n *     url     : ['http://www.blah.com/url'],\n *     success : function(response) {},\n *     fail    : function() {}\n *  });\n */\nfunction xdr( setup ) {\n    if (XORIGN || FDomainRequest()) return ajax(setup);\n\n    var script    = create('script')\n    ,   callback  = setup.callback\n    ,   id        = unique()\n    ,   finished  = 0\n    ,   xhrtme    = setup.timeout || DEF_TIMEOUT\n    ,   timer     = timeout( function(){done(1, {\"message\" : \"timeout\"})}, xhrtme )\n    ,   fail      = setup.fail    || function(){}\n    ,   data      = setup.data    || {}\n    ,   success   = setup.success || function(){}\n    ,   append    = function() { head().appendChild(script) }\n    ,   done      = function( failed, response ) {\n            if (finished) return;\n            finished = 1;\n\n            script.onerror = null;\n            clearTimeout(timer);\n\n            (failed || !response) || success(response);\n\n            timeout( function() {\n                failed && fail();\n                var s = $(id)\n                ,   p = s && s.parentNode;\n                p && p.removeChild(s);\n            }, SECOND );\n        };\n\n    window[callback] = function(response) {\n        done( 0, response );\n    };\n\n    if (!setup.blocking) script[ASYNC] = ASYNC;\n\n    script.onerror = function() { done(1) };\n    script.src     = build_url( setup.url, data );\n\n    attr( script, 'id', id );\n\n    append();\n    return done;\n}\n\n/**\n * CORS XHR Request\n * ================\n *  xdr({\n *     url     : ['http://www.blah.com/url'],\n *     success : function(response) {},\n *     fail    : function() {}\n *  });\n */\nfunction ajax( setup ) {\n    var xhr, response\n    ,   finished = function() {\n            if (loaded) return;\n            loaded = 1;\n\n            clearTimeout(timer);\n\n            try       { response = JSON['parse'](xhr.responseText); }\n            catch (r) { return done(1); }\n\n            complete = 1;\n            success(response);\n        }\n    ,   complete = 0\n    ,   loaded   = 0\n    ,   xhrtme   = setup.timeout || DEF_TIMEOUT\n    ,   timer    = timeout( function(){done(1, {\"message\" : \"timeout\"})}, xhrtme )\n    ,   fail     = setup.fail    || function(){}\n    ,   data     = setup.data    || {}\n    ,   success  = setup.success || function(){}\n    ,   async    = !(setup.blocking)\n    ,   done     = function(failed,response) {\n            if (complete) return;\n            complete = 1;\n\n            clearTimeout(timer);\n\n            if (xhr) {\n                xhr.onerror = xhr.onload = null;\n                xhr.abort && xhr.abort();\n                xhr = null;\n            }\n\n            failed && fail(response);\n        };\n\n    // Send\n    try {\n        xhr = FDomainRequest()      ||\n              window.XDomainRequest &&\n              new XDomainRequest()  ||\n              new XMLHttpRequest();\n\n        xhr.onerror = xhr.onabort   = function(){ done(\n            1, xhr.responseText || { \"error\" : \"Network Connection Error\"}\n        ) };\n        xhr.onload  = xhr.onloadend = finished;\n        xhr.onreadystatechange = function() {\n            if (xhr && xhr.readyState == 4) {\n                switch(xhr.status) {\n                    case 200:\n                        break;\n                    default:\n                        try {\n                            response = JSON['parse'](xhr.responseText);\n                            done(1,response);\n                        }\n                        catch (r) { return done(1, {status : xhr.status, payload : null, message : xhr.responseText}); }\n                        return;\n                }\n            }\n        }\n\n        var url = build_url(setup.url,data);\n\n        xhr.open( 'GET', url, async );\n        if (async) xhr.timeout = xhrtme;\n        xhr.send();\n    }\n    catch(eee) {\n        done(0);\n        XORIGN = 0;\n        return xdr(setup);\n    }\n\n    // Return 'done'\n    return done;\n}\n\n// Test Connection State\nfunction _is_online() {\n    if (!('onLine' in navigator)) return 1;\n    try       { return navigator['onLine'] }\n    catch (e) { return true }\n}\n\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     PUBNUB     ===========================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\nvar PDIV          = $('pubnub') || 0\n,   CREATE_PUBNUB = function(setup) {\n\n    // Force JSONP if requested from user.\n    if (setup['jsonp'])  XORIGN = 0;\n    else                 XORIGN = UA.indexOf('MSIE 6') == -1;\n\n    var SUBSCRIBE_KEY = setup['subscribe_key'] || ''\n    ,   KEEPALIVE     = (+setup['keepalive']   || DEF_KEEPALIVE)   * SECOND\n    ,   UUID          = setup['uuid'] || db['get'](SUBSCRIBE_KEY+'uuid')||'';\n\n    var leave_on_unload = setup['leave_on_unload'] || 0;\n\n    setup['xdr']        = xdr;\n    setup['db']         = db;\n    setup['error']      = setup['error'] || error;\n    setup['_is_online'] = _is_online;\n    setup['jsonp_cb']   = jsonp_cb;\n    setup['hmac_SHA256']= get_hmac_SHA256;\n    setup['crypto_obj'] = crypto_obj();\n    setup['params']     = { 'pnsdk' : PNSDK }\n\n    var SELF = function(setup) {\n        return CREATE_PUBNUB(setup);\n    };\n\n    var PN = PN_API(setup);\n\n    for (var prop in PN) {\n        if (PN.hasOwnProperty(prop)) {\n            SELF[prop] = PN[prop];\n        }\n    }\n    SELF['css']         = css;\n    SELF['$']           = $;\n    SELF['create']      = create;\n    SELF['bind']        = bind;\n    SELF['head']        = head;\n    SELF['search']      = search;\n    SELF['attr']        = attr;\n    SELF['events']      = events;\n    SELF['init']        = SELF;\n    SELF['secure']      = SELF;\n    SELF['crypto_obj']  = crypto_obj(); // export to instance\n\n\n    // Add Leave Functions\n    bind( 'beforeunload', window, function() {\n        if (leave_on_unload) SELF['each-channel'](function(ch){ SELF['LEAVE']( ch.name, 0 ) });\n        return true;\n    } );\n\n    // Return without Testing\n    if (setup['notest']) return SELF;\n\n    bind( 'offline', window,   SELF['offline'] );\n    bind( 'offline', document, SELF['offline'] );\n\n    // Return PUBNUB Socket Object\n    return SELF;\n};\nCREATE_PUBNUB['init']   = CREATE_PUBNUB;\nCREATE_PUBNUB['secure'] = CREATE_PUBNUB;\nCREATE_PUBNUB['crypto_obj'] = crypto_obj(); // export to constructor\n\n// Bind for PUBNUB Readiness to Subscribe\nif (document.readyState === 'complete') {\n    timeout( ready, 0 );\n}\nelse {\n    bind( 'load', window, function(){ timeout( ready, 0 ) } );\n}\n\nvar pdiv = PDIV || {};\n\n// CREATE A PUBNUB GLOBAL OBJECT\nPUBNUB = CREATE_PUBNUB({\n    'notest'        : 1,\n    'publish_key'   : attr( pdiv, 'pub-key' ),\n    'subscribe_key' : attr( pdiv, 'sub-key' ),\n    'ssl'           : !document.location.href.indexOf('https') ||\n                      attr( pdiv, 'ssl' ) == 'on',\n    'origin'        : attr( pdiv, 'origin' ),\n    'uuid'          : attr( pdiv, 'uuid' )\n});\n\n// jQuery Interface\nwindow['jQuery'] && (window['jQuery']['PUBNUB'] = CREATE_PUBNUB);\n\n// For Modern JS + Testling.js - http://testling.com/\ntypeof(module) !== 'undefined' && (module['exports'] = PUBNUB) && ready();\n\nvar pubnubs = $('pubnubs') || 0;\n\n// LEAVE NOW IF NO PDIV.\nif (!PDIV) return;\n\n// PUBNUB Flash Socket\ncss( PDIV, { 'position' : 'absolute', 'top' : -SECOND } );\n\nif ('opera' in window || attr( PDIV, 'flash' )) PDIV['innerHTML'] =\n    '<object id=pubnubs data='  + SWF +\n    '><param name=movie value=' + SWF +\n    '><param name=allowscriptaccess value=always></object>';\n\n// Create Interface for Opera Flash\nPUBNUB['rdx'] = function( id, data ) {\n    if (!data) return FDomainRequest[id]['onerror']();\n    FDomainRequest[id]['responseText'] = unescape(data);\n    FDomainRequest[id]['onload']();\n};\n\nfunction FDomainRequest() {\n    if (!pubnubs || !pubnubs['get']) return 0;\n\n    var fdomainrequest = {\n        'id'    : FDomainRequest['id']++,\n        'send'  : function() {},\n        'abort' : function() { fdomainrequest['id'] = {} },\n        'open'  : function( method, url ) {\n            FDomainRequest[fdomainrequest['id']] = fdomainrequest;\n            pubnubs['get']( fdomainrequest['id'], url );\n        }\n    };\n\n    return fdomainrequest;\n}\nFDomainRequest['id'] = SECOND;\n\n})();\n(function(){\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET INTERFACE\n// ---------------------------------------------------------------------------\nvar WS = PUBNUB['ws'] = function( url, protocols ) {\n    if (!(this instanceof WS)) return new WS( url, protocols );\n\n    var self     = this\n    ,   url      = self.url      = url || ''\n    ,   protocol = self.protocol = protocols || 'Sec-WebSocket-Protocol'\n    ,   bits     = url.split('/')\n    ,   setup    = {\n         'ssl'           : bits[0] === 'wss:'\n        ,'origin'        : bits[2]\n        ,'publish_key'   : bits[3]\n        ,'subscribe_key' : bits[4]\n        ,'channel'       : bits[5]\n    };\n\n    // READY STATES\n    self['CONNECTING'] = 0; // The connection is not yet open.\n    self['OPEN']       = 1; // The connection is open and ready to communicate.\n    self['CLOSING']    = 2; // The connection is in the process of closing.\n    self['CLOSED']     = 3; // The connection is closed or couldn't be opened.\n\n    // CLOSE STATES\n    self['CLOSE_NORMAL']         = 1000; // Normal Intended Close; completed.\n    self['CLOSE_GOING_AWAY']     = 1001; // Closed Unexpecttedly.\n    self['CLOSE_PROTOCOL_ERROR'] = 1002; // Server: Not Supported.\n    self['CLOSE_UNSUPPORTED']    = 1003; // Server: Unsupported Protocol.\n    self['CLOSE_TOO_LARGE']      = 1004; // Server: Too Much Data.\n    self['CLOSE_NO_STATUS']      = 1005; // Server: No reason.\n    self['CLOSE_ABNORMAL']       = 1006; // Abnormal Disconnect.\n\n    // Events Default\n    self['onclose']   = self['onerror'] =\n    self['onmessage'] = self['onopen']  =\n    self['onsend']    =  function(){};\n\n    // Attributes\n    self['binaryType']     = '';\n    self['extensions']     = '';\n    self['bufferedAmount'] = 0;\n    self['trasnmitting']   = false;\n    self['buffer']         = [];\n    self['readyState']     = self['CONNECTING'];\n\n    // Close if no setup.\n    if (!url) {\n        self['readyState'] = self['CLOSED'];\n        self['onclose']({\n            'code'     : self['CLOSE_ABNORMAL'],\n            'reason'   : 'Missing URL',\n            'wasClean' : true\n        });\n        return self;\n    }\n\n    // PubNub WebSocket Emulation\n    self.pubnub       = PUBNUB['init'](setup);\n    self.pubnub.setup = setup;\n    self.setup        = setup;\n\n    self.pubnub['subscribe']({\n        'restore'    : false,\n        'channel'    : setup['channel'],\n        'disconnect' : self['onerror'],\n        'reconnect'  : self['onopen'],\n        'error'      : function() {\n            self['onclose']({\n                'code'     : self['CLOSE_ABNORMAL'],\n                'reason'   : 'Missing URL',\n                'wasClean' : false\n            });\n        },\n        'callback'   : function(message) {\n            self['onmessage']({ 'data' : message });\n        },\n        'connect'    : function() {\n            self['readyState'] = self['OPEN'];\n            self['onopen']();\n        }\n    });\n};\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET SEND\n// ---------------------------------------------------------------------------\nWS.prototype.send = function(data) {\n    var self = this;\n    self.pubnub['publish']({\n        'channel'  : self.pubnub.setup['channel'],\n        'message'  : data,\n        'callback' : function(response) {\n            self['onsend']({ 'data' : response });\n        }\n    });\n};\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET CLOSE\n// ---------------------------------------------------------------------------\nWS.prototype.close = function() {\n    var self = this;\n    self.pubnub['unsubscribe']({ 'channel' : self.pubnub.setup['channel'] });\n    self['readyState'] = self['CLOSED'];\n    self['onclose']({});\n};\n\n})();\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(h,s){var f={},g=f.lib={},q=function(){},m=g.Base={extend:function(a){q.prototype=this;var c=new q;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\nr=g.WordArray=m.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=s?c:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;a=a.sigBytes;this.clamp();if(b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((b+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\n32-8*(c%4);a.length=h.ceil(c/4)},clone:function(){var a=m.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new r.init(c,a)}}),l=f.enc={},k=l.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-8*(b%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,\n2),16)<<24-4*(b%8);return new r.init(d,c/2)}},n=l.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-8*(b%4)&255));return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(a.charCodeAt(b)&255)<<24-8*(b%4);return new r.init(d,c)}},j=l.Utf8={stringify:function(a){try{return decodeURIComponent(escape(n.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return n.parse(unescape(encodeURIComponent(a)))}},\nu=g.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=j.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;b=h.min(4*a,b);if(a){for(var g=0;g<a;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a);c.sigBytes-=b}return new r.init(g,b)},clone:function(){var a=m.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});g.Hasher=u.extend({cfg:m.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return(new a.init(d)).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return(new t.HMAC.init(a,\nd)).finalize(c)}}});var t=f.algo={};return f}(Math);\n\n// SHA256\n(function(h){for(var s=CryptoJS,f=s.lib,g=f.WordArray,q=f.Hasher,f=s.algo,m=[],r=[],l=function(a){return 4294967296*(a-(a|0))|0},k=2,n=0;64>n;){var j;a:{j=k;for(var u=h.sqrt(j),t=2;t<=u;t++)if(!(j%t)){j=!1;break a}j=!0}j&&(8>n&&(m[n]=l(h.pow(k,0.5))),r[n]=l(h.pow(k,1/3)),n++);k++}var a=[],f=f.SHA256=q.extend({_doReset:function(){this._hash=new g.init(m.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],g=b[2],j=b[3],h=b[4],m=b[5],n=b[6],q=b[7],p=0;64>p;p++){if(16>p)a[p]=\nc[d+p]|0;else{var k=a[p-15],l=a[p-2];a[p]=((k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3)+a[p-7]+((l<<15|l>>>17)^(l<<13|l>>>19)^l>>>10)+a[p-16]}k=q+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&m^~h&n)+r[p]+a[p];l=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&g^f&g);q=n;n=m;m=h;h=j+k|0;j=g;g=f;f=e;e=k+l|0}b[0]=b[0]+e|0;b[1]=b[1]+f|0;b[2]=b[2]+g|0;b[3]=b[3]+j|0;b[4]=b[4]+h|0;b[5]=b[5]+m|0;b[6]=b[6]+n|0;b[7]=b[7]+q|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;\nd[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=h.floor(b/4294967296);d[(e+64>>>9<<4)+15]=b;a.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var a=q.clone.call(this);a._hash=this._hash.clone();return a}});s.SHA256=q._createHelper(f);s.HmacSHA256=q._createHmacHelper(f)})(Math);\n\n// HMAC SHA256\n(function(){var h=CryptoJS,s=h.enc.Utf8;h.algo.HMAC=h.lib.Base.extend({init:function(f,g){f=this._hasher=new f.init;\"string\"==typeof g&&(g=s.parse(g));var h=f.blockSize,m=4*h;g.sigBytes>m&&(g=f.finalize(g));g.clamp();for(var r=this._oKey=g.clone(),l=this._iKey=g.clone(),k=r.words,n=l.words,j=0;j<h;j++)k[j]^=1549556828,n[j]^=909522486;r.sigBytes=l.sigBytes=m;this.reset()},reset:function(){var f=this._hasher;f.reset();f.update(this._iKey)},update:function(f){this._hasher.update(f);return this},finalize:function(f){var g=\nthis._hasher;f=g.finalize(f);g.reset();return g.finalize(this._oKey.clone().concat(f))}})})();\n\n// Base64\n(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join(\"\")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<\nl;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"}})();\n\n// BlockCipher\n(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},\n_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),\nf=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,\nm,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,\nE,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/\n4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);\n(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,\nl)}})();\n\n// Cipher\nCryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},\nfinalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return(\"string\"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return(\"string\"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=\nc[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,\ne,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,\nthis,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,\n1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},\ndecrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return\"string\"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,\nb.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();\n\n// AES\n(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,\n16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>\n8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=\nd[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();\n\n// Mode ECB\nCryptoJS.mode.ECB = (function () {\n    var ECB = CryptoJS.lib.BlockCipherMode.extend();\n\n    ECB.Encryptor = ECB.extend({\n        processBlock: function (words, offset) {\n            this._cipher.encryptBlock(words, offset);\n        }\n    });\n\n    ECB.Decryptor = ECB.extend({\n        processBlock: function (words, offset) {\n            this._cipher.decryptBlock(words, offset);\n        }\n    });\n\n    return ECB;\n}());// Moved to hmac-sha-256.js\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(42)(module)))\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(setImmediate) {(function(global){\n\n//\n// Check for native Promise and it has correct interface\n//\n\nvar NativePromise = global['Promise'];\nvar nativePromiseSupported =\n  NativePromise &&\n  // Some of these methods are missing from\n  // Firefox/Chrome experimental implementations\n  'resolve' in NativePromise &&\n  'reject' in NativePromise &&\n  'all' in NativePromise &&\n  'race' in NativePromise &&\n  // Older version of the spec had a resolver object\n  // as the arg rather than a function\n  (function(){\n    var resolve;\n    new NativePromise(function(r){ resolve = r; });\n    return typeof resolve === 'function';\n  })();\n\n\n//\n// export if necessary\n//\n\nif (typeof exports !== 'undefined' && exports)\n{\n  // node.js\n  exports.Promise = Promise || NativePromise;\n}\nelse\n{\n  // in browser add to global\n  if (!nativePromiseSupported)\n    global['Promise'] = Promise;\n}\n\n\n//\n// Polyfill\n//\n\nvar PENDING = 'pending';\nvar SEALED = 'sealed';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function(){};\n\n// async calls\nvar asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush(){\n  // run promise callbacks\n  for (var i = 0; i < asyncQueue.length; i++)\n    asyncQueue[i][0](asyncQueue[i][1]);\n\n  // reset async asyncQueue\n  asyncQueue = [];\n  asyncTimer = false;\n}\n\nfunction asyncCall(callback, arg){\n  asyncQueue.push([callback, arg]);\n\n  if (!asyncTimer)\n  {\n    asyncTimer = true;\n    asyncSetTimer(asyncFlush, 0);\n  }\n}\n\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch(e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber){\n  var owner = subscriber.owner;\n  var settled = owner.state_;\n  var value = owner.data_;  \n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function')\n  {\n    settled = FULFILLED;\n    try {\n      value = callback(value);\n    } catch(e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value))\n  {\n    if (settled === FULFILLED)\n      resolve(promise, value);\n\n    if (settled === REJECTED)\n      reject(promise, value);\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value)\n      throw new TypeError('A promises callback cannot return that same promise.');\n\n    if (value && (typeof value === 'function' || typeof value === 'object'))\n    {\n      var then = value.then;  // then should be retrived only once\n\n      if (typeof then === 'function')\n      {\n        then.call(value, function(val){\n          if (!resolved)\n          {\n            resolved = true;\n\n            if (value !== val)\n              resolve(promise, val);\n            else\n              fulfill(promise, val);\n          }\n        }, function(reason){\n          if (!resolved)\n          {\n            resolved = true;\n\n            reject(promise, reason);\n          }\n        });\n\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved)\n      reject(promise, e);\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value){\n  if (promise === value || !handleThenable(promise, value))\n    fulfill(promise, value);\n}\n\nfunction fulfill(promise, value){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = value;\n\n    asyncCall(publishFulfillment, promise);\n  }\n}\n\nfunction reject(promise, reason){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = reason;\n\n    asyncCall(publishRejection, promise);\n  }\n}\n\nfunction publish(promise) {\n  promise.then_ = promise.then_.forEach(invokeCallback);\n}\n\nfunction publishFulfillment(promise){\n  promise.state_ = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise){\n  promise.state_ = REJECTED;\n  publish(promise);\n}\n\n/**\n* @class\n*/\nfunction Promise(resolver){\n  if (typeof resolver !== 'function')\n    throw new TypeError('Promise constructor takes a function argument');\n\n  if (this instanceof Promise === false)\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\n  this.then_ = [];\n\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n\n  state_: PENDING,\n  then_: null,\n  data_: undefined,\n\n  then: function(onFulfillment, onRejection){\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if (this.state_ === FULFILLED || this.state_ === REJECTED)\n    {\n      // already resolved, call callback async\n      asyncCall(invokeCallback, subscriber);\n    }\n    else\n    {\n      // subscribe\n      this.then_.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n\n  'catch': function(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function(promises){\n  var Class = this;\n\n  if (!Array.isArray(promises))\n    throw new TypeError('You must pass an array to Promise.all().');\n\n  return new Class(function(resolve, reject){\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index){\n      remaining++;\n      return function(value){\n        results[index] = value;\n        if (!--remaining)\n          resolve(results);\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolver(i), reject);\n      else\n        results[i] = promise;\n    }\n\n    if (!remaining)\n      resolve(results);\n  });\n};\n\nPromise.race = function(promises){\n  var Class = this;\n\n  if (!Array.isArray(promises))\n    throw new TypeError('You must pass an array to Promise.race().');\n\n  return new Class(function(resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolve, reject);\n      else\n        resolve(promise);\n    }\n  });\n};\n\nPromise.resolve = function(value){\n  var Class = this;\n\n  if (value && typeof value === 'object' && value.constructor === Class)\n    return value;\n\n  return new Class(function(resolve){\n    resolve(value);\n  });\n};\n\nPromise.reject = function(reason){\n  var Class = this;\n\n  return new Class(function(resolve, reject){\n    reject(reason);\n  });\n};\n\n})(new Function('return this')());\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(43).setImmediate))\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar h = __webpack_require__(44);\nvar ajaxObserver = __webpack_require__(6);\nvar r = __webpack_require__(45);\n/**\n * TODO @see https://github.com/github/fetch/blob/master/fetch.js\n */\nvar Request = (function (_super) {\n    __extends(Request, _super);\n    function Request(context) {\n        _super.call(this, context);\n        this.async = true;\n        this.method = '';\n        this.url = '';\n        this.query = null;\n        this.body = {};\n        this.context = context;\n        this.xhr = null;\n        this.observer = ajaxObserver.$get(context);\n    }\n    Request.prototype.isLoaded = function () {\n        return !!this.xhr;\n    };\n    Request.prototype.setOptions = function (options) {\n        options = options || {};\n        // backwards compatibility\n        if (!('body' in options) && options.post)\n            options.body = options.post;\n        if (!('query' in options) && options.get)\n            options.query = options.get;\n        if ('method' in options)\n            this.method = options.method;\n        if ('url' in options)\n            this.url = options.url;\n        if ('query' in options)\n            this.query = options.query;\n        if ('body' in options)\n            this.body = options.body;\n        if ('headers' in options)\n            this.setHeaders(options.headers);\n        if ('async' in options)\n            this.async = !!options.async;\n        return this;\n    };\n    /**\n     * Checks the send options, defaulting various of the options,\n     * and consuming / transforming some of the options (like get).\n     */\n    Request.prototype.checkOptions = function () {\n        if (!this.url)\n            throw new Error('Url is not defined');\n        if (!this.hasHeader('Accept'))\n            this.setHeader('Accept', h.Headers.jsonContentType);\n        if (!this.hasHeader('Content-Type'))\n            this.setHeader('Content-Type', h.Headers.jsonContentType);\n        this.method = this.method ? this.method.toUpperCase() : 'GET';\n        if (['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'OPTIONS', 'HEAD'].indexOf(this.method) < 0)\n            throw new Error('Method has wrong value');\n        return this;\n    };\n    Request.prototype.getEncodedBody = function () {\n        if (this.method === 'GET')\n            return null;\n        if (typeof this.body === 'string') {\n            return this.body;\n        }\n        else if (this.isJson()) {\n            return JSON.stringify(this.body);\n        }\n        else if (this.isUrlEncoded()) {\n            return this.utils.queryStringify(this.body);\n        }\n        else {\n            return this.body;\n        }\n    };\n    Request.prototype.send = function () {\n        var _this = this;\n        this.observer.emit(this.observer.events.beforeRequest, this);\n        var responsePromise = new (this.context.getPromise())(function (resolve, reject) {\n            _this.checkOptions();\n            var xhr = _this.getXHR(), url = _this.url + (!!_this.query ? ((_this.url.indexOf('?') > -1 ? '&' : '?') + _this.utils.queryStringify(_this.query)) : '');\n            xhr.open(_this.method, url, _this.async);\n            //@see http://stackoverflow.com/questions/19666809/cors-withcredentials-support-limited\n            xhr.withCredentials = true;\n            xhr.onload = function () {\n                //TODO http://jira.ringcentral.com/browse/PLA-10585\n                var response = r.$get(_this.context, xhr.status, xhr.statusText, xhr.responseText, xhr.getAllResponseHeaders());\n                if (response.error) {\n                    var e = response.error;\n                    e.ajax = response; // backwards compatibility\n                    e.response = response; //FIXME Circular\n                    e.request = _this;\n                    reject(e);\n                }\n                else {\n                    resolve(response);\n                }\n            };\n            xhr.onerror = function (event) {\n                var e = new Error('The request cannot be sent' + (event ? ' (' + event.toString() + ')' : ''));\n                e.request = _this;\n                e.response = null;\n                e.ajax = null; // backwards compatibility\n                reject(e);\n            };\n            _this.utils.forEach(_this.headers, function (value, header) {\n                if (!!value)\n                    xhr.setRequestHeader(header, value);\n            });\n            xhr.send(_this.getEncodedBody());\n            _this.xhr = xhr;\n        });\n        return responsePromise.then(function (response) {\n            _this.observer.emit(_this.observer.events.requestSuccess, response, _this);\n            return response;\n        }).catch(function (e) {\n            _this.observer.emit(_this.observer.events.requestError, e);\n            throw e;\n        });\n    };\n    Request.prototype.getXHR = function () {\n        return this.context.getXHR();\n    };\n    Request.prototype.destroy = function () {\n        if (this.xhr)\n            this.xhr.abort();\n    };\n    return Request;\n})(h.Headers);\nexports.Request = Request;\nfunction $get(context) {\n    return new Request(context);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\nmodule.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(setImmediate, clearImmediate) {var nextTick = __webpack_require__(46).nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(43).setImmediate, __webpack_require__(43).clearImmediate))\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../../typings/externals.d.ts\" />\nvar utils = __webpack_require__(16);\n/**\n * @see https://github.com/Microsoft/TypeScript/issues/275\n */\nvar Headers = (function () {\n    function Headers(context) {\n        this.headers = {};\n        this.context = context;\n        this.utils = utils.$get(context);\n    }\n    Headers.prototype.setHeader = function (name, value) {\n        this.headers[name.toLowerCase()] = value;\n        return this;\n    };\n    Headers.prototype.getHeader = function (name) {\n        return this.headers[name.toLowerCase()];\n    };\n    Headers.prototype.hasHeader = function (name) {\n        return (name.toLowerCase() in this.headers);\n    };\n    Headers.prototype.setHeaders = function (headers) {\n        var _this = this;\n        this.utils.forEach(headers, function (value, name) {\n            _this.setHeader(name, value);\n        });\n        return this;\n    };\n    Headers.prototype.isContentType = function (contentType) {\n        return this.getContentType().indexOf(contentType) > -1;\n    };\n    Headers.prototype.setContentType = function (contentType) {\n        this.setHeader(Headers.contentType, contentType);\n        return this;\n    };\n    Headers.prototype.getContentType = function () {\n        return this.getHeader(Headers.contentType) || '';\n    };\n    Headers.prototype.isMultipart = function () {\n        return this.isContentType(Headers.multipartContentType);\n    };\n    Headers.prototype.isUrlEncoded = function () {\n        return this.isContentType(Headers.urlencodedContentType);\n    };\n    Headers.prototype.isJson = function () {\n        return this.isContentType(Headers.jsonContentType);\n    };\n    Headers.contentType = 'Content-Type';\n    Headers.jsonContentType = 'application/json';\n    Headers.multipartContentType = 'multipart/mixed';\n    Headers.urlencodedContentType = 'application/x-www-form-urlencoded';\n    return Headers;\n})();\nexports.Headers = Headers;\n\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n/// <reference path=\"../../../typings/externals.d.ts\" />\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar h = __webpack_require__(44);\nvar log = __webpack_require__(11);\nvar Response = (function (_super) {\n    __extends(Response, _super);\n    function Response(context, status, statusText, body, headers) {\n        var _this = this;\n        _super.call(this, context);\n        this.log = log.$get(context);\n        if (typeof (body) === 'string') {\n            body = body.replace(/\\r/g, '');\n            if (!headers) {\n                var tmp = body.split(Response.bodySeparator);\n                headers = (tmp.length > 1) ? tmp.shift() : {};\n                body = tmp.join(Response.bodySeparator);\n            }\n        }\n        /** @type {Response[]|object} */\n        this.data = null;\n        /** @type {object} */\n        this.json = null;\n        /** @type {Response[]} */\n        this.responses = [];\n        /** @type {Error} */\n        this.error = null;\n        //@see http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n        if (status == 1223)\n            status = 204;\n        this.status = status;\n        this.statusText = statusText;\n        this.body = body;\n        try {\n            // Step 1. Parse headers\n            if (typeof (headers) === 'string') {\n                (headers || '').split('\\n').forEach(function (header) {\n                    if (!header)\n                        return;\n                    var parts = header.split(Response.headerSeparator), name = parts.shift().trim();\n                    _this.setHeader(name, parts.join(Response.headerSeparator).trim());\n                });\n            }\n            else {\n                this.setHeaders(headers);\n            }\n            // Step 1.1. JEDI proxy sometimes may omit Content-Type header\n            if (!this.hasHeader(h.Headers.contentType))\n                this.setHeader(h.Headers.contentType, h.Headers.jsonContentType);\n            // Step 2. Parse body\n            if (this.isJson() && !!this.body && typeof (this.body) === 'string') {\n                this.json = JSON.parse(this.body);\n                this.data = this.json; // backwards compatibility\n                if (!this.checkStatus())\n                    this.error = new Error(this.getError());\n            }\n            else if (this.isMultipart()) {\n                // Step 2.1. Split multipart response\n                var boundary = this.getContentType().match(/boundary=([^;]+)/i)[1], parts = this.body.split(Response.boundarySeparator + boundary);\n                if (parts[0].trim() === '')\n                    parts.shift();\n                if (parts[parts.length - 1].trim() == Response.boundarySeparator)\n                    parts.pop();\n                // Step 2.2. Parse status info\n                var statusInfo = new Response(this.context, this.status, '', parts.shift());\n                // Step 2.3. Parse all other parts\n                this.responses = parts.map(function (part, i) {\n                    var status = statusInfo.data.response[i].status;\n                    return new Response(_this.context, status, '', part);\n                });\n                this.data = this.responses; // backwards compatibility\n            }\n            else {\n                this.data = this.body;\n            }\n        }\n        catch (e) {\n            this.log.error('Response.parseResponse(): Unable to parse data');\n            this.log.error(e.stack || e);\n            this.log.error(this.body);\n            this.error = e;\n        }\n    }\n    /**\n     * @returns {boolean}\n     */\n    Response.prototype.isUnauthorized = function () {\n        return (this.status == 401);\n    };\n    Response.prototype.checkStatus = function () {\n        return this.status >= 200 && this.status < 300;\n    };\n    Response.prototype.getError = function () {\n        return this.data.message || this.data.error_description || this.data.description || 'Unknown error';\n    };\n    Response.boundarySeparator = '--';\n    Response.headerSeparator = ':';\n    Response.bodySeparator = '\\n\\n';\n    return Response;\n})(h.Headers);\nexports.Response = Response;\nfunction $get(context, status, statusText, body, headers) {\n    return new Response(context, status, statusText, body, headers);\n}\nexports.$get = $get;\n\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=rc-sdk-bundle.js.map"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f951bff4dc3d147053a1\n **/","/// <reference path=\"../typings/externals.d.ts\" />\n\ndeclare\nvar require:(name:string)=>any;\n\nimport headers = require('./core/http/Headers');\nimport request = require('./core/http/Request');\nimport response = require('./core/http/Response');\nimport pubnubMock = require('./core/pubnub/PubnubMock');\nimport xhrMock = require('./core/xhr/XhrMock');\nimport xhrResponse = require('./core/xhr/XhrResponse');\nimport ajaxObserver = require('./core/AjaxObserver');\nimport cache = require('./core/Cache');\nimport context = require('./core/Context');\nimport helper = require('./core/Helper');\nimport list = require('./core/List');\nimport log = require('./core/Log');\nimport observable = require('./core/Observable');\nimport pageVisibility = require('./core/PageVisibility');\nimport platform = require('./core/Platform');\nimport subscription = require('./core/Subscription');\nimport utils = require('./core/Utils');\nimport validator = require('./core/Validator');\n\nimport accountHelper = require('./helpers/Account');\nimport blockedNumberHelper = require('./helpers/BlockedNumber');\nimport callHelper = require('./helpers/Call');\nimport contactHelper = require('./helpers/Contact');\nimport contactGroupHelper = require('./helpers/ContactGroup');\nimport conferencingHelper = require('./helpers/Conferencing');\nimport countryHelper = require('./helpers/Country');\nimport deviceHelper = require('./helpers/Device');\nimport deviceModelHelper = require('./helpers/DeviceModel');\nimport extensionHelper = require('./helpers/Extension');\nimport forwardingNumberHelper = require('./helpers/ForwardingNumber');\nimport languageHelper = require('./helpers/Language');\nimport locationHelper = require('./helpers/Location');\nimport messageHelper = require('./helpers/Message');\nimport phoneNumberHelper = require('./helpers/PhoneNumber');\nimport presenceHelper = require('./helpers/Presence');\nimport ringoutHelper = require('./helpers/Ringout');\nimport serviceHelper = require('./helpers/Service');\nimport shippingMethodHelper = require('./helpers/ShippingMethod');\nimport stateHelper = require('./helpers/State');\nimport timezoneHelper = require('./helpers/Timezone');\n\nimport promise = require('es6-promise');\nimport pubnub = require('pubnub');\n\nclass RCSDK {\n\n    public static version = '1.3.0';\n\n    public static url = {\n        sandbox: 'https://platform.devtest.ringcentral.com',\n        production: 'https://platform.ringcentral.com'\n    };\n\n    private static injections = <context.IInjections>{\n        localStorage: (typeof(localStorage) !== 'undefined'\n            ? localStorage\n            : require('dom-' + 'storage')), // Node only\n        Promise: typeof(Promise) !== 'undefined' ? Promise : promise.Promise,\n        PUBNUB: pubnub,\n        XHR: () => {\n            try { return new XMLHttpRequest(); } catch (e) {}\n            try { return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\"); } catch (e1) {}\n            try { return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\"); } catch (e2) {}\n            try { return new ActiveXObject(\"Msxml2.XMLHTTP\"); } catch (e3) {}\n            try { return new (require('xhr' + '2'))(); } catch (e4) {} // Node only\n            throw new Error(\"This browser does not support XMLHttpRequest.\");\n        },\n        pubnubMock: pubnubMock,\n        xhrMock: xhrMock\n    };\n\n    private _context:context.Context;\n\n    constructor(options?:{\n        server:string;\n        appKey:string;\n        appSecret:string;\n        cachePrefix?:string;\n    }) {\n\n        options = options || <any>{};\n\n        this._context = context.$get(RCSDK.injections);\n\n        this.getCache()\n            .setPrefix(options.cachePrefix || '');\n\n        this.getPlatform()\n            .setServer(options.server || '')\n            .setCredentials(options.appKey || '', options.appSecret || '');\n\n        //TODO Link Platform events with Subscriptions and the rest\n\n    }\n\n    // Internals\n\n    getContext() { return this._context; }\n\n    // Core\n\n    getAjaxObserver() { return ajaxObserver.$get(this.getContext()); }\n\n    getXhrResponse() { return xhrResponse.$get(this.getContext()); }\n\n    getPlatform() { return platform.$get(this.getContext()); }\n\n    getCache() { return cache.$get(this.getContext()); }\n\n    getSubscription() { return subscription.$get(this.getContext()); }\n\n    getPageVisibility() { return pageVisibility.$get(this.getContext()); }\n\n    getHelper() { return helper.$get(this.getContext()); }\n\n    getObservable() { return observable.$get(this.getContext()); }\n\n    getValidator() { return validator.$get(this.getContext()); }\n\n    getLog() { return log.$get(this.getContext()); }\n\n    getUtils() { return utils.$get(this.getContext()); }\n\n    getList() { return list.$get(this.getContext()); }\n\n    // Helpers\n\n    getCountryHelper() { return countryHelper.$get(this.getContext()); }\n\n    getDeviceModelHelper() { return deviceModelHelper.$get(this.getContext()); }\n\n    getLanguageHelper() { return languageHelper.$get(this.getContext()); }\n\n    getLocationHelper() { return locationHelper.$get(this.getContext()); }\n\n    getShippingMethodHelper() { return shippingMethodHelper.$get(this.getContext()); }\n\n    getStateHelper() { return stateHelper.$get(this.getContext()); }\n\n    getTimezoneHelper() { return timezoneHelper.$get(this.getContext()); }\n\n    getAccountHelper() { return accountHelper.$get(this.getContext()); }\n\n    getBlockedNumberHelper() { return blockedNumberHelper.$get(this.getContext()); }\n\n    getCallHelper() { return callHelper.$get(this.getContext()); }\n\n    getConferencingHelper() { return conferencingHelper.$get(this.getContext()); }\n\n    getContactHelper() { return contactHelper.$get(this.getContext()); }\n\n    getContactGroupHelper() { return contactGroupHelper.$get(this.getContext()); }\n\n    getDeviceHelper() { return deviceHelper.$get(this.getContext()); }\n\n    getExtensionHelper() { return extensionHelper.$get(this.getContext()); }\n\n    getForwardingNumberHelper() { return forwardingNumberHelper.$get(this.getContext()); }\n\n    getMessageHelper() { return messageHelper.$get(this.getContext()); }\n\n    getPhoneNumberHelper() { return phoneNumberHelper.$get(this.getContext()); }\n\n    getPresenceHelper() { return presenceHelper.$get(this.getContext()); }\n\n    getRingoutHelper() { return ringoutHelper.$get(this.getContext()); }\n\n    getServiceHelper() { return serviceHelper.$get(this.getContext()); }\n\n}\n\nexport = RCSDK;\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/RCSDK.ts\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"exports\",\"commonjs\":\"dom-storage\",\"commonjs2\":\"dom-storage\",\"root\":\"localStorage\"}\n ** module id = 1\n ** module chunks = 0\n **/","if(typeof __WEBPACK_EXTERNAL_MODULE_2__ === 'undefined') {var e = new Error(\"Cannot find module \\\"undefined\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e;}\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"amd\":\"exports\",\"commonjs\":\"xhr2\",\"commonjs2\":\"xhr2\",\"root\":\"XMLHttpRequest\"}\n ** module id = 2\n ** module chunks = 0\n **/","/// <reference path=\"../../../typings/externals.d.ts\" />\n\nimport context = require('../Context');\nimport observable = require('../Observable')\n\nexport class PubnubMock extends observable.Observable<PubnubMock> implements PUBNUB.PubnubInstance {\n\n    private options:PUBNUB.InitOptions;\n    public crypto_obj:PUBNUB.CryptoObj;\n\n    constructor(context, options:PUBNUB.InitOptions) {\n        this.options = options;\n        this.crypto_obj = context.getPubnubReal().crypto_obj;\n        super(context);\n    }\n\n    ready() {}\n\n    subscribe(options:PUBNUB.SubscribeOptions) {\n        this.on('message-' + options.channel, options.message);\n    }\n\n    unsubscribe(options:PUBNUB.UnsubscribeOptions) {\n        this.off('message-' + options.channel);\n    }\n\n    receiveMessage(msg, channel) {\n        this.emit('message-' + channel, msg, 'env', channel);\n    }\n\n}\n\nexport class PubnubFactory implements PUBNUB.PUBNUB {\n\n    context:context.Context;\n    crypto_obj:PUBNUB.CryptoObj;\n\n    constructor(context:context.Context) {\n        this.context = context;\n        this.crypto_obj = context.getPubnubReal().crypto_obj;\n    }\n\n    init(options:PUBNUB.InitOptions) {\n        return new PubnubMock(this.context, options);\n    }\n\n}\n\nexport function $get(context:context.Context):PubnubFactory {\n    return new PubnubFactory(context);\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/pubnub/PubnubMock.ts\n **/","import context = require('../Context');\nimport utils = require('../Utils');\nimport log = require('../Log');\nimport xhrResponse = require('./XhrResponse'); //FIXME Circular\n\nexport class XhrMock {\n\n    // Service\n    private context:context.Context;\n    private log:log.Log;\n    private utils:utils.Utils;\n    private responses:xhrResponse.XhrResponse;\n\n    // Request\n    public async:boolean;\n    public method:string;\n    public url:string;\n    public requestHeaders:any;\n    public withCredentials:boolean;\n    public onload:()=>any;\n    public onerror:(e:Error)=>any;\n\n    // Response\n    public data:any;\n    public readyState:number;\n    public responseHeaders:any;\n    public responseText:string;\n    public status:number;\n\n    constructor(context:context.Context) {\n\n        // Service\n        this.context = context;\n        this.responses = xhrResponse.$get(context);\n        this.log = log.$get(context);\n        this.utils = utils.$get(context);\n\n        // Request\n        this.async = true;\n        this.method = '';\n        this.url = '';\n        this.requestHeaders = {};\n        this.withCredentials = false;\n\n        // Response\n        this.data = null;\n        this.readyState = 0;\n        this.responseHeaders = {};\n        this.status = 0;\n\n    }\n\n    getResponseHeader(header:string) {\n        return this.responseHeaders[header.toLowerCase()];\n    }\n\n    setRequestHeader(header:string, value:string) {\n        this.requestHeaders[header.toLowerCase()] = value;\n    }\n\n    getAllResponseHeaders() {\n        var res = [];\n        this.utils.forEach(this.responseHeaders, (value:string, name:string) => {\n            res.push(name + ':' + value);\n        });\n        return res.join('\\n');\n    }\n\n    open(method:string, url:string, async?:boolean) {\n        this.method = method;\n        this.url = url;\n        this.async = async;\n    }\n\n    send(data:any) {\n\n        var contentType = this.getRequestHeader('Content-Type');\n\n        this.data = data;\n\n        if (this.data && typeof this.data == 'string') {\n            // For convenience encoded post data will be decoded\n            if (contentType == 'application/json') this.data = JSON.parse(this.data);\n            if (contentType == 'application/x-www-form-urlencoded') this.data = this.utils.parseQueryString(this.data);\n        }\n\n        this.log.debug('API REQUEST', this.method, this.url);\n\n        var currentResponse = this.responses.find(this);\n\n        if (!currentResponse) {\n            setTimeout(() => {\n                if (this.onerror) this.onerror(new Error('Unknown request: ' + this.url));\n            }, 1);\n            return;\n        }\n\n        this.setStatus(200);\n        this.setResponseHeader('Content-Type', 'application/json');\n\n        var res = currentResponse.response(this),\n            Promise = this.context.getPromise(),\n            onLoad = (res) => {\n\n                if (this.getResponseHeader('Content-Type') == 'application/json') res = JSON.stringify(res);\n\n                this.responseText = res;\n\n                setTimeout(() => {\n                    if (this.onload) this.onload();\n                }, 1);\n\n            };\n\n        if (res instanceof Promise) {\n\n            res.then(onLoad.bind(this)).catch(this.onerror.bind(this));\n\n        } else onLoad(res);\n\n    }\n\n    abort() {\n        this.log.debug('XhrMock.destroy(): Aborted');\n    }\n\n    getRequestHeader(header:string) {\n        return this.requestHeaders[header.toLowerCase()];\n    }\n\n    setResponseHeader(header:string, value:string) {\n        this.responseHeaders[header.toLowerCase()] = value;\n    }\n\n    setStatus(status) {\n        this.status = status;\n        return this;\n    }\n\n}\n\nexport function $get(context:context.Context):XhrMock {\n    return new XhrMock(context);\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/xhr/XhrMock.ts\n **/","import context = require('../Context');\nimport r = require('../http/Response');\nimport xhrMock = require('./XhrMock'); //FIXME Circular\n\nexport class XhrResponse {\n\n    private responses:IXhrResponse[];\n\n    constructor(context:context.Context) {\n        this.responses = [];\n    }\n\n    add(response:any) {\n        this.responses.push(response);\n    }\n\n    clear() {\n        this.responses = [];\n    }\n\n    find(ajax:xhrMock.XhrMock):IXhrResponse {\n\n        var currentResponse:IXhrResponse = null;\n\n        this.responses.forEach((response:IXhrResponse) => {\n\n            if (ajax.url.indexOf(response.path) > -1 && (!response.test || response.test(ajax))) {\n                currentResponse = response;\n            }\n\n        });\n\n        return currentResponse;\n\n    }\n}\n\nexport interface IXhrResponse {\n    path?:string;\n    response?:(xhr?:xhrMock.XhrMock)=>Promise<r.Response>;\n    test?:(xhr:xhrMock.XhrMock)=>boolean;\n}\n\nexport function $get(context:context.Context):XhrResponse {\n    return context.createSingleton('XhrResponse', ()=> {\n        return new XhrResponse(context);\n    });\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/xhr/XhrResponse.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport observable = require('./Observable');\nimport context = require('./Context');\n\nexport class AjaxObserver extends observable.Observable<AjaxObserver> {\n\n    public events = {\n        beforeRequest: 'beforeRequest', // parameters: ajax\n        requestSuccess: 'requestSuccess', // means that response was successfully fetched from server\n        requestError: 'requestError' // means that request failed completely\n    };\n\n}\n\nexport function $get(context:context.Context):AjaxObserver {\n\n    return context.createSingleton('AjaxObserver', ()=> {\n        return new AjaxObserver(context);\n    });\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/AjaxObserver.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('./Context');\n\nexport class Cache {\n\n    private context:context.Context;\n    private storage:Storage;\n    private prefix:string;\n\n    constructor(context:context.Context) {\n        this.setPrefix();\n        this.context = context;\n        this.storage = context.getLocalStorage(); // storage must be defined from outside\n    }\n\n    setPrefix(prefix?:string) {\n        this.prefix = prefix || 'rc-';\n        return this;\n    }\n\n    prefixKey(key) {\n        return this.prefix + key;\n    }\n\n    setItem(key, data) {\n        this.storage.setItem(this.prefixKey(key), JSON.stringify(data));\n        return this;\n    }\n\n    removeItem(key) {\n        this.storage.removeItem(this.prefixKey(key));\n        return this;\n    }\n\n    getItem(key) {\n        var item = this.storage.getItem(this.prefixKey(key));\n        if (!item) return null;\n        return JSON.parse(item);\n    }\n\n    clean() {\n\n        for (var key in this.storage) {\n            if (!this.storage.hasOwnProperty(key)) continue;\n            if (key.indexOf(this.prefix) === 0) {\n                this.storage.removeItem(key);\n                delete this.storage[key];\n            }\n        }\n\n        return this;\n\n    }\n\n}\n\nexport function $get(context:context.Context):Cache {\n    return context.createSingleton('Cache', ()=> {\n        return new Cache(context);\n    });\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Cache.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nexport class Context {\n\n    private singletons:ISingletons;\n    private injections:IInjections;\n    private stubPubnub:boolean;\n    private stubAjax:boolean;\n\n    constructor(injections:IInjections) {\n        this.singletons = {};\n        this.injections = injections;\n        this.stubPubnub = false;\n        this.stubAjax = false;\n    }\n\n    createSingleton(name:string, factory:()=>any) {\n\n        if (!this.singletons[name]) this.singletons[name] = factory();\n        return this.singletons[name];\n\n    }\n\n    usePubnubStub(flag:boolean) {\n        this.stubPubnub = !!flag;\n        return this;\n    }\n\n    useAjaxStub(flag:boolean) {\n        this.stubAjax = !!flag;\n        return this;\n    }\n\n    getPubnub():PUBNUB.PUBNUB {\n        return this.stubPubnub ? this.injections.pubnubMock.$get(this) : this.getPubnubReal();\n    }\n\n    getPubnubReal():PUBNUB.PUBNUB {\n        return this.injections.PUBNUB;\n    }\n\n    getLocalStorage():Storage {\n\n        return this.createSingleton('localStorage', () => {\n\n            if (typeof this.injections.localStorage !== 'function') {\n                return this.injections.localStorage; // this is window.localStorage\n            }\n\n            return new (<any> this.injections.localStorage)(); // this is NPM dom-storage constructor\n\n        });\n\n    }\n\n    getPromise():typeof Promise {\n        return this.injections.Promise;\n    }\n\n    getXHR():XMLHttpRequest {\n        return <XMLHttpRequest>(this.stubAjax ? this.injections.xhrMock.$get(this) : (<any>this.injections.XHR)());\n    }\n\n}\n\nexport function $get(injections:IInjections) {\n    return new Context(injections);\n}\n\nexport interface ISingletons {\n    [name: string]: any;\n}\n\nexport interface IInjections {\n    pubnubMock:any;\n    xhrMock:any;\n    PUBNUB:any;\n    localStorage:any;\n    XHR:any;\n    Promise:any;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Context.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport utils = require('./Utils');\nimport context = require('./Context');\nimport request = require('./http/Request');\nimport response = require('./http/Response');\n\nexport class Helper {\n\n    protected defaultProperty:string = 'id';\n\n    protected context:context.Context;\n    protected utils:utils.Utils;\n\n    constructor(context:context.Context) {\n\n        this.context = context;\n        this.utils = utils.$get(context);\n\n    }\n\n    getContext() {\n        return this.context;\n    }\n\n    createUrl(options?:any, id?:string) {\n        return '';\n    }\n\n    getId(object:IHelperObject) {\n        return object && object[this.defaultProperty];\n    }\n\n    isNew(object:IHelperObject) {\n        return !this.getId(object) || !this.getUri(object);\n    }\n\n    resetAsNew(object:IHelperObject) {\n        if (object) {\n            delete object.id;\n            delete object.uri;\n        }\n        return object;\n    }\n\n    getUri(object:IHelperObject) {\n        return object && object.uri;\n    }\n\n    parseMultipartResponse(ajax:response.Response) {\n\n        if (ajax.isMultipart()) {\n\n            // ajax.data has full array, leave only successful\n            return ajax.data.filter((result) => {\n                return (!result.error);\n            }).map((result:response.Response) => {\n                return result.data;\n            });\n\n        } else { // Single ID\n\n            return [ajax.data];\n\n        }\n\n    }\n\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided, default will be returned\n     */\n    loadRequest(object?, options?:request.IAjaxOptions):request.IAjaxOptions {\n\n        return this.utils.extend(options || {}, {\n            url: (options && options.url) || (object && this.getUri(object)) || this.createUrl(),\n            method: (options && options.method) || 'GET'\n        });\n\n    }\n\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided, default will be returned\n     */\n    saveRequest(object?, options?:request.IAjaxOptions):request.IAjaxOptions {\n\n        if (!object && !(options && (options.post || options.body))) throw new Error('No Object');\n\n        return this.utils.extend(options || {}, {\n            method: (options && options.method) || (this.isNew(object) ? 'POST' : 'PUT'),\n            url: (options && options.url) || this.getUri(object) || this.createUrl(),\n            body: (options && (options.body || options.post)) || object\n        });\n\n    }\n\n    /**\n     * Options have higher priority, if object.url and options.url were provided, options.url will be returned\n     * If no URL was provided exception will be thrown\n     */\n    deleteRequest(object?, options?:request.IAjaxOptions):request.IAjaxOptions {\n\n        options = options || {};\n\n        if (!this.getUri(object) && !(options && options.url)) throw new Error('Object has to be not new or URL must be provided');\n\n        return this.utils.extend(options || {}, {\n            method: (options && options.method) || 'DELETE',\n            url: (options && options.url) || this.getUri(object)\n        });\n\n    }\n\n    /**\n     * If no url was provided, default SYNC url will be returned\n     */\n    syncRequest(options?:request.IAjaxOptions):request.IAjaxOptions {\n\n        options = options || {};\n\n        options.url = options.url || this.createUrl({sync: true});\n        options.query = options.query || options.get || {};\n\n        if (!!options.query.syncToken) {\n            options.query = {\n                syncType: 'ISync',\n                syncToken: options.get.syncToken\n            };\n        } else {\n            options.query.syncType = 'FSync';\n        }\n\n        return options;\n\n    }\n\n    nextPageExists(data):boolean {\n\n        return (data && data.navigation && ('nextPage' in data.navigation));\n\n    }\n\n    /**\n     * array - an array to be indexed\n     * getIdFn - must return an ID for each array item\n     * gather - if true, then each index will have an array of items, that has same ID, otherwise the first indexed\n     * item wins\n     */\n    index(array:IHelperObject[], getIdFn?:(obj:IHelperObject)=>string, gather?:boolean):any {\n\n        getIdFn = getIdFn || this.getId.bind(this);\n        array = array || [];\n\n        return array.reduce((index, item) => {\n\n            var id = getIdFn(item);\n\n            if (!id || (index[id] && !gather)) return index;\n\n            if (gather) {\n                if (!index[id]) index[id] = [];\n                index[id].push(item);\n            } else {\n                index[id] = item;\n            }\n\n            return index;\n\n        }, {});\n\n    }\n\n    /**\n     * Returns a shallow copy of merged _target_ array plus _supplement_ array\n     * mergeItems\n     * - if true, properties of _supplement_ item will be applied to _target_ item,\n     * - otherwise _target_ item will be replaced\n     */\n    merge(target:IHelperObject[],\n          supplement:IHelperObject[],\n          getIdFn?:(obj:IHelperObject)=>string, mergeItems?:boolean):any {\n\n        getIdFn = getIdFn || this.getId.bind(this);\n        target = target || [];\n        supplement = supplement || [];\n\n        var supplementIndex = this.index(supplement, getIdFn),\n            updatedIDs = [],\n            result = <IHelperObject[]>target.map((item) => {\n\n                var id = getIdFn(item),\n                    newItem = supplementIndex[id];\n\n                if (newItem) updatedIDs.push(id);\n\n                return newItem ? (mergeItems ? this.utils.extend(item, newItem) : newItem) : item;\n\n            });\n\n        supplement.forEach((item) => {\n\n            if (updatedIDs.indexOf(getIdFn(item)) == -1) result.push(item);\n\n        });\n\n        return result;\n\n    }\n\n\n}\n\nexport function $get(context:context.Context):Helper {\n    return new Helper(context);\n}\n\nexport interface IHelperObject {\n    id?:string;\n    uri?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Helper.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport utils = require('./Utils');\nimport context = require('./Context');\n\nexport class List {\n\n    protected context:context.Context;\n    protected utils:utils.Utils;\n\n    constructor(context:context.Context) {\n        this.context = context;\n        this.utils = utils.$get(context);\n        this.numberComparator = this.numberComparator.bind(this);\n        this.stringComparator = this.stringComparator.bind(this);\n    }\n\n    /**\n     * TODO Use utils getProperty\n     * @param {string} property\n     * @returns {function(object)}\n     */\n    propertyExtractor(property) {\n        return (item, options) => {\n            return property ? ((item && item[property]) || null) : item;\n        };\n    }\n\n    /**\n     * Non-string types are converted to string\n     * Non-string types are extracted as an empty string if they could be converted to false\n     * If no options.sortBy given the item itself is extracted\n     * Compares strings:\n     * - if (a is less than b) return -1;\n     * - if (a is greater than b) return 1;\n     * - else (a must be equal to b) return 0;\n     * Exceptions in will be suppressed, if any - a is assumed to be less than b\n     */\n    stringComparator(a:string, b:string, options?:IListComparatorOptions):number {\n\n        return this.utils.parseString(a).localeCompare(this.utils.parseString(b));\n\n    }\n\n    /**\n     * Non-numeric types are extracted as 0 if they could be converted to false\n     * Objects that could not be converted to number are extracted as 0\n     * If no options.sortBy given the item itself is extracted\n     * See parseFloat for more info\n     * Compares numbers:\n     * - if (a is less than b) return -1;\n     * - if (a is greater than b) return 1;\n     * - else (a must be equal to b) return 0;\n     * Function does not check types\n     * Exceptions in will be suppressed, if any - a is assumed to be less than b\n     */\n    numberComparator(a:any, b:any, options?:IListComparatorOptions):number {\n\n        return (this.utils.parseNumber(a) - this.utils.parseNumber(b));\n\n    }\n\n    /**\n     * Function extracts (using _extractFn_ option) values of a property (_sortBy_ option) and compares them using\n     * compare function (_compareFn_ option, by default Helper.stringComparator)\n     * Merged options are provided to _extractFn_ and _compareFn_\n     * TODO Check memory leaks for all that options links\n     */\n    comparator(options?:IListComparatorOptions):(item1:any, item2:any) => number {\n\n        options = this.utils.extend({\n            extractFn: this.propertyExtractor((options && options.sortBy) || null).bind(this),\n            compareFn: this.stringComparator.bind(this)\n        }, options);\n\n        return (item1:any, item2:any):number => {\n\n            return options.compareFn(options.extractFn(item1, options), options.extractFn(item2, options), options);\n\n        };\n\n    }\n\n    equalsFilter(obj:any, options?:IListFilterOptions):boolean {\n        return (options.condition === obj);\n    }\n\n    /**\n     * @param {string} obj\n     * @param {IListFilterOptions} options\n     * @returns {boolean}\n     */\n    containsFilter(obj:any, options?:IListFilterOptions):boolean {\n        return (obj && obj.toString().indexOf(options.condition) > -1);\n    }\n\n    regexpFilter(obj, options?:IListFilterOptions):boolean {\n        if (!(options.condition instanceof RegExp)) throw new Error('Condition must be an instance of RegExp');\n        return (options.condition.test(obj));\n    }\n\n    /**\n     * Function extracts (using `extractFn` option) values of a property (`filterBy` option) and filters them using\n     * compare function (`filterFn` option, by default Helper.equalsFilter)\n     * Merged options are provided to `extractFn` and `compareFn`\n     * Set `filterBy` to null to force `propertyExtractor` to return object itself\n     * TODO Check memory leaks for all that options links\n     */\n    filter(filterConfigs:IListFilterOptions[]):(item:any) => boolean {\n\n        var self = this;\n\n        filterConfigs = (filterConfigs || []).map((opt) => {\n\n            return this.utils.extend({\n                condition: '',\n                extractFn: self.propertyExtractor((opt && opt.filterBy) || null).bind(this),\n                filterFn: self.equalsFilter.bind(this)\n            }, opt);\n\n        });\n\n        return (item):boolean => {\n\n            return <boolean>filterConfigs.reduce((pass, opt) => {\n\n                if (!pass || !opt.condition) return pass;\n                return opt.filterFn(opt.extractFn(item, opt), opt);\n\n            }, true);\n\n        };\n\n    }\n\n}\n\nexport function $get(context:context.Context):List {\n    return context.createSingleton('List', ()=> {\n        return new List(context);\n    });\n}\n\nexport interface IListComparatorOptions {\n    sortBy?:string;\n    extractFn?:(object:any, options?:IListComparatorOptions|any)=>any;\n    compareFn?:(a:any, b:any, options?:IListComparatorOptions|any)=>number;\n}\n\nexport interface IListFilterOptions {\n    filterBy?:string;\n    condition?:any|string|RegExp;\n    extractFn?:(object:any, options?:IListFilterOptions|any)=>any;\n    filterFn?:(object:any, options?:IListFilterOptions|any)=>any;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/List.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport utils = require('./Utils');\nimport context = require('./Context');\n\nexport class Log {\n\n    private context:context.Context;\n    private utils:utils.Utils;\n\n    public console:Console;\n    public logDebug:boolean;\n    public logInfo:boolean;\n    public logWarnings:boolean;\n    public logErrors:boolean;\n    public addTimestamps:boolean;\n\n    constructor(context:context.Context, console?:Console) {\n\n        if (!console) {\n            console = <Console>{ // safety\n                log: () => {},\n                warn: () => {},\n                info: () => {},\n                error: () => {}\n            };\n        }\n\n        this.context = context;\n        this.console = console;\n        this.utils = utils.$get(context);\n\n        this.logDebug = false;\n        this.logInfo = false;\n        this.logWarnings = false;\n        this.logErrors = false;\n\n        this.addTimestamps = false;\n\n    }\n\n    disableAll() {\n        this.logDebug = false;\n        this.logInfo = false;\n        this.logWarnings = false;\n        this.logErrors = false;\n    }\n\n    enableAll() {\n        this.logDebug = true;\n        this.logInfo = true;\n        this.logWarnings = true;\n        this.logErrors = true;\n    }\n\n    parseArguments(args) {\n        args = this.utils.argumentsToArray(args);\n        if (this.addTimestamps) args.unshift(new Date().toLocaleString(), '-');\n        return args;\n    }\n\n    debug(...args) {\n        if (this.logDebug) this.console.log.apply(this.console, this.parseArguments(arguments));\n    }\n\n    info(...args) {\n        if (this.logInfo) this.console.info.apply(this.console, this.parseArguments(arguments));\n    }\n\n    warn(...args) {\n        if (this.logWarnings) this.console.warn.apply(this.console, this.parseArguments(arguments));\n    }\n\n    error(...args) {\n        if (this.logErrors) this.console.error.apply(this.console, this.parseArguments(arguments));\n    }\n\n}\n\nexport function $get(context:context.Context):Log {\n\n    return context.createSingleton('Log', ()=> {\n        return new Log(context, console);\n    });\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Log.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport utils = require('./Utils');\nimport log = require('./Log');\nimport context = require('./Context');\n\n/**\n * @see https://github.com/Microsoft/TypeScript/issues/275\n */\nexport class Observable<T extends Observable<any>> {\n\n    protected context:context.Context;\n    protected utils:utils.Utils;\n    protected log:log.Log;\n\n    private listeners:any;\n    private oneTimeEvents:any;\n    private oneTimeArguments:any;\n\n    constructor(context:context.Context) {\n        if (!(this instanceof Observable)) throw new Error('Observable(): New operator was omitted');\n        Object.defineProperty(this, 'listeners', {value: {}, enumerable: false, writable: true});\n        Object.defineProperty(this, 'oneTimeEvents', {value: {}, enumerable: false, writable: true});\n        Object.defineProperty(this, 'oneTimeArguments', {value: {}, enumerable: false, writable: true});\n        this.context = context;\n        this.utils = utils.$get(context);\n        this.log = log.$get(context);\n    }\n\n    hasListeners(event) {\n        return (event in this.listeners);\n    }\n\n    /**\n     * @deprecated\n     * @param {string} event\n     */\n    registerOneTimeEvent(event:string) {\n        this.oneTimeEvents[event] = false;\n        this.oneTimeArguments[event] = [];\n    }\n\n    on(events:any, callback:(...args)=>any):T {\n\n        if (typeof events == 'string') events = [events];\n        if (!events) throw new Error('No events to subscribe to');\n        if (typeof callback !== 'function') throw new Error('Callback must be a function');\n\n        var self = this;\n\n        (<string[]>events).forEach((event) => {\n\n            if (!self.hasListeners(event)) self.listeners[event] = [];\n\n            self.listeners[event].push(callback);\n\n            if (self.isOneTimeEventFired(event)) { // Fire listener immediately if is inited already\n                this.log.debug('Observable.on(%s): One-time event has been fired already, executing callback', event);\n                callback.apply(self, self.getOneTimeEventArgumens(event));\n            }\n\n        });\n\n        return <any>this;\n\n    }\n\n    emit(event:string, ...args):any {\n\n        if (this.isOneTimeEventFired(event)) {\n            this.log.debug('Observable.emit(%s): One-time event has been fired already', event);\n            return null;\n        }\n\n        var result = null;\n\n        if (this.isOneTimeEvent(event)) {\n            this.setOneTimeEventFired(event);\n            this.setOneTimeEventArgumens(event, args);\n        }\n\n        if (!this.hasListeners(event)) return null;\n\n        this.listeners[event].some((callback:()=>any) => {\n\n            result = callback.apply(this, args);\n            return (result === false);\n\n        });\n\n        return result;\n\n    }\n\n    off(event?:string, callback?):T {\n        if (!event) {\n            this.listeners = {};\n            this.oneTimeEvents = {};\n            this.oneTimeArguments = {};\n        } else {\n            if (!callback) {\n                delete this.listeners[event];\n            } else {\n                if (!this.hasListeners(event)) return <any>this;\n                this.listeners[event].forEach((cb, i) => {\n\n                    if (cb === callback) delete this.listeners[event][i];\n\n                });\n            }\n        }\n        return <any>this;\n    }\n\n    /**\n     * @deprecated\n     * @param event\n     * @returns {boolean}\n     */\n    isOneTimeEvent(event:string) {\n        return (event in this.oneTimeEvents);\n    }\n\n    /**\n     * @deprecated\n     * @param {string} event\n     * @returns {boolean}\n     */\n    isOneTimeEventFired(event:string):boolean {\n        if (!this.isOneTimeEvent(event)) return false;\n        return (this.oneTimeEvents[event]);\n    }\n\n    /**\n     * @deprecated\n     * @param event\n     */\n    setOneTimeEventFired(event) {\n        this.oneTimeEvents[event] = true;\n    }\n\n    /**\n     * @deprecated\n     * @param {string} event\n     * @param args\n     */\n    setOneTimeEventArgumens(event:string, args) {\n        this.oneTimeArguments[event] = args;\n    }\n\n    /**\n     * @deprecated\n     * @param {string} event\n     * @returns {any}\n     */\n    getOneTimeEventArgumens(event:string) {\n        return this.oneTimeArguments[event];\n    }\n\n    /**\n     * @deprecated\n     * @returns {T}\n     */\n    offAll():T {\n        return this.off();\n    }\n\n    destroy():T {\n        this.off();\n        this.log.debug('Observable.destroy(): Listeners were destroyed');\n        return <T>this;\n    }\n\n    emitAndCallback(event, args?, callback?):T {\n        args = this.utils.argumentsToArray(args);\n        if (event) this.emit.apply(this, [event].concat(args));\n        if (callback) callback.apply(this, args);\n        return <any>this;\n    }\n\n}\n\nexport function $get(context:context.Context):Observable<any> {\n    return new Observable<any>(context);\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Observable.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('./Context');\nimport observable = require('./Observable');\n\nexport class PageVisibility extends observable.Observable<PageVisibility> {\n\n    public events = {\n        change: 'change'\n    };\n\n    public visible:boolean;\n\n    constructor(context:context.Context) {\n\n        super(context);\n\n        var hidden = \"hidden\",\n            onchange = (evt) => {\n\n                evt = evt || window.event;\n\n                var v = 'visible',\n                    h = 'hidden',\n                    evtMap = {\n                        focus: v, focusin: v, pageshow: v, blur: h, focusout: h, pagehide: h\n                    };\n\n                this.visible = (evt.type in evtMap) ? evtMap[evt.type] == v : !document[hidden];\n\n                this.emit(this.events.change, this.visible);\n\n            };\n\n        this.visible = true;\n\n        if (typeof document == 'undefined' || typeof window == 'undefined') return;\n\n        // Standards:\n\n        if (hidden in document)\n            document.addEventListener(\"visibilitychange\", onchange);\n        else if ((hidden = \"mozHidden\") in document)\n            document.addEventListener(\"mozvisibilitychange\", onchange);\n        else if ((hidden = \"webkitHidden\") in document)\n            document.addEventListener(\"webkitvisibilitychange\", onchange);\n        else if ((hidden = \"msHidden\") in document)\n            document.addEventListener(\"msvisibilitychange\", onchange);\n        // IE 9 and lower:\n        else if ('onfocusin' in document)\n            document.onfocusin = document.onfocusout = onchange;\n        // All others:\n        else\n            window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;\n\n    }\n\n    isVisible() {\n        return this.visible;\n    }\n\n}\n\nexport function $get(context:context.Context):PageVisibility {\n    return new PageVisibility(context);\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/PageVisibility.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\ndeclare\nclass Buffer {\n    constructor(str:string, encoding?:string);\n\n    toString(encoding:string):string;\n}\n\nimport context = require('./Context');\nimport utils = require('./Utils');\nimport observable = require('./Observable');\nimport cache = require('./Cache');\nimport log = require('./Log');\nimport request = require('./http/Request');\nimport r = require('./http/Response');\n\nexport class Platform extends observable.Observable<Platform> {\n\n    public server:string;\n    public apiKey:string;\n    public account:string;\n    public urlPrefix:string;\n    public apiVersion:string;\n    public accountPrefix:string;\n    public accessTokenTtl:number;\n    public refreshTokenTtl:number;\n    public refreshTokenTtlRemember:number;\n    public refreshHandicapMs:number;\n    public refreshDelayMs:number;\n    public clearCacheOnRefreshError:boolean;\n    public refreshPromise:Promise<any>;\n\n    public cacheId:string;\n    public pollInterval:number;\n    public releaseTimeout:number;\n\n    public events = {\n        accessViolation: 'accessViolation',\n        logoutSuccess: 'logoutSuccess',\n        logoutError: 'logoutError',\n        authorizeSuccess: 'authorizeSuccess',\n        authorizeError: 'authorizeError',\n        refreshSuccess: 'refreshSuccess',\n        refreshError: 'refreshError'\n    };\n\n    static forcedTokenType = 'forced';\n\n    constructor(context:context.Context) {\n\n        super(context);\n\n        this.server = '';\n        this.apiKey = '';\n        this.account = '~';\n        this.urlPrefix = '/restapi';\n        this.apiVersion = 'v1.0';\n        this.accountPrefix = '/account/';\n        this.accessTokenTtl = null; // Platform server by default sets it to 60 * 60 = 1 hour\n        this.refreshTokenTtl = 10 * 60 * 60; // 10 hours\n        this.refreshTokenTtlRemember = 7 * 24 * 60 * 60; // 1 week\n        this.refreshHandicapMs = 60 * 1000; // 1 minute\n        this.refreshDelayMs = 100;\n        this.clearCacheOnRefreshError = true;\n        this.refreshPromise = null;\n\n        this.cacheId = 'platform';\n        this.pollInterval = 250;\n        this.releaseTimeout = 5000; // If queue was not released then force it to do so after some timeout\n\n    }\n\n    getStorage():cache.Cache {\n\n        return cache.$get(this.context);\n\n    }\n\n    getRequest():request.Request {\n\n        return request.$get(this.context);\n\n    }\n\n    clearStorage() {\n\n        this.getStorage().clean();\n\n        return this;\n\n    }\n\n    setCredentials(appKey, appSecret) {\n\n        var apiKey = (appKey || '') + ':' + (appSecret || '');\n\n        if (apiKey == ':') return this;\n\n        this.apiKey = (typeof btoa == 'function') ? btoa(apiKey) : new Buffer(apiKey).toString('base64');\n\n        return this;\n\n    }\n\n    getCredentials():{key:string; secret:string} {\n\n        var credentials = (\n            (typeof atob == 'function')\n                ? atob(this.apiKey)\n                : new Buffer(this.apiKey, 'base64').toString('utf-8')\n        ).split(':');\n\n        return {\n            key: credentials[0],\n            secret: credentials[1]\n        };\n\n    }\n\n    setServer(server) {\n\n        this.server = server || '';\n\n        return this;\n\n    }\n\n    remember(remember?:boolean):Platform {\n\n        var key = this.cacheId + '-remember';\n\n        if (remember !== undefined) {\n\n            this.getStorage().setItem(key, remember);\n            return this;\n\n        }\n\n        return this.getStorage().getItem(key) || false;\n\n    }\n\n    getAuthURL(options:{\n        redirectUri:string;\n        display?:string; // page|popup|touch|mobile, default 'page'\n        prompt?:string; // sso|login|consent, default is 'login sso consent'\n        state?:string;\n        brandId?:string|number;\n    }) {\n\n        options = options || <any>{};\n\n        return this.apiUrl('/restapi/oauth/authorize?' + this.utils.queryStringify({\n            'response_type': 'code',\n            'redirect_uri': options.redirectUri || '',\n            'client_id': this.getCredentials().key,\n            'state': options.state || '',\n            'brand_id': options.brandId || '',\n            'display': options.display || '',\n            'prompt': options.prompt || ''\n        }), {addServer: true})\n\n    }\n\n    parseAuthRedirectUrl(url:string) {\n\n        var qs = this.utils.parseQueryString(url.split('?').reverse()[0]),\n            error = qs.error_description || qs.error;\n\n        if (error) {\n            var e = <IAuthError> new Error(error);\n            e.error = qs.error;\n            throw e;\n        }\n\n        return qs;\n\n    }\n\n    authorize(options?:{\n        username?:string;\n        password?: string;\n        extension?:string;\n        code?:string;\n        redirectUri?:string;\n        clientId?:string;\n        remember?:boolean\n    }) {\n\n        options = options || <any>{};\n\n        options.remember = options.remember || false;\n\n        var body = <any>{\n            \"access_token_ttl\": this.accessTokenTtl,\n            \"refresh_token_ttl\": options.remember ? this.refreshTokenTtlRemember : this.refreshTokenTtl\n        };\n\n        if (options.username) {\n\n            body.grant_type = 'password';\n            body.username = options.username;\n            body.password = options.password;\n            body.extension = options.extension || '';\n\n        } else if (options.code) {\n\n            body.grant_type = 'authorization_code';\n            body.code = options.code;\n            body.redirect_uri = options.redirectUri;\n            //body.client_id = this.getCredentials().key; // not needed\n\n        } else {\n\n            return this.context.getPromise().reject(new Error('Unsupported authorization flow'));\n\n        }\n\n        return this.authCall({\n            url: '/restapi/oauth/token',\n            post: body\n        }).then((response) => {\n\n            this.setCache(response.data)\n                .remember(options.remember)\n                .emitAndCallback(this.events.authorizeSuccess, []);\n\n            return response;\n\n        }).catch((e:request.IAjaxError):any => {\n\n            this.clearStorage()\n                .emitAndCallback(this.events.authorizeError, [e]);\n\n            throw e;\n\n        });\n\n    }\n\n    isPaused() {\n        var storage = this.getStorage(),\n            cacheId = this.cacheId + '-refresh';\n        return !!storage.getItem(cacheId) && Date.now() - parseInt(storage.getItem(cacheId)) < this.releaseTimeout;\n    }\n\n    pause() {\n        this.getStorage().setItem(this.cacheId + '-refresh', Date.now());\n        return this;\n    }\n\n    /**\n     * If the queue is unpaused internally, polling will be cancelled\n     * @returns {Platform}\n     */\n    resume() {\n        this.getStorage().removeItem(this.cacheId + '-refresh');\n        return this;\n    }\n\n    refresh() {\n\n        var refresh = new (this.context.getPromise())((resolve, reject) => {\n\n            if (this.isPaused()) {\n                return resolve(this.refreshPolling(null));\n            } else {\n                this.pause();\n            }\n\n            // Make sure all existing AJAX calls had a chance to reach the server\n            setTimeout(() => {\n\n                var authData = this.getAuthData();\n\n                this.log.debug('Platform.refresh(): Performing token refresh (access token', authData.access_token, ', refresh token', authData.refresh_token, ')');\n\n                if (!authData || !authData.refresh_token) return reject(new Error('Refresh token is missing'));\n                if (Date.now() > authData.refreshExpireTime) return reject(new Error('Refresh token has expired'));\n                if (!this.isPaused()) return reject(new Error('Queue was resumed before refresh call'));\n\n                resolve(this.authCall({\n                    url: '/restapi/oauth/token',\n                    post: {\n                        \"grant_type\": \"refresh_token\",\n                        \"refresh_token\": authData.refresh_token,\n                        \"access_token_ttl\": this.accessTokenTtl,\n                        \"refresh_token_ttl\": this.remember() ? this.refreshTokenTtlRemember : this.refreshTokenTtl\n                    }\n                }));\n\n            }, this.refreshDelayMs);\n\n        });\n\n        return refresh.then((response:r.Response) => {\n\n            // This means refresh has happened elsewhere and we are here because of timeout\n            if (!response || !response.data) return response;\n\n            this.log.info('Platform.refresh(): Token was refreshed');\n\n            if (!response.data.refresh_token || !response.data.access_token) {\n                var e = <request.IAjaxError>new Error('Malformed OAuth response');\n                e.ajax = response;\n                throw e;\n            }\n\n            this.setCache(response.data)\n                .resume();\n\n            return response;\n\n        }).then((result) => {\n\n            this.emit(this.events.refreshSuccess, result);\n            return result;\n\n        }).catch((e:request.IAjaxError):any => {\n\n            if (this.clearCacheOnRefreshError) this.clearStorage();\n\n            this.emitAndCallback(this.events.accessViolation, [e])\n                .emitAndCallback(this.events.refreshError, [e]);\n\n            throw e;\n\n        });\n\n    }\n\n    /**\n     * @returns {Promise}\n     */\n    logout():Promise<r.Response> {\n\n        this.pause();\n\n        return this.authCall({\n            url: '/restapi/oauth/revoke',\n            post: {\n                token: this.getToken()\n            }\n        }).then((response)  => {\n\n            this.resume()\n                .clearStorage()\n                .emit(this.events.logoutSuccess, response);\n\n            return response;\n\n        }).catch((e:request.IAjaxError):any => {\n\n            this.resume()\n                .emitAndCallback(this.events.accessViolation, [e])\n                .emitAndCallback(this.events.logoutError, [e]);\n\n            throw e;\n\n        });\n\n    }\n\n    refreshPolling(result) {\n\n        if (this.refreshPromise) return this.refreshPromise;\n\n        this.refreshPromise = new (this.context.getPromise())((resolve, reject) => {\n\n            this.log.warn('Platform.refresh(): Refresh is already in progress polling started');\n\n            this.utils.poll((next) => {\n\n                if (this.isPaused()) return next();\n\n                this.refreshPromise = null;\n                this.resume();\n\n                if (this.isTokenValid()) {\n                    resolve(result);\n                } else {\n                    reject(new Error('Automatic authentification timeout'));\n                }\n\n            }, this.pollInterval);\n\n        });\n\n        return this.refreshPromise;\n\n    }\n\n    getToken() {\n\n        return this.getAuthData().access_token;\n\n    }\n\n    getTokenType() {\n\n        return this.getAuthData().token_type;\n\n    }\n\n    getAuthData():IPlatformAuthInfo {\n\n        return this.getStorage().getItem(this.cacheId) || {\n                token_type: '',\n                access_token: '',\n                expires_in: 0,\n                refresh_token: '',\n                refresh_token_expires_in: 0\n            };\n\n    }\n\n    /**\n     * Check if there is a valid (not expired) access token\n     */\n    isTokenValid():boolean {\n\n        var authData = this.getAuthData();\n        return (authData.token_type == Platform.forcedTokenType || (new Date(authData.expireTime).getTime() - this.refreshHandicapMs) > Date.now() && !this.isPaused());\n\n    }\n\n    /**\n     * Checks if user is authorized\n     * If there is no access token, refresh will be performed\n     */\n    isAuthorized():Promise<any> {\n\n        if (this.isTokenValid()) return this.context.getPromise().resolve(true);\n        return this.refresh();\n\n    }\n\n    cancelAccessToken() {\n\n        return this.setCache(this.utils.extend(this.getAuthData(), {\n            access_token: '',\n            expires_in: 0\n        }));\n\n    }\n\n    setCache(authData:IPlatformAuthInfo) {\n\n        var oldAuthData = this.getAuthData();\n\n        this.log.info('Platform.setCache(): Tokens were updated, new:', authData, ', old:', oldAuthData);\n\n        authData.expireTime = Date.now() + (authData.expires_in * 1000);\n        authData.refreshExpireTime = Date.now() + (authData.refresh_token_expires_in * 1000);\n\n        this.getStorage().setItem(this.cacheId, authData);\n\n        return this;\n\n    }\n\n    forceAuthentication() {\n\n        this.setCache(<IPlatformAuthInfo>{\n            token_type: Platform.forcedTokenType,\n            access_token: '',\n            expires_in: 0,\n            refresh_token: '',\n            refresh_token_expires_in: 0\n        });\n\n        return this;\n\n    }\n\n    apiCall(options?:request.IAjaxOptions):Promise<r.Response> {\n\n        options = options || {};\n        options.url = this.apiUrl(options.url, {addServer: true});\n\n        return this.isAuthorized().then(() => { // Refresh will occur inside\n\n            var token = this.getToken();\n\n            return this.getRequest()\n                .setOptions(options)\n                .setHeader('Authorization', this.getTokenType() + (token ? ' ' + token : ''))\n                .send();\n\n        }).catch((e:request.IAjaxError) => {\n\n            if (!e.response || !e.response.isUnauthorized()) throw e;\n\n            this.cancelAccessToken();\n\n            return this\n                .refresh()\n                .then(() => {\n\n                    // Re-send with same options\n                    return this.apiCall(options);\n\n                });\n\n        });\n\n    }\n\n    get(url:string, options?:request.IAjaxOptions) {\n        options = options || {};\n        options.url = url;\n        options.method = 'GET';\n        return this.apiCall(options);\n    }\n\n    post(url:string, options:request.IAjaxOptions) {\n        options = options || {};\n        options.url = url;\n        options.method = 'POST';\n        return this.apiCall(options);\n    }\n\n    put(url:string, options:request.IAjaxOptions) {\n        options = options || {};\n        options.url = url;\n        options.method = 'PUT';\n        return this.apiCall(options);\n    }\n\n    'delete'(url:string, options?:request.IAjaxOptions) {\n        options = options || {};\n        options.url = url;\n        options.method = 'DELETE';\n        return this.apiCall(options);\n    }\n\n    authCall(options?:request.IAjaxOptions):Promise<r.Response> {\n\n        options = options || {};\n        options.method = options.method || 'POST';\n        options.url = this.apiUrl(options.url, {addServer: true});\n\n        return this.getRequest()\n            .setOptions(options)\n            .setHeader('Content-Type', 'application/x-www-form-urlencoded')\n            .setHeader('Accept', 'application/json')\n            .setHeader('Authorization', 'Basic ' + this.apiKey)\n            .send();\n\n    }\n\n    apiUrl(url, options?:{addMethod?: string; addToken?: boolean; addServer?: boolean}):string {\n\n        url = url || '';\n        options = options || {};\n\n        var builtUrl = '',\n            hasHttp = url.indexOf('http://') != -1 || url.indexOf('https://') != -1;\n\n        if (options.addServer && !hasHttp) builtUrl += this.server;\n\n        if (url.indexOf(this.urlPrefix) == -1 && !hasHttp) builtUrl += this.urlPrefix + '/' + this.apiVersion;\n\n        if (url.indexOf(this.accountPrefix) > -1) builtUrl.replace(this.accountPrefix + '~', this.accountPrefix + this.account);\n\n        builtUrl += url;\n\n        if (options.addMethod || options.addToken) builtUrl += (url.indexOf('?') > -1 ? '&' : '?');\n\n        if (options.addMethod) builtUrl += '_method=' + options.addMethod;\n        if (options.addToken) builtUrl += (options.addMethod ? '&' : '') + 'access_token=' + this.getToken();\n\n        return builtUrl;\n\n    }\n\n}\n\nexport interface IAuthError extends Error {\n    error?:string;\n}\n\nexport interface IPlatformAuthInfo {\n    token_type?:string;\n    access_token?:string;\n    expires_in?:number; // actually it's string\n    expireTime?:number;\n    refresh_token?:string;\n    refresh_token_expires_in?:number; // actually it's string\n    refreshExpireTime?:number;\n    scope?:string;\n}\n\nexport function $get(context:context.Context):Platform {\n    return context.createSingleton('Platform', ()=> {\n        return new Platform(context);\n    });\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Platform.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport observable = require('./Observable');\nimport utils = require('./Utils');\nimport log = require('./Log');\nimport context = require('./Context');\nimport platform = require('./Platform');\nimport r = require('./http/Response');\n\nexport class Subscription extends observable.Observable<Subscription> {\n\n    static renewHandicapMs = 60 * 1000;\n\n    public subscription;\n    public timeout;\n    public eventFilters:string[];\n    public pubnub:PUBNUB.PubnubInstance;\n\n    public events = {\n        notification: 'notification',\n        removeSuccess: 'removeSuccess',\n        removeError: 'removeError',\n        renewSuccess: 'renewSuccess',\n        renewError: 'renewError',\n        subscribeSuccess: 'subscribeSuccess',\n        subscribeError: 'subscribeError'\n    };\n\n    constructor(context:context.Context) {\n\n        super(context);\n\n        this.pubnub = null;\n        this.eventFilters = [];\n        this.timeout = null;\n        this.subscription = {\n            eventFilters: [],\n            expirationTime: '', // 2014-03-12T19:54:35.613Z\n            expiresIn: 0,\n            deliveryMode: {\n                transportType: 'PubNub',\n                encryption: false,\n                address: '',\n                subscriberKey: '',\n                secretKey: ''\n            },\n            id: '',\n            creationTime: '', // 2014-03-12T19:54:35.613Z\n            status: '', // Active\n            uri: ''\n        };\n\n    }\n\n    getPubnub() {\n\n        return this.context.getPubnub();\n\n    }\n\n    getPlatform() {\n\n        return platform.$get(this.context);\n\n    }\n\n    /**\n     * Creates or updates subscription if there is an active one\n     * @param {{events?:string[]}} [options] New array of events\n     * @returns {Promise}\n     */\n    register(options?:{events?:string[]}):Promise<r.Response> {\n\n        if (this.isSubscribed()) {\n            return this.renew(options);\n        } else {\n            return this.subscribe(options);\n        }\n\n    }\n\n    addEvents(events:string[]) {\n        this.eventFilters = this.eventFilters.concat(events);\n        return this;\n    }\n\n    setEvents(events:string[]) {\n        this.eventFilters = events;\n        return this;\n    }\n\n    getFullEventFilters() {\n\n        return this.eventFilters.map((event) => {\n            return this.getPlatform().apiUrl(event);\n        });\n\n    }\n\n    subscribe(options?:{events?:string[]}):Promise<r.Response> {\n\n        options = options || {};\n        if (options.events) this.eventFilters = options.events;\n\n        this.clearTimeout();\n\n        return <any>new (this.context.getPromise())((resolve, reject) => {\n\n            if (!this.eventFilters || !this.eventFilters.length) throw new Error('Events are undefined');\n\n            resolve(this.getPlatform().apiCall({\n                method: 'POST',\n                url: '/restapi/v1.0/subscription',\n                post: {\n                    eventFilters: this.getFullEventFilters(),\n                    deliveryMode: {\n                        transportType: 'PubNub'\n                    }\n                }\n            }));\n\n        }).then((ajax:r.Response) => {\n\n                this.updateSubscription(ajax.data)\n                    .subscribeAtPubnub()\n                    .emit(this.events.subscribeSuccess, ajax.data);\n\n                return ajax;\n\n            }).catch((e) => {\n\n                this.unsubscribe()\n                    .emit(this.events.subscribeError, e);\n\n                throw e;\n\n            });\n\n    }\n\n    renew(options?:{events?:string[]}):Promise<r.Response> {\n\n        options = options || {};\n        if (options.events) this.eventFilters = options.events;\n\n        this.clearTimeout();\n\n        return <any>new (this.context.getPromise())((resolve, reject) => {\n\n            if (!this.subscription || !this.subscription.id) throw new Error('Subscription ID is required');\n            if (!this.eventFilters || !this.eventFilters.length) throw new Error('Events are undefined');\n\n            resolve();\n\n        }).then(():Promise<r.Response> => {\n\n                return this.getPlatform().apiCall({\n                    method: 'PUT',\n                    url: '/restapi/v1.0/subscription/' + this.subscription.id,\n                    post: {\n                        eventFilters: this.getFullEventFilters()\n                    }\n                });\n\n            })\n            .then((ajax:any) => {\n\n                this.updateSubscription(ajax.data)\n                    .emit(this.events.renewSuccess, ajax.data);\n\n                return ajax;\n\n            })\n            .catch((e):any => {\n\n                this.unsubscribe()\n                    .emit(this.events.renewError, e);\n\n                throw e;\n\n            });\n\n    }\n\n    remove(options?:{async?:boolean}):Promise<r.Response> {\n\n        options = this.utils.extend({\n            async: true\n        }, options);\n\n        return <any>new (this.context.getPromise())((resolve, reject)  => {\n\n            if (!this.subscription || !this.subscription.id) throw new Error('Subscription ID is required');\n\n            resolve(this.getPlatform().apiCall({\n                async: !!options.async, // Warning! This is necessary because this method is used in beforeunload\n                                        // hook and has to be synchronous\n                method: 'DELETE',\n                url: '/restapi/v1.0/subscription/' + this.subscription.id\n            }));\n\n        }).then((ajax:r.Response) => {\n\n                this.unsubscribe()\n                    .emit(this.events.removeSuccess, ajax);\n\n                return ajax;\n\n            }).catch((e) => {\n\n                this.emit(this.events.removeError, e);\n\n                throw e;\n\n            });\n\n    }\n\n    destroy():any { //TODO Fix any\n\n        this.unsubscribe();\n\n        this.log.info('RC.core.Subscription: Destroyed');\n\n        return super.destroy();\n\n    }\n\n    isSubscribed() {\n\n        return this.subscription &&\n               this.subscription.deliveryMode &&\n               this.subscription.deliveryMode.subscriberKey &&\n               this.subscription.deliveryMode.address;\n\n    }\n\n    protected setTimeout() {\n\n        var timeToExpiration = (this.subscription.expiresIn * 1000) - Subscription.renewHandicapMs;\n\n        this.timeout = setTimeout(() => {\n\n            this.renew({});\n\n        }, timeToExpiration);\n\n    }\n\n    protected clearTimeout() {\n\n        clearTimeout(this.timeout);\n\n    }\n\n    protected updateSubscription(subscription) {\n\n        this.clearTimeout();\n        this.subscription = subscription;\n        this.setTimeout();\n        return this;\n\n    }\n\n    /**\n     * Remove subscription and disconnect from PUBNUB\n     */\n    protected unsubscribe() {\n        this.clearTimeout();\n        if (this.pubnub && this.isSubscribed()) this.pubnub.unsubscribe({channel: this.subscription.deliveryMode.address});\n        this.subscription = null;\n        return this;\n    }\n\n    /**\n     * Do not use this method! Internal use only\n     */\n    decrypt(message:any) {\n\n        if (this.isSubscribed() && this.subscription.deliveryMode.encryptionKey) {\n\n            var PUBNUB = this.getPubnub();\n\n            message = PUBNUB.crypto_obj.decrypt(message, this.subscription.deliveryMode.encryptionKey, {\n                encryptKey: false,\n                keyEncoding: 'base64',\n                keyLength: 128,\n                mode: 'ecb'\n            });\n\n        }\n\n        return message;\n\n    }\n\n    /**\n     * Do not use this method! Internal use only\n     */\n    notify(message:any) {\n\n        this.emit(this.events.notification, this.decrypt(message));\n\n        return this;\n\n    }\n\n    /**\n     * Do not use this method! Internal use only\n     */\n    subscribeAtPubnub():Subscription {\n\n        if (!this.isSubscribed()) return this;\n\n        var PUBNUB = this.getPubnub();\n\n        this.pubnub = PUBNUB.init({\n            ssl: true,\n            subscribe_key: this.subscription.deliveryMode.subscriberKey\n        });\n\n        this.pubnub.ready();\n\n        this.pubnub.subscribe({\n            channel: this.subscription.deliveryMode.address,\n            message: (message, env, channel) => {\n\n                this.log.info('RC.core.Subscription: Incoming message', message);\n                this.notify(message);\n\n            },\n            connect: () => {\n                this.log.info('RC.core.Subscription: PUBNUB connected');\n            }\n        });\n\n        return this;\n\n    }\n\n}\n\nexport function $get(context:context.Context):Subscription {\n    return new Subscription(context);\n}\n\nexport interface ISubscription {\n    eventFilters:string[];\n    expirationTime:string; // 2014-03-12T19:54:35.613Z\n    expiresIn:number;\n    deliveryMode: {\n        transportType:string;\n        encryption:boolean;\n        address:string;\n        subscriberKey:string;\n        secretKey:string;\n    };\n    id:string;\n    creationTime:string; // 2014-03-12T19:54:35.613Z\n    status:string; // Active\n    uri: string;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Subscription.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('./Context');\n\nvar hasOwn = Object.prototype.hasOwnProperty,\n    toString = Object.prototype.toString,\n    rdigit = /\\d/,\n    class2type = {};\n\n// Populate the class2type map\n'Boolean Number String Function Array Date RegExp Object'.split(' ').forEach((name) => {\n    class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n});\n\nexport class Utils {\n\n    constructor() {}\n\n    /**\n     * Ported from jQuery.fn.extend\n     * Optional first parameter makes deep copy\n     */\n    extend(targetObject:any, sourceObject:any, ...args) {\n\n        var options, name, src, copy, copyIsArray, clone,\n            target = arguments[0] || {},\n            i = 1,\n            length = arguments.length,\n            deep = false;\n\n        // Handle a deep copy situation\n        if (typeof target === \"boolean\") {\n            deep = target;\n\n            // skip the boolean and the target\n            target = arguments[i] || {};\n            i++;\n        }\n\n        // Handle case when target is a string or something (possible in deep copy)\n        if (typeof target !== \"object\" && !this.isFunction(target)) {\n            target = {};\n        }\n\n        for (; i < length; i++) {\n\n            // Only deal with non-null/undefined values\n            if ((options = arguments[i]) !== null) {\n\n                // Extend the base object\n                for (name in options) {\n\n                    src = target[name];\n                    copy = options[name];\n\n                    // Prevent never-ending loop\n                    if (target === copy) {\n                        continue;\n                    }\n\n                    // Recurse if we're merging plain objects or arrays\n                    if (deep && copy && (this.isPlainObject(copy) || (copyIsArray = this.isArray(copy)))) {\n\n                        if (copyIsArray) {\n                            copyIsArray = false;\n                            clone = src && this.isArray(src) ? src : [];\n                        } else {\n                            clone = src && this.isPlainObject(src) ? src : {};\n                        }\n\n                        // Never move original objects, clone them\n                        target[name] = this.extend(deep, clone, copy);\n\n                        // Don't bring in undefined values\n                    } else if (copy !== undefined) {\n\n                        target[name] = copy;\n\n                    }\n                }\n            }\n        }\n\n        // Return the modified object\n        return target;\n\n    }\n\n    forEach(object, cb) {\n\n        for (var i in object) {\n\n            if (!object.hasOwnProperty(i)) continue;\n\n            var res = cb(object[i], i);\n\n            if (res === false) break;\n\n        }\n\n    }\n\n    /**\n     * TODO Replace with something better\n     * @see https://github.com/joyent/node/blob/master/lib/querystring.js\n     * @param {object} parameters\n     * @returns {string}\n     */\n    queryStringify(parameters) {\n\n        var array = [];\n\n        this.forEach(parameters, (v, i) => {\n\n            if (this.isArray(v)) {\n                v.forEach((vv) => {\n                    array.push(encodeURIComponent(i) + '=' + encodeURIComponent(vv));\n                });\n            } else {\n                array.push(encodeURIComponent(i) + '=' + encodeURIComponent(v));\n            }\n\n        });\n\n        return array.join('&');\n\n    }\n\n    /**\n     * TODO Replace with something better\n     * @see https://github.com/joyent/node/blob/master/lib/querystring.js\n     * @param {string} queryString\n     * @returns {object}\n     */\n    parseQueryString(queryString):any {\n\n        var argsParsed = {},\n            self = this;\n\n        queryString.split('&').forEach((arg) => {\n\n            arg = decodeURIComponent(arg);\n\n            if (arg.indexOf('=') == -1) {\n\n                argsParsed[arg.trim()] = true;\n\n            } else {\n\n                var pair = arg.split('='),\n                    key = pair[0].trim(),\n                    value = pair[1].trim();\n\n                if (key in argsParsed) {\n                    if (key in argsParsed && !self.isArray(argsParsed[key])) argsParsed[key] = [argsParsed[key]];\n                    argsParsed[key].push(value);\n                } else {\n                    argsParsed[key] = value;\n                }\n\n            }\n\n        });\n\n        return argsParsed;\n\n    }\n\n    /**\n     * Returns true if the passed value is valid email address.\n     * Checks multiple comma separated emails according to RFC 2822 if parameter `multiple` is `true`\n     */\n    isEmail(v:string, multiple:boolean):boolean {\n        if (!!multiple) {\n            //this Regexp is also suitable for multiple emails (comma separated)\n            return /^(?:[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?[ ,;]*)+$/i.test(v);\n        } else {\n            return /^[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(v);\n        }\n\n    }\n\n    isPhoneNumber(v:string):boolean {\n        return (/\\+?1[0-9]{3}[0-9a-z]{7}/im.test(v.toString().split(/[^0-9a-z\\+]/im).join('')));\n    }\n\n    /**\n     * @param args\n     * @returns {Array}\n     */\n    argumentsToArray(args:any) {\n        return Array.prototype.slice.call(args || [], 0);\n    }\n\n    isDate(obj:any):boolean {\n        return this.type(obj) === \"date\";\n    }\n\n    isFunction(obj:any):boolean {\n        return this.type(obj) === \"function\";\n    }\n\n    isArray(obj:any):boolean {\n        return Array.isArray ? Array.isArray(obj) : this.type(obj) === \"array\";\n    }\n\n    // A crude way of determining if an object is a window\n    isWindow(obj:any):boolean {\n        return obj && typeof obj === \"object\" && \"setInterval\" in obj;\n    }\n\n    isNaN(obj:any):boolean {\n        return obj === null || !rdigit.test(obj) || isNaN(obj);\n    }\n\n    type(obj:any):string {\n        return obj === null\n            ? String(obj)\n            : class2type[toString.call(obj)] || \"object\";\n    }\n\n    isPlainObject(obj:any):boolean {\n\n        // Must be an Object.\n        // Because of IE, we also have to check the presence of the constructor property.\n        // Make sure that DOM nodes and window objects don't pass through, as well\n        if (!obj || this.type(obj) !== \"object\" || obj.nodeType || this.isWindow(obj)) {\n            return false;\n        }\n\n        // Not own constructor property must be Object\n        if (obj.constructor && !hasOwn.call(obj, \"constructor\") && !hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\")) {\n            return false;\n        }\n\n        // Own properties are enumerated firstly, so to speed up,\n        // if last one is own, then all properties are own.\n\n        var key;\n        for (key in obj) {}\n\n        return key === undefined || hasOwn.call(obj, key);\n\n    }\n\n    getProperty(obj:any, property:string):any {\n\n        return property\n            .split(/[.[\\]]/)\n            .reduce((res, part) => {\n                if (!res) return undefined;\n                return part ? res[part] : res;\n            }, obj);\n\n    }\n\n    poll(fn, interval?:number, timeout?:any):any { //NodeJS.Timer|number\n\n        this.stopPolling(timeout);\n\n        interval = interval || 1000;\n\n        var next = (delay?:number):any => {\n\n            delay = delay || interval;\n\n            interval = delay;\n\n            return setTimeout(() => {\n\n                fn(next, delay);\n\n            }, delay);\n\n        };\n\n        return next();\n\n    }\n\n    stopPolling(timeout) {\n        if (timeout) clearTimeout(timeout);\n    }\n\n    parseString(s:any):string {\n        return s ? s.toString() : '';\n    }\n\n    parseNumber(n:any):number {\n        if (!n) return 0;\n        n = parseFloat(n);\n        return isNaN(n) ? 0 : n;\n    }\n\n}\n\nexport function $get(context:context.Context):Utils {\n    return context.createSingleton('Utils', ()=> {\n        return new Utils();\n    })\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Utils.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('./Context');\nimport utils = require('./Utils');\n\nexport class Validator {\n\n    private utils:utils.Utils;\n    private context:context.Context;\n\n    constructor(context:context.Context) {\n        this.context = context;\n        this.utils = utils.$get(context);\n    }\n\n    validate(validators:IValidator[]):IValidatorResult {\n\n        var result = <IValidatorResult>{\n            errors: {},\n            isValid: true\n        };\n\n        result.errors = <any>validators.reduce((errors, validator) => {\n\n            var res = validator.validator();\n\n            if (res.length > 0) {\n                result.isValid = false;\n                errors[validator.field] = errors[validator.field] || [];\n                errors[validator.field] = errors[validator.field].concat(res);\n            }\n\n            return errors;\n\n        }, {});\n\n        return result;\n\n    }\n\n    /**\n     * It is not recommended to have any kinds of complex validators at front end\n     * @deprecated\n     */\n    email(value:string, multiple?:boolean) {\n        return ():Error[] => {\n            if (!value) return [];\n            return this.utils.isEmail(value, multiple) ? [] : [new Error('Value has to be a valid email')];\n        };\n    }\n\n    /**\n     * It is not recommended to have any kinds of complex validators at front end\n     * TODO International phone numbers\n     * @deprecated\n     */\n    phone(value:string) {\n        return ():Error[] => {\n            if (!value) return [];\n            return this.utils.isPhoneNumber(value) ? [] : [new Error('Value has to be a valid US phone number')];\n        };\n    }\n\n    required(value:any) {\n        return ():Error[] => {\n            return !value ? [new Error('Field is required')] : [];\n        };\n    }\n\n    length(value:string, max?:number, min?:number) {\n        return ():Error[] => {\n\n            var errors = [];\n\n            if (!value) return errors;\n\n            value = value.toString();\n\n            if (min && value.length < min) errors.push(new Error('Minimum length of ' + min + ' characters is required'));\n            if (max && value.length > max) errors.push(new Error('Maximum length of ' + max + ' characters is required'));\n\n            return errors;\n\n        };\n    }\n\n\n}\n\nexport function $get(context:context.Context):Validator {\n    return context.createSingleton('Validator', ()=> {\n        return new Validator(context);\n    });\n}\n\nexport interface IValidator {\n    field:string;\n    validator:(...args)=>Error[];\n}\n\nexport interface IValidatorErrors {\n    [id:string]: Error[];\n}\n\nexport interface IValidatorResult {\n    isValid:boolean;\n    errors:IValidatorErrors;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/Validator.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class Account extends helper.Helper {\n\n    createUrl() {\n        return '/account/~';\n    }\n\n}\n\nexport function $get(context:context.Context):Account {\n    return context.createSingleton('Account', ()=> {\n        return new Account(context);\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Account.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport validator = require('../core/Validator');\n\nexport class BlockedNumber extends helper.Helper {\n\n    private validator:validator.Validator;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.validator = validator.$get(context);\n    }\n\n    createUrl(options?:IBlockedNumberOptions, id?:string) {\n\n        options = options || {};\n\n        return '/account/~/extension/' +\n               (options.extensionId ? options.extensionId : '~') +\n               '/blocked-number' +\n               (id ? '/' + id : '');\n\n    }\n\n    validate(item:IBlockedNumber) {\n\n        return this.validator.validate([\n            {field: 'phoneNumber', validator: this.validator.phone(item.phoneNumber)},\n            {field: 'phoneNumber', validator: this.validator.required(item.phoneNumber)},\n            {field: 'name', validator: this.validator.required(item.name)}\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):BlockedNumber {\n    return context.createSingleton('BlockedNumber', ()=> {\n        return new BlockedNumber(context);\n    });\n}\n\nexport interface IBlockedNumber extends helper.IHelperObject {\n    name:string;\n    phoneNumber:string;\n}\n\nexport interface IBlockedNumberOptions {\n    extensionId?:string;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/BlockedNumber.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport validator = require('../core/Validator');\nimport list = require('../core/List');\nimport presence = require('./Presence');\nimport contact = require('./Contact');\n\nexport class Call extends helper.Helper {\n\n    private list:list.List;\n    private presence:presence.Presence;\n    private contact:contact.Contact;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.list = list.$get(context);\n        this.contact = contact.$get(context);\n        this.presence = presence.$get(context);\n    }\n\n    createUrl(options?:ICallOptions, id?:string) {\n\n        options = options || {};\n\n        if (!('personal' in options) && !('extensionId' in options)) options.personal = true;\n\n        return '/account/~/' +\n               (options.personal || options.extensionId ? ('extension/' + (options.extensionId || '~') + '/') : '') +\n               (options.active ? 'active-calls' : 'call-log') +\n               (id ? '/' + id : '');\n\n    }\n\n    getSessionId(call:ICall) {\n        return (call && call.sessionId);\n    }\n\n    isInProgress(call:ICall) {\n        return (call && call.result == 'In Progress');\n    }\n\n    isAlive(call:ICall) {\n        return (call && call.availability == 'Alive');\n    }\n\n    isInbound(call:ICall) {\n        return (call && call.direction == 'Inbound');\n    }\n\n    isOutbound(call:ICall) {\n        return !this.isInbound(call);\n    }\n\n    isMissed(call:ICall) {\n        return (call && call.result == 'Missed');\n    }\n\n    isFindMe(call:ICall) {\n        return (call && call.action == 'FindMe');\n    }\n\n    getCallerInfo(call:ICall):ICallerInfo {\n        return this.isInbound(call) ? call.from : call.to;\n    }\n\n    getAllCallerInfos(call:ICall):ICallerInfo[] {\n        return [this.getCallerInfo(call)].concat(this.isInbound(call) ? call.to : call.from);\n    }\n\n    formatDuration(call:ICall) {\n\n        function addZero(v) {\n            return (v < 10) ? '0' + v : v;\n        }\n\n        var duration = parseInt(<any>call.duration),\n            hours = Math.floor(duration / (60 * 60)),\n            mins = Math.floor((duration % (60 * 60)) / 60),\n            secs = Math.floor(duration % 60);\n\n        return (hours ? hours + ':' : '') + addZero(mins) + ':' + addZero(secs);\n\n    }\n\n    filter(options?:ICallFilterOptions):(call:ICall)=>boolean {\n\n        options = this.utils.extend({\n            alive: true,\n            direction: '',\n            type: ''\n        }, options);\n\n        return this.list.filter([\n            //{condition: options.alive, filterFn: this.isAlive},\n            {filterBy: 'direction', condition: options.direction},\n            {filterBy: 'type', condition: options.type}\n        ]);\n\n    }\n\n    comparator(options?:list.IListComparatorOptions) {\n\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'startTime'\n        }, options));\n\n    }\n\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all callerInfos found in\n     * all calls Warning, this function may be performance-consuming, reduce the amount of items passed to contacts\n     * and calls\n     */\n    attachContacts(contacts:contact.IContact[], calls:ICall[], options?:contact.IContactMatchOptions) {\n\n        // Flatten all caller infos from all messages\n        var callerInfos = calls.reduce((callerInfos, call) => {\n\n            return callerInfos.concat(this.getAllCallerInfos(call));\n\n        }, []);\n\n        this.contact.attachToCallerInfos(callerInfos, contacts, options);\n\n    }\n\n    /**\n     * Check whether pair of calls are two legs of RingOut\n     */\n    checkMergeability(outboundRingOutCall:ICall, inboundCall:ICall, options?:ICallProcessingOptions):boolean {\n\n        var getTime = (dateString) => {\n            return (new Date(dateString)).getTime();\n        };\n\n        return (\n        (!options.strict || outboundRingOutCall.action && outboundRingOutCall.action.toLowerCase().indexOf('ringout') != -1) &&\n        // Check directions\n        outboundRingOutCall.direction == 'Outbound' &&\n        inboundCall.direction == 'Inbound' &&\n        // Check that start times are equal or close enough\n        ((!inboundCall.startTime && !outboundRingOutCall.startTime) || Math.abs(getTime(inboundCall.startTime) - getTime(outboundRingOutCall.startTime)) < (options.maxStartTimeDiscrepancy || 5000)) &&\n        // Check that numbers match\n        inboundCall.from.phoneNumber == outboundRingOutCall.to.phoneNumber &&\n        (inboundCall.to.phoneNumber == outboundRingOutCall.from.phoneNumber || inboundCall.to.name == outboundRingOutCall.from.name) //TODO Maybe name check is not required\n        );\n\n    }\n\n    combineCalls(outboundRingOutCall:ICall, inboundCall:ICall, options?:ICallProcessingOptions):ICall[] {\n\n        options = options || <any>{};\n\n        var result = [];\n\n        outboundRingOutCall.hasSubsequent = true;\n\n        if (options.merge) {\n\n            outboundRingOutCall.duration = (outboundRingOutCall.duration > inboundCall.duration) ? outboundRingOutCall.duration : inboundCall.duration;\n\n            // TODO Usually information from inbound call is more accurate for unknown reason\n            outboundRingOutCall.from = inboundCall.to;\n            outboundRingOutCall.to = inboundCall.from;\n\n            // Push only one \"merged\" outbound call\n            result.push(outboundRingOutCall);\n\n        } else {\n\n            // Mark next call as subsequent\n            inboundCall.subsequent = true;\n\n            inboundCall.startTime = outboundRingOutCall.startTime; // Needed for sort\n\n            // Push both calls, first outbound then inbound\n            result.push(outboundRingOutCall);\n            result.push(inboundCall);\n\n        }\n\n        return result;\n\n    }\n\n    /**\n     * (!) Experimental (!)\n     *\n     * Calls in Recent Calls (Call Log) or Active Calls arrays can be combined if they are, for example, two legs of\n     * one RingOut. The logic that stands behind this process is simple:\n     *\n     * - Calls must have opposite directions\n     * - Must have been started within a certain limited time frame\n     * - Must have same phone numbers in their Caller Info sections (from/to)\n     *\n     * ```js\n     * var processedCalls = Call.processCalls(callsArray, {strict: false, merge: true});\n     * ```\n     *\n     * Flags:\n     *\n     * - if `strict` is `true` then only calls with RingOut in `action` property will be affected\n     * - `merge` &mdash; controls whether to merge calls (reducing the length of array) or give them `subsequent`\n     *     and `hasSubsequent` properties\n     */\n    processCalls(calls:ICall[], options?:ICallProcessingOptions):ICall[] {\n\n        var processedCalls = [],\n            callsToMerge = [],\n            self = this;\n\n        // Iterate through calls\n        calls.forEach((call:ICall) => {\n\n            var merged = false;\n\n            call.subsequent = false;\n            call.hasSubsequent = false;\n\n            // Second cycle to find other leg\n            // It is assumed that call is the outbound, secondCall is inbound\n            calls.some((secondCall:ICall) => {\n\n                if (call === secondCall) return false;\n\n                if (self.checkMergeability(call, secondCall, options)) {\n\n                    // Push to result array merged call\n                    processedCalls = processedCalls.concat(self.combineCalls(call, secondCall, options));\n\n                    // Push to array calls that are merged\n                    callsToMerge.push(call);\n                    callsToMerge.push(secondCall);\n\n                    merged = true;\n\n                }\n\n                return merged;\n\n            });\n\n        });\n\n        // After all calls are merged, add non-merged calls\n        calls.forEach((call:ICall) => {\n\n            if (callsToMerge.indexOf(call) == -1) processedCalls.push(call);\n\n        });\n\n        return processedCalls;\n\n    }\n\n    /**\n     * Converts Presence's ActiveCall array into regular Calls array\n     */\n    parsePresenceCalls(activeCalls:presence.IPresenceCall[]):ICall[] {\n\n        return activeCalls.map((activeCall:presence.IPresenceCall):ICall => {\n\n            return {\n                id: activeCall.id,\n                uri: '',\n                sessionId: activeCall.sessionId,\n                from: {phoneNumber: activeCall.from},\n                to: {phoneNumber: activeCall.to},\n                direction: activeCall.direction,\n                startTime: '',\n                duration: 0,\n                type: '',\n                action: '',\n                result: this.presence.isCallInProgress(activeCall) ? 'In Progress' : activeCall.telephonyStatus,\n                telephonyStatus: activeCall.telephonyStatus // non-standard property for compatibility\n            };\n\n        });\n\n    }\n\n    getSignature(call:ICall) {\n\n        var cleanup = (phoneNumber) => {\n            return (phoneNumber || '').toString().replace(/[^0-9]/ig, '');\n        };\n\n        return call.direction + '|' + (call.from && cleanup(call.from.phoneNumber)) + '|' + (call.to && cleanup(call.to.phoneNumber));\n\n    }\n\n    mergePresenceCalls(presenceCalls:ICall[], presence:presence.IPresence):ICall[] {\n\n        var currentDate = new Date(),\n\n            activeCalls = this\n                .parsePresenceCalls(presence && presence.activeCalls || [])\n                .map((call:ICall) => {\n                    // delete property to make sure it is skipped during merge\n                    delete call.startTime;\n                    return call;\n                });\n\n        presenceCalls = this.merge(presenceCalls || [], activeCalls, this.getSessionId, true);\n\n        presenceCalls.forEach((call:ICall) => {\n            if (!call.startTime) call.startTime = currentDate.toISOString();\n        });\n\n        return presenceCalls;\n\n    }\n\n    mergeAll(presenceCalls:ICall[], calls:ICall[], activeCalls:ICall[]):ICall[] {\n\n        // First, merge calls into presence calls\n        var presenceAndCalls = this.merge(presenceCalls || [], calls || [], this.getSessionId, true);\n\n        // Second, merge activeCalls into previous result\n        return this.merge(presenceAndCalls, activeCalls || [], this.getSessionId, true);\n\n    }\n\n}\n\nexport function $get(context:context.Context):Call {\n    return context.createSingleton('Call', ()=> {\n        return new Call(context);\n    });\n}\n\nexport interface ICall extends helper.IHelperObject {\n    sessionId?:string;\n    availability?:string;\n    startTime?:string;\n    duration?:number;\n    type?:string;\n    direction?:string;\n    action?:string;\n    result?:string;\n    to?:ICallerInfo;\n    from?:ICallerInfo;\n    subsequent?:boolean; // added during processing\n    hasSubsequent?:boolean; // added during processing\n    telephonyStatus?:string; // added during processing\n}\n\nexport interface ICallOptions {\n    extensionId?:string;\n    active?:boolean;\n    personal?:boolean;\n}\n\nexport interface ICallProcessingOptions {\n    maxStartTimeDiscrepancy?:number;\n    strict?:boolean;\n    merge?:boolean;\n}\n\nexport interface ICallFilterOptions {\n    extensionId?:string;\n    direction?:string;\n    type?:string;\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/CallerInfo.html\n */\nexport interface ICallerInfo {\n    phoneNumber?:string;\n    extensionNumber?:string;\n    name?:string;\n    location?:string;\n    contact?:contact.IContact; // corresponding contact (added by attachContacts methods)\n    contactPhone?:string; // contact's phone as written in contact (added by attachContacts methods)\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Call.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport validator = require('../core/Validator');\nimport list = require('../core/List');\nimport call = require('./Call');\n\nexport class Contact extends helper.Helper {\n\n    private list:list.List;\n    private validator:validator.Validator;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.list = list.$get(context);\n        this.validator = validator.$get(context);\n    }\n\n    createUrl(options?:IContactOptions, id?:string) {\n\n        options = options || {};\n\n        var root = '/account/~/extension/' +\n                   (options.extensionId ? options.extensionId : '~') +\n                   '/address-book';\n\n        if (options.sync) return root + '-sync';\n\n        return root +\n               (options.groupId ? '/group/' + options.groupId + '/contact' : '/contact') +\n               (id ? '/' + id : '');\n\n    }\n\n    /**\n     * Returns all values of the given fields if value exists\n     */\n    protected getFieldValues(where:IContact, fields?:string[], asHash?:boolean):any {\n\n        return fields.reduce((result:string[], field:string) => {\n\n            if (where && where[field]) {\n                if (asHash) {\n                    result[field] = where[field];\n                } else {\n                    result.push(where[field]);\n                }\n            }\n\n            return result;\n\n        }, asHash ? {} : []);\n\n    }\n\n    getFullName(contact:IContact) {\n        return this.getFieldValues(contact, this.nameFields).join(' ');\n    }\n\n    getEmails(contact:IContact, asHash?:boolean):string[] {\n        return this.getFieldValues(contact, this.emailFields, asHash);\n    }\n\n    getPhones(contact:IContact, asHash?:boolean):string[] {\n        return this.getFieldValues(contact, this.phoneFields, asHash);\n    }\n\n    getFaxes(contact:IContact, asHash?:boolean):string[] {\n        return this.getFieldValues(contact, this.faxFields, asHash);\n    }\n\n    getAddresses(contact:IContact, asHash?:boolean):IContactAddress[] {\n        return this.getFieldValues(contact, this.addressFields, asHash);\n    }\n\n    isAlive(contact:IContact) {\n        return (contact.availability == 'Alive');\n    }\n\n    /**\n     * Matches a contact against a given string, returns null if nothing found\n     */\n    match(contact:IContact, string:string, options?:IContactMatchOptions):any {\n\n        options = this.utils.extend({\n            fields: [].concat(this.nameFields, this.emailFields, this.phoneFields, this.faxFields, this.otherFields),\n            inAddresses: true,\n            transformFn: (value, options) => {\n                return value ? value.toString().toLocaleLowerCase() : '';\n            },\n            strict: false\n        }, options);\n\n        string = options.transformFn(string, options);\n\n        var found = null;\n\n        if (!string) return found;\n\n        var matchWith = (value) => {\n\n            // skip unnecessary cycles if match has been found\n            if (found) return;\n\n            var transformed = options.transformFn(value, options);\n\n            if (!transformed) return;\n\n            var match = (options.strict ? transformed == string : transformed.indexOf(string) > -1);\n\n            if (match) found = value;\n\n        };\n\n        // Search in fields\n        options.fields.forEach((field) => {\n            matchWith(contact[field]);\n        });\n\n        // Search in addresses, skip unnecessary cycles if match has been found\n        if (options.inAddresses && !found) this.addressFields.forEach((field) => {\n\n            // skip unnecessary cycles if match has been found or no field value\n            if (!contact[field] || found) return;\n\n            this.addressSubFields.forEach((subField) => {\n                matchWith(contact[field][subField]);\n            });\n\n        });\n\n        return found;\n\n    }\n\n    /**\n     * Matches a contact against a given phone number, returns null if nothing found\n     */\n    matchAsPhone(contact:IContact, phone:string, options?:IContactMatchOptions) {\n\n        return this.match(contact, phone, this.utils.extend({\n            fields: [].concat(this.phoneFields, this.faxFields),\n            inAddresses: false,\n            transformFn: (value, options) => {\n                return value ? value.toString().replace(/[^\\d\\w]/ig, '') : ''; //TODO Trickier removal reqired;\n            },\n            strict: false\n        }, options));\n\n    }\n\n\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all given {ICallerInfo}\n     * Warning, this function may be performance-consuming, reduce the amount of items passed to contacts and callerInfos\n     */\n    attachToCallerInfos(callerInfos:call.ICallerInfo[], contacts:IContact[], options?:IContactMatchOptions) {\n\n        var self = this,\n            callerInfoIndex = this.index(callerInfos, (callerInfo:call.ICallerInfo) => {\n                return callerInfo.phoneNumber;\n            }, true);\n\n        this.utils.forEach(callerInfoIndex, (indexedCallerInfos, phoneNumber) => {\n\n            var foundContact:IContact = null,\n                foundPhone = null;\n\n            contacts.some((contact:IContact) => {\n\n                foundPhone = self.matchAsPhone(contact, phoneNumber, options);\n\n                if (foundPhone) foundContact = contact;\n\n                return foundPhone;\n\n            });\n\n            if (foundContact) {\n\n                indexedCallerInfos.forEach((callerInfo:call.ICallerInfo) => {\n                    callerInfo.contact = foundContact;\n                    callerInfo.contactPhone = foundPhone;\n                });\n\n            }\n\n        });\n\n    }\n\n    comparator(options?:list.IListComparatorOptions) {\n\n        return this.list.comparator(this.utils.extend({\n            extractFn: (contact:IContact, options) => {\n                return this.getFullName(contact);\n            }\n        }, options));\n\n    }\n\n    /**\n     * TODO Add filtering by group http://jira.ringcentral.com/browse/SDK-4\n     */\n    filter(options?:IContactFilterOptions) {\n\n        options = this.utils.extend({\n            alive: true,\n            startsWith: '',\n            phonesOnly: false,\n            faxesOnly: false\n        }, options);\n\n        return this.list.filter([\n            {condition: options.alive, filterFn: this.isAlive},\n            {condition: options.startsWith, filterFn: (item, opts) => { return this.match(item, opts.condition); }},\n            {condition: options.phonesOnly, filterFn: (item, opts) => { return (this.getPhones(item).length > 0); }},\n            {condition: options.faxesOnly, filterFn: (item, opts) => { return (this.getFaxes(item).length > 0); }}\n        ]);\n\n    }\n\n    validate(item:IContact) {\n\n        return this.validator.validate([\n            {field: 'firstName', validator: this.validator.required(item.firstName)},\n            {field: 'lastName', validator: this.validator.required(item.lastName)},\n            {field: 'email', validator: this.validator.email(item.email)},\n            {field: 'email2', validator: this.validator.email(item.email2)},\n            {field: 'email3', validator: this.validator.email(item.email3)}\n        ]);\n\n    }\n\n    phoneFields = [\n        'homePhone',\n        'homePhone2',\n        'businessPhone',\n        'businessPhone2',\n        'mobilePhone',\n        'companyPhone',\n        'assistantPhone',\n        'carPhone',\n        'otherPhone',\n        'callbackPhone'\n    ];\n\n    faxFields = [\n        'businessFax',\n        'otherFax'\n    ];\n\n    addressFields = [\n        'homeAddress',\n        'businessAddress',\n        'otherAddress'\n    ];\n\n    addressSubFields = [\n        'street',\n        'city',\n        'state',\n        'zip'\n    ];\n\n    nameFields = [\n        'firstName',\n        'middleName',\n        'lastName',\n        'nickName'\n    ];\n\n    otherFields = [\n        'company',\n        'jobTitle',\n        'webPage',\n        'notes'\n    ];\n\n    emailFields = [\n        'email',\n        'email2',\n        'email3'\n    ];\n\n\n}\n\nexport function $get(context:context.Context):Contact {\n    return context.createSingleton('Contact', ()=> {\n        return new Contact(context);\n    });\n}\n\nexport interface IContactOptions {\n    extensionId?:string;\n    groupId?:string;\n    sync?:boolean;\n}\n\nexport interface IContactFilterOptions {\n    startsWith?:string;\n    alive?:boolean;\n    phonesOnly?:boolean;\n    faxesOnly?:boolean;\n}\n\nexport interface IContactMatchOptions {\n    transformFn?:(object:IContact, options?:IContactMatchOptions)=>any;\n    strict?:boolean;\n    inAddresses?:boolean;\n    fields?:string[];\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch16s04.html#ContactAddressInfo\n */\nexport interface IContactAddress {\n    country?:string;\n    street?:string;\n    city?:string;\n    state?:string;\n    zip?:string;\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/ch18s04.html#ContactInfo\n */\nexport interface IContactBrief {\n    firstName?:string;\n    lastName?:string;\n    company?:string;\n    email?:string;\n    businessAddress?:IContactAddress;\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch16s04.html#ContactInfo\n */\nexport interface IContact extends helper.IHelperObject {\n    availability?:string;\n\n    // Names:\n    firstName?:string;\n    lastName?:string;\n    company?:string;\n    nickName?:string;\n    middleName?:string;\n\n    // Emails:\n    email?:string;\n    email2?:string;\n    email3?:string;\n\n    // Addresses:\n    businessAddress?:IContactAddress;\n    homeAddress?:IContactAddress;\n    otherAddress?:IContactAddress;\n\n    // Phones:\n    homePhone?:string;\n    homePhone2?:string;\n    businessPhone?:string;\n    businessPhone2?:string;\n    mobilePhone?:string;\n    companyPhone?:string;\n    assistantPhone?:string;\n    carPhone?:string;\n    otherPhone?:string;\n    callbackPhone?:string;\n\n    // Faxes:\n    businessFax?:string;\n    otherFax?:string;\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Contact.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport validator = require('../core/Validator');\n\nexport class ContactGroup extends helper.Helper {\n\n    private validator:validator.Validator;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.validator = validator.$get(context);\n    }\n\n    createUrl(options?:any, id?:string) {\n        return '/account/~/extension/~/address-book/group' + (id ? '/' + id : '');\n    }\n\n    validate(item:IContactGroup) {\n\n        return this.validator.validate([\n            {field: 'groupName', validator: this.validator.required(item && item.groupName)}\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):ContactGroup {\n    return context.createSingleton('ContactGroup', ()=> {\n        return new ContactGroup(context);\n    });\n}\n\nexport interface IContactGroup extends helper.IHelperObject {\n    notes?:string;\n    groupName?:string;\n    contactsCount?:number;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/ContactGroup.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class Conferencing extends helper.Helper {\n\n    createUrl() {\n        return '/account/~/extension/~/conferencing';\n    }\n\n}\n\nexport function $get(context:context.Context):Conferencing {\n    return context.createSingleton('Conferencing', ()=> {\n        return new Conferencing(context);\n    });\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Conferencing.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class Country extends helper.Helper {\n\n    createUrl(options?:any, id?:string) {\n        return '/dictionary/country';\n    }\n\n}\n\nexport function $get(context:context.Context):Country {\n    return context.createSingleton('Country', ()=> {\n        return new Country(context);\n    });\n}\n\nexport interface ICountry extends helper.IHelperObject {\n    name?:string;\n    isoCode?:string;\n    callingCode?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Country.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport validator = require('../core/Validator');\nimport extension = require('./Extension');\nimport deviceModel = require('./DeviceModel');\nimport shippingMethod = require('./ShippingMethod');\nimport phoneNumber = require('./PhoneNumber');\n\nexport class Device extends helper.Helper {\n\n    private validator:validator.Validator;\n    private extension:extension.Extension;\n    private deviceModel:deviceModel.DeviceModel;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.validator = validator.$get(context);\n        this.extension = extension.$get(context);\n        this.deviceModel = deviceModel.$get(context);\n    }\n\n    createUrl(options?:IDeviceOptions, id?:string) {\n\n        options = options || {};\n\n        if (options.order) return '/account/~/order';\n\n        return '/account/~' +\n               (options.extensionId ? '/extension/' + options.extensionId : '') +\n               '/device' +\n               (id ? '/' + id : '');\n\n    }\n\n    /**\n     * @param {IDevice} item\n     */\n    validate(item:IDevice) {\n\n        return this.validator.validate([\n            {\n                field: 'emergencyServiceAddress-street',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.street)\n            },\n            {\n                field: 'emergencyServiceAddress-city',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.city)\n            },\n            {\n                field: 'emergencyServiceAddress-state',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.state)\n            },\n            {\n                field: 'emergencyServiceAddress-country',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.country)\n            },\n            {\n                field: 'emergencyServiceAddress-zip',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.zip)\n            },\n            {\n                field: 'emergencyServiceAddress-customerName',\n                validator: this.validator.required(item && item.emergencyServiceAddress && item.emergencyServiceAddress.customerName)\n            },\n            {field: 'extension', validator: this.validator.required(this.extension.getId(item && item.extension))},\n            {field: 'model', validator: this.validator.required(this.deviceModel.getId(item && item.model))}\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):Device {\n    return context.createSingleton('Device', ()=> {\n        return new Device(context);\n    });\n}\n\nexport interface IContactGroup extends helper.IHelperObject {\n    notes?:string;\n    groupName?:string;\n    contactsCount?:number;\n}\n\nexport interface IDevice extends helper.IHelperObject {\n    type?:string;\n    name?:string;\n    serial?:string;\n    model?:deviceModel.IDeviceModel;\n    extension?:extension.IExtensionShort; //TODO IExtension?\n    emergencyServiceAddress?:IDeviceAddress;\n    shipping?:IDeviceShipping;\n    phoneLines?:IDevicePhoneLine[];\n}\n\nexport interface IDeviceOrder {\n    devices?:IDevice[];\n}\n\nexport interface IDeviceAddress {\n    street?:string;\n    street2?:string;\n    city?:string;\n    state?:string;\n    country?:string;\n    zip?:string;\n    customerName?:string;\n}\n\nexport interface IDeviceShipping {\n    address?:IDeviceAddress;\n    method?:shippingMethod.IShippingMethod;\n    status?:string;\n}\n\nexport interface IDevicePhoneLine {\n    lineType?:string;\n    phoneInfo?:phoneNumber.IPhoneNumber;\n}\n\nexport interface IDeviceOptions {\n    extensionId?:string;\n    order?:boolean;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Device.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class DeviceModel extends helper.Helper {\n\n    getId(device:IDeviceModel) {\n\n        if (!device) return null;\n\n        return device.id + (\n                device.addons && device.addons[0]\n                    ? '-' + device.addons[0].id + '-' + device.addons[0].count\n                    : ''\n            );\n\n    }\n\n    /**\n     * Remove extra textual information from device\n     * @exceptionalCase Platform does not understand full device info\n     */\n    cleanForSaving(device?:IDeviceModel):IDeviceModel {\n\n        if (!device) return null;\n\n        delete device.name;\n        delete device.deviceClass;\n\n        if (device.addons && device.addons.length > 0) {\n\n            device.addons.forEach((addon, i) => {\n                delete device.addons[i].name;\n            });\n\n        } else {\n\n            delete device.addons;\n\n        }\n\n        return device;\n\n    }\n\n    /**\n     * TODO Remove when http://jira.ringcentral.com/browse/SDK-1 is done\n     */\n    devices:IDeviceModel[] = [\n        {\n            id: '-1',\n            name: 'Softphone'\n        },\n        {\n            id: '0',\n            name: 'Existing device'\n        },\n        {\n            id: '19',\n            name: 'Cisco SPA-525G2 Desk Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '23',\n            name: 'Polycom IP 321 Basic IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '30',\n            name: 'Polycom IP 550 HD Manager IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '37',\n            name: 'Polycom IP 6000 Conference Phone',\n            deviceClass: 'Conference Phone'\n        },\n        {\n            id: '40',\n            name: 'Polycom IP 335 HD IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '51',\n            name: 'Cisco SPA-303 Desk Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '16',\n            name: 'Cisco SPA-508G Desk Phone with 1 Expansion Module',\n            deviceClass: 'Desk Phone',\n            addons: [\n                {\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '1'\n                }\n            ]\n        },\n        {\n            id: '16',\n            name: 'Cisco SPA-508G Desk Phone with 2 Expansion Modules',\n            deviceClass: 'Desk Phone',\n            addons: [\n                {\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '2'\n                }\n            ]\n        },\n        {\n            id: '16',\n            name: 'Cisco SPA-508G Desk Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '19',\n            name: 'Cisco SPA-525G2 Desk Phone with 1 Expansion Module',\n            deviceClass: 'Desk Phone',\n            addons: [\n                {\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '1'\n                }\n            ]\n        },\n        {\n            id: '19',\n            name: 'Cisco SPA-525G2 Desk Phone with 2 Expansion Modules\tDesk Phone',\n            addons: [\n                {\n                    id: '2',\n                    name: 'Cisco Sidecar',\n                    count: '2'\n                }\n            ]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone with 1 Expansion Module',\n            deviceClass: 'Desk Phone',\n            addons: [\n                {\n                    id: '1',\n                    name: 'Plolycom Expansion',\n                    count: '1'\n                }\n            ]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone with 2 Expansion Modules',\n            deviceClass: 'Desk Phone',\n            addons: [\n                {\n                    id: '1',\n                    name: 'Plolycom Expansion',\n                    count: '2'\n                }\n            ]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone with 3 Expansion Modules',\n            deviceClass: 'Desk Phone',\n            addons: [\n                {\n                    id: '1',\n                    name: 'Plolycom Expansion',\n                    count: '3'\n                }\n            ]\n        },\n        {\n            id: '34',\n            name: 'Polycom IP 650 HD Executive IP phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '52',\n            name: 'Cisco SPA-122 ATA',\n            deviceClass: 'Analog Adapter'\n        },\n        {\n            id: '53',\n            name: 'Polycom VVX-500 Color Touchscreen',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '54',\n            name: 'Polycom VVX-310 Gigabit Ethernet Phone',\n            deviceClass: 'Desk Phone'\n        },\n        {\n            id: '55',\n            name: 'Polycom VVX-410 Color Gigabit Ethernet Phone',\n            deviceClass: 'Desk Phone'\n        }\n    ];\n\n}\n\nexport function $get(context:context.Context):DeviceModel {\n    return context.createSingleton('DeviceModel', ()=> {\n        return new DeviceModel(context);\n    });\n}\n\nexport interface IDeviceModel extends helper.IHelperObject {\n    name?:string;\n    deviceClass?:string;\n    addons?:IDeviceModelAddon[];\n}\n\nexport interface IDeviceModelAddon extends helper.IHelperObject {\n    name?:string;\n    count?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/DeviceModel.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport list = require('../core/List');\nimport contact = require('./Contact');\nimport service = require('./Service');\nimport country = require('./Country');\nimport timezone = require('./Timezone');\nimport language = require('./Language');\nimport presence = require('./Presence');\n\nexport class Extension extends helper.Helper {\n\n    private list:list.List;\n\n    type = {\n        department: 'Department',\n        user: 'User',\n        announcement: 'Announcement',\n        voicemail: 'Voicemail'\n    };\n\n    constructor(context:context.Context) {\n        super(context);\n        this.list = list.$get(context);\n    }\n\n    createUrl(options?:IExtensionOptions, id?:string) {\n\n        options = options || {};\n\n        return '/account/~' +\n               (options.departmentId ? '/department/' + options.departmentId + '/members' : '/extension') +\n               (id ? '/' + id : '');\n\n    }\n\n    isUser(extension?:IExtension) {\n        return extension && extension.type == this.type.user;\n    }\n\n    isDepartment(extension?:IExtension) {\n        return extension && extension.type == this.type.department;\n    }\n\n    isAnnouncement(extension?:IExtension) {\n        return extension && extension.type == this.type.announcement;\n    }\n\n    isVoicemail(extension?:IExtension) {\n        return extension && extension.type == this.type.voicemail;\n    }\n\n    comparator(options?:list.IListComparatorOptions) {\n\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'extensionNumber',\n            compareFn: this.list.numberComparator\n        }, options));\n\n    }\n\n    filter(options?:IExtensionFilterOptions) {\n\n        options = this.utils.extend({\n            search: '',\n            type: ''\n        }, options);\n\n        return this.list.filter([\n            {filterBy: 'type', condition: options.type},\n            {\n                condition: options.search.toLocaleLowerCase(),\n                filterFn: this.list.containsFilter,\n                extractFn: (item) => {\n                    return (item.name && (item.name.toLocaleLowerCase() + ' ')) +\n                           (item.extensionNumber && item.extensionNumber.toString().toLocaleLowerCase());\n                }\n            }\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):Extension {\n    return context.createSingleton('Extension', ()=> {\n        return new Extension(context);\n    });\n}\n\nexport interface IExtensionOptions {\n    departmentId?:string;\n}\n\nexport interface IExtensionFilterOptions {\n    search?:string;\n    type?:string;\n}\n\nexport interface IExtensionRegionalSettings {\n    timezone?:timezone.ITimezone;\n    language?:language.ILanguage;\n    homeCountry?:country.ICountry;\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/ch18s04.html#ShortExtensionInfo\n */\nexport interface IExtensionShort extends helper.IHelperObject {\n    extensionNumber?:string;\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/latest/webhelp/dev_guide_advanced/ch18s04.html#ExtensionInfo\n */\nexport interface IExtension extends helper.IHelperObject {\n    extensionNumber?:string;\n    name?:string;\n    type?:string;\n    status?:string;\n    setupWizardState?:string;\n    contact?:contact.IContactBrief;\n    regionalSettings?:IExtensionRegionalSettings;\n    serviceFeatures?:service.IServiceFeature[];\n    presence?:presence.IPresence; // added by helper\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Extension.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport list = require('../core/List');\n\nexport class ForwardingNumber extends helper.Helper {\n\n    private list:list.List;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.list = list.$get(context);\n    }\n\n    createUrl(options?:{extensionId?:string}, id?:string) {\n\n        options = options || {};\n\n        return '/account/~/extension/' + (options.extensionId || '~') + '/forwarding-number' + (id ? '/' + id : '');\n\n    }\n\n    getId(forwardingNumber) {\n        return forwardingNumber && (forwardingNumber.id || (forwardingNumber.phoneNumber)); //TODO @exceptionalCase\n    }\n\n    hasFeature(phoneNumber:IForwardingNumber, feature) {\n        return (!!phoneNumber && !!phoneNumber.features && phoneNumber.features.indexOf(feature) != -1);\n    }\n\n    comparator(options?:list.IListComparatorOptions) {\n\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'label'\n        }, options));\n\n    }\n\n    filter(options?:{features:string[]}) {\n\n        options = this.utils.extend({\n            features: []\n        }, options);\n\n        return this.list.filter([{\n            condition: options.features.length,\n            filterFn: (item) => {\n\n                return options.features.some((feature) => {\n                    return this.hasFeature(item, feature);\n                });\n\n            }\n        }]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):ForwardingNumber {\n    return context.createSingleton('ForwardingNumber', ()=> {\n        return new ForwardingNumber(context);\n    });\n}\n\nexport interface IForwardingNumber extends helper.IHelperObject {\n    label?:string;\n    phoneNumber?:string;\n    flipNumber?:string;\n    features?:string[];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/ForwardingNumber.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class Language extends helper.Helper {\n\n    languages:ILanguage[] = [\n        {\n            id: '1033',\n            name: 'English (US)'\n        },\n        {\n            id: '3084',\n            name: 'French (Canada)'\n        }\n    ];\n\n}\n\nexport function $get(context:context.Context):Language {\n    return context.createSingleton('Language', ()=> {\n        return new Language(context);\n    });\n}\n\nexport interface ILanguage extends helper.IHelperObject {\n    name?:string;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Language.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport list = require('../core/List');\nimport state = require('./State');\n\nexport class Location extends helper.Helper {\n\n    private list:list.List;\n    private state:state.State;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.list = list.$get(context);\n        this.state = state.$get(context);\n    }\n\n    createUrl() {\n        return '/dictionary/location';\n    }\n\n    filter(options?:ILocationFilterOptions) {\n\n        var uniqueNPAs = [];\n\n        options = this.utils.extend({\n            stateId: '',\n            onlyUniqueNPA: false\n        }, options);\n\n        return this.list.filter([\n            {\n                condition: options.stateId,\n                filterFn: (item:ILocation, opts) => {\n                    return (this.state.getId(item.state) == opts.condition);\n                }\n            },\n            {\n                condition: options.onlyUniqueNPA,\n                filterFn: (item:ILocation, opts) => {\n                    if (uniqueNPAs.indexOf(item.npa) == -1) {\n                        uniqueNPAs.push(item.npa);\n                        return true;\n                    } else {\n                        return false;\n                    }\n                }\n            }\n        ]);\n\n    }\n\n    comparator(options?:list.IListComparatorOptions) {\n\n        options = this.utils.extend({\n            sortBy: 'npa'\n        }, options);\n\n        if (options.sortBy == 'nxx') {\n\n            options.extractFn = (item:ILocation) => {\n                return (parseInt(item.npa) * 1000000) + parseInt(item.nxx);\n            };\n\n            options.compareFn = this.list.numberComparator;\n\n        }\n\n        return this.list.comparator(options);\n\n    }\n\n}\n\nexport function $get(context:context.Context):Location {\n    return context.createSingleton('Location', ()=> {\n        return new Location(context);\n    });\n}\n\nexport interface ILocation extends helper.IHelperObject {\n    name?:string;\n    isoCode?:string;\n    npa?:string;\n    nxx?:string;\n    state?:state.IState;\n}\n\nexport interface ILocationFilterOptions {\n    stateId?:string;\n    onlyUniqueNPA?:boolean;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Location.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport list = require('../core/List');\nimport validator = require('../core/Validator');\nimport subscription = require('../core/Subscription');\nimport platform = require('../core/Platform');\nimport contact = require('./Contact');\nimport call = require('./Call');\n\nexport class Message extends helper.Helper {\n\n    private list:list.List;\n    private contact:contact.Contact;\n    private platform:platform.Platform;\n    private validator:validator.Validator;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.contact = contact.$get(context);\n        this.list = list.$get(context);\n        this.platform = platform.$get(context);\n        this.validator = validator.$get(context);\n    }\n\n    /**\n     *\n     * @exceptionalCase Different endpoint when creating SMS/Pager\n     */\n    createUrl(options?:IMessageOptions, id?:string|number) {\n\n        options = options || {};\n\n        var root = '/account/~/extension/' + (options.extensionId || '~');\n\n        if (options.fax) return root + '/fax';\n        if (options.sms) return root + '/sms';\n        if (options.pager) return root + '/company-pager';\n        if (options.sync) return root + '/message-sync';\n\n        return root + '/message-store' + (id ? '/' + id : '');\n\n    }\n\n    isInbound(message):IMessage {\n        return (message && message.direction == 'Inbound');\n    }\n\n    isOutbound(message):IMessage {\n        return !this.isInbound(message);\n    }\n\n    isSMS(message:IMessage) {\n        return (message && message.type == 'SMS');\n    }\n\n    isPager(message:IMessage):IMessage {\n        return (message && message.type == 'Pager');\n    }\n\n    isVoiceMail(message:IMessage) {\n        return (message && message.type == 'VoiceMail');\n    }\n\n    isFax(message:IMessage) {\n        return (message && message.type == 'Fax');\n    }\n\n    isAlive(message:IMessage) {\n        //return (this.availability != 'Deleted' && this.availability != 'Purged');\n        return (message && message.availability == 'Alive');\n    }\n\n    isRead(message:IMessage) {\n        return (message.readStatus == 'Read');\n    }\n\n    setIsRead(message:IMessage, isRead:boolean):IMessage {\n        message.readStatus = (!!isRead) ? 'Read' : 'Unread';\n        return message;\n    }\n\n    getAttachmentUrl(message:IMessage, i:number) {\n        return message.attachments[i] ? this.platform.apiUrl(message.attachments[i].uri, {\n            addMethod: 'GET',\n            addServer: true,\n            addToken: true\n        }) : '';\n    }\n\n    getAttachmentContentType(message:IMessage, i:number) {\n        return message.attachments[i] ? message.attachments[i].contentType : '';\n    }\n\n    getSubscription(options?:IMessageOptions):subscription.Subscription {\n\n        return subscription.$get(this.context).setEvents([this.createUrl(options)]);\n\n    }\n\n    /**\n     * Returns from-phones if inbound (oterwise to-phones)\n     */\n    getCallerInfos(message:IMessage):call.ICallerInfo[] {\n        return this.isInbound(message) ? [message.from] : message.to;\n    }\n\n    /**\n     * Returns first from-phones if inbound (oterwise to-phones), then vice-versa\n     */\n    getAllCallerInfos(message:IMessage):call.ICallerInfo[] {\n        return this.getCallerInfos(message).concat(this.isInbound(message) ? message.to : [message.from]);\n    }\n\n    /**\n     * TODO Compare as dates\n     */\n    comparator(options?:list.IListComparatorOptions) {\n\n        return this.list.comparator(this.utils.extend({\n            sortBy: 'creationTime'\n        }, options));\n\n    }\n\n    filter(options?:IMessageFilterOptions) {\n\n        options = this.utils.extend({\n            search: '',\n            alive: true,\n            direction: '',\n            conversationId: '',\n            readStatus: ''\n        }, options);\n\n        return this.list.filter([\n            {condition: options.alive, filterFn: this.isAlive},\n            {filterBy: 'type', condition: options.type},\n            {filterBy: 'direction', condition: options.direction},\n            {filterBy: 'conversationId', condition: options.conversationId},\n            {filterBy: 'readStatus', condition: options.readStatus},\n            {filterBy: 'subject', condition: options.search, filterFn: this.list.containsFilter}\n        ]);\n\n    }\n\n    /**\n     * Injects contact field with appropriate {IContact} data structure into all callerInfos found in all messages\n     * Warning, this function may be performance-consuming, reduce the amount of items passed to contacts and messages\n     */\n    attachContacts(contacts:contact.IContact[], messages:IMessage[], options?:contact.IContactMatchOptions) {\n\n        var self = this;\n\n        // Flatten all caller infos from all messages\n        var callerInfos = messages.reduce((callerInfos, message) => {\n\n            return callerInfos.concat(self.getAllCallerInfos(message));\n\n        }, []);\n\n        this.contact.attachToCallerInfos(callerInfos, contacts, options);\n\n    }\n\n    shorten(message:IMessage):IMessageShort {\n\n        return {\n            from: message.from,\n            to: message.to,\n            text: message.subject\n        };\n\n    }\n\n    validateSMS(item:IMessage) {\n\n        return this.validator.validate([\n            {field: 'to', validator: this.validator.required(this.utils.getProperty(item, 'to[0].phoneNumber'))},\n            {field: 'from', validator: this.validator.required(this.utils.getProperty(item, 'from.phoneNumber'))},\n            {field: 'subject', validator: this.validator.required(this.utils.getProperty(item, 'subject'))},\n            {field: 'subject', validator: this.validator.length(this.utils.getProperty(item, 'subject'), 160)}\n        ]);\n\n    }\n\n    validatePager(item:IMessage) {\n\n        return this.validator.validate([\n            {field: 'to', validator: this.validator.required(this.utils.getProperty(item, 'to.extensionNumber'))},\n            {field: 'from', validator: this.validator.required(this.utils.getProperty(item, 'from.extensionNumber'))},\n            {field: 'subject', validator: this.validator.required(this.utils.getProperty(item, 'subject'))},\n            {field: 'subject', validator: this.validator.length(this.utils.getProperty(item, 'subject'), 160)}\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):Message {\n    return context.createSingleton('Message', ()=> {\n        return new Message(context);\n    });\n}\n\nexport interface IMessage extends helper.IHelperObject {\n    to?:call.ICallerInfo[];\n    from?:call.ICallerInfo;\n    type?:string;\n    creationTime?:string;\n    readStatus?:string;\n    priority?:string;\n    attachments?:IMessageAttachment[];\n    direction?:string;\n    availability?:string;\n    subject?:string;\n    messageStatus?:string;\n    conversationId?:string;\n    lastModifiedTime?:string;\n}\n\nexport interface IMessageShort {\n    to?:call.ICallerInfo[];\n    from?:call.ICallerInfo;\n    text?:string;\n}\n\nexport interface IMessageOptions {\n    fax?:boolean;\n    sync?:boolean;\n    sms?:boolean;\n    pager?:boolean;\n    extensionId?:string;\n}\n\nexport interface IMessageFilterOptions {\n    alive?:boolean;\n    conversationId?:string;\n    direction?:string;\n    readStatus?:string;\n    type?:string;\n    search?:string;\n}\n\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch18s01.html#MessageAttachmentInfo\n */\nexport interface IMessageFaxAttachment extends helper.IHelperObject {\n    contentType?:string;\n    content?:string;\n    fileName?:string;\n}\n/**\n * @see http://platform-dev.dins.ru/artifacts/documentation/webhelp/dev_guide/content/ch18s01.html#MessageAttachmentInfo\n */\nexport interface IMessageAttachment extends helper.IHelperObject {\n    contentType?:string;\n    vmDuration?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Message.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport list = require('../core/List');\nimport extension = require('./Extension');\n\nexport class PhoneNumber extends helper.Helper {\n\n    private extension:extension.Extension;\n    private list:list.List;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.extension = extension.$get(context);\n        this.list = list.$get(context);\n    }\n\n    createUrl(options?:IPhoneNumberOptions, id?:string) {\n\n        options = options || {};\n\n        if (options.lookup) return '/number-pool/lookup';\n\n        return '/account/~' +\n               (options.extensionId ? '/extension/' + options.extensionId : '') +\n               '/phone-number' +\n               (id ? '/' + id : '');\n\n    }\n\n    isSMS(phoneNumber:IPhoneNumber) {\n        return this.hasFeature(phoneNumber, 'SmsSender');\n    }\n\n    hasFeature(phoneNumber:IPhoneNumber, feature:string) {\n        return (!!phoneNumber.features && phoneNumber.features.indexOf(feature) != -1);\n    }\n\n    reserve(phoneNumber:IPhoneNumber, date:any) {\n        phoneNumber.reservedTill = new Date(date).toISOString();\n    }\n\n    unreserve(phoneNumber:IPhoneNumber) {\n        phoneNumber.reservedTill = null;\n    }\n\n    comparator(options?:list.IListComparatorOptions) {\n\n        return this.list.comparator(this.utils.extend({\n            extractFn: (item:IPhoneNumber) => {\n                return item.usageType + '-' +\n                       item.paymentType + '-' +\n                       item.type;\n            }\n        }, options));\n\n    }\n\n    /**\n     * TODO Add other filtering methods http://jira.ringcentral.com/browse/SDK-5\n     */\n    filter(options?:IPhoneNumberFilterOptions) {\n\n        options = this.utils.extend({\n            usageType: '',\n            paymentType: '',\n            type: '',\n            features: []\n        }, options);\n\n        return this.list.filter([\n            {filterBy: 'usageType', condition: options.usageType},\n            {filterBy: 'paymentType', condition: options.paymentType},\n            {filterBy: 'type', condition: options.type},\n            {\n                condition: options.features.length,\n                filterFn: (item:IPhoneNumber) => {\n\n                    return options.features.some((feature:string) => {\n                        return this.hasFeature(item, feature);\n                    });\n\n                }\n            }\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):PhoneNumber {\n    return context.createSingleton('PhoneNumber', ()=> {\n        return new PhoneNumber(context);\n    });\n}\n\nexport interface IPhoneNumber extends helper.IHelperObject {\n    phoneNumber?:string;\n    paymentType?:string; // External, TollFree, Local\n    location?:string;\n    type?:string; // VoiceFax, FaxOnly, VoiceOnly\n    usageType?:string; // CompanyNumber, DirectNumber, CompanyFaxNumber, ForwardedNumber\n    features?:string[]; // CallerId, SmsSender\n    reservedTill?:string;\n    error?:string;\n}\n\nexport interface IPhoneNumberOptions {\n    extensionId?:string;\n    lookup?:boolean;\n    countryId?:string;\n    paymentType?:string;\n    npa?:string;\n    nxx?:string;\n    line?:string;\n    exclude?:string;\n}\n\nexport interface IPhoneNumberFilterOptions {\n    paymentType?:string;\n    usageType?:string;\n    type?:string;\n    features?:string[];\n}\n\nexport interface IPhoneNumberOrder {\n    records?:IPhoneNumber[];\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/PhoneNumber.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport subscription = require('../core/Subscription');\nimport extension = require('./Extension');\n\nexport class Presence extends helper.Helper {\n\n    private extension:extension.Extension;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.extension = extension.$get(context);\n    }\n\n    createUrl(options?:IPresenceOptions, id?:string) {\n\n        options = options || {};\n\n        return '/account/~/extension/' + (id || '~') + '/presence' + (options.detailed ? '?detailedTelephonyState=true' : '');\n\n    }\n\n    getId(presence:IPresence) {\n        return presence && (this.extension.getId(presence.extension) || presence.extensionId);\n    }\n\n    isAvailable(presence:IPresence) {\n        return presence && presence.presenceStatus == 'Available';\n    }\n\n    getSubscription(options?:IPresenceOptions, id?:string):subscription.Subscription {\n\n        return subscription.$get(this.context).setEvents([this.createUrl(options, id)]);\n\n    }\n\n    updateSubscription(subscription:subscription.Subscription,\n                       presences:IPresence[],\n                       options?:IPresenceOptions):subscription.Subscription {\n\n        var events = presences.map(this.getId, this).map((id) => {\n            return this.createUrl(options, id);\n        }, this);\n\n        subscription.addEvents(events);\n\n        return subscription;\n\n    }\n\n    attachToExtensions(extensions:extension.IExtension[], presences:IPresence[], merge?:boolean) {\n\n        var index = this.index(presences);\n\n        extensions.forEach((ex:extension.IExtension) => {\n\n            var presence = index[this.extension.getId(ex)];\n\n            if (presence) {\n                if ('presence' in ex && merge) {\n                    this.utils.extend(ex.presence, presence);\n                } else {\n                    ex.presence = presence;\n                }\n            }\n\n        }, this);\n\n        return this;\n\n    }\n\n    isCallInProgress(presenceCall:IPresenceCall) {\n        return (presenceCall && presenceCall.telephonyStatus != 'NoCall');\n    }\n\n\n}\n\nexport function $get(context:context.Context):Presence {\n    return context.createSingleton('Presence', ()=> {\n        return new Presence(context);\n    });\n}\n\nexport interface IPresence extends helper.IHelperObject {\n    extension?:extension.IExtension;\n    activeCalls?:IPresenceCall[];\n    presenceStatus?:string; // Offline, Busy, Available\n    telephonyStatus?:string; // NoCall, CallConnected, Ringing, OnHold\n    userStatus?:string; // Offline, Busy, Available\n    dndStatus?:string; // TakeAllCalls, DoNotAcceptAnyCalls, DoNotAcceptDepartmentCalls, TakeDepartmentCallsOnly\n    allowSeeMyPresence?:boolean;\n    ringOnMonitoredCall?:boolean;\n    pickUpCallsOnHold?:boolean;\n    extensionId?:string;\n    sequence?:number;\n}\n\nexport interface IPresenceCall {\n    direction?:string;\n    from?:string;\n    to?:string;\n    sessionId?:string;\n    id?:string;\n    telephonyStatus?:string;\n}\n\nexport interface IPresenceOptions {\n    detailed?:boolean;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Presence.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport validator = require('../core/Validator');\nimport call = require('./Call');\n\nexport class Ringout extends helper.Helper {\n\n    private validator:validator.Validator;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.validator = validator.$get(context);\n    }\n\n    createUrl(options?:{extensionId?:string}, id?:string) {\n\n        options = options || {};\n\n        return '/account/~/extension/' + (options.extensionId || '~') + '/ringout' + (id ? '/' + id : '');\n\n    }\n\n    resetAsNew(object:IRingout) {\n        object = super.resetAsNew(object);\n        if (object) {\n            delete object.status;\n        }\n        return object;\n    }\n\n    isInProgress(ringout:IRingout) {\n        return ringout && !this.isNew(ringout) && ringout.status && ringout.status.callStatus == 'InProgress';\n    }\n\n    isSuccess(ringout:IRingout) {\n        return ringout && !this.isNew(ringout) && ringout.status && ringout.status.callStatus == 'Success';\n    }\n\n    isError(ringout:IRingout) {\n        return !this.isNew(ringout) && !this.isInProgress(ringout) && !this.isSuccess(ringout);\n    }\n\n    validate(item:IRingout) {\n\n        return this.validator.validate([\n            {field: 'to', validator: this.validator.required(item && item.to && item.to.phoneNumber)},\n            {field: 'from', validator: this.validator.required(item && item.from && item.from.phoneNumber)}\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):Ringout {\n    return context.createSingleton('Ringout', ()=> {\n        return new Ringout(context);\n    });\n}\n\nexport interface IRingout extends helper.IHelperObject {\n    from?:call.ICallerInfo; // (!) ONLY PHONE NUMBER\n    to?:call.ICallerInfo; // (!) ONLY PHONE NUMBER\n    callerId?:call.ICallerInfo; // (!) ONLY PHONE NUMBER\n    playPrompt?:boolean;\n    status?:{\n        callStatus?:string;\n        callerStatus?:string;\n        calleeStatus?:string\n    };\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Ringout.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class Service extends helper.Helper {\n\n    createUrl() {\n        return '/account/~/service-info';\n    }\n\n    isEnabled(feature:string, serviceFeatures:IServiceFeature[]) {\n\n        return serviceFeatures.reduce((value, f) => {\n\n            if (f.featureName == feature) value = f.enabled;\n            return value;\n\n        }, false);\n\n    }\n\n    isServiceFeatureEnabledMethod(feature) {\n        return (serviceFeatures) => {\n            return this.isEnabled(feature, serviceFeatures);\n        };\n    }\n\n    isSmsEnabled = this.isServiceFeatureEnabledMethod('SMS');\n    isSmsReceivingEnabled = this.isServiceFeatureEnabledMethod('SMSReceiving');\n    isPresenceEnabled = this.isServiceFeatureEnabledMethod('Presence');\n    isRingOutEnabled = this.isServiceFeatureEnabledMethod('RingOut');\n    isInternationalCallingEnabled = this.isServiceFeatureEnabledMethod('InternationalCalling');\n    isDndEnabled = this.isServiceFeatureEnabledMethod('DND');\n    isFaxEnabled = this.isServiceFeatureEnabledMethod('Fax');\n    isFaxReceivingEnabled = this.isServiceFeatureEnabledMethod('FaxReceiving');\n    isVoicemailEnabled = this.isServiceFeatureEnabledMethod('Voicemail');\n    isPagerEnabled = this.isServiceFeatureEnabledMethod('Pager');\n    isPagerReceivingEnabled = this.isServiceFeatureEnabledMethod('PagerReceiving');\n    isVoipCallingEnabled = this.isServiceFeatureEnabledMethod('VoipCalling');\n    isVideoConferencingEnabled = this.isServiceFeatureEnabledMethod('VideoConferencing');\n    isSalesForceEnabled = this.isServiceFeatureEnabledMethod('SalesForce');\n    isIntercomEnabled = this.isServiceFeatureEnabledMethod('Intercom');\n    isPagingEnabled = this.isServiceFeatureEnabledMethod('Paging');\n    isConferencingEnabled = this.isServiceFeatureEnabledMethod('Conferencing');\n    isFreeSoftPhoneLinesEnabled = this.isServiceFeatureEnabledMethod('FreeSoftPhoneLines');\n    isHipaaComplianceEnabled = this.isServiceFeatureEnabledMethod('HipaaCompliance');\n    isCallParkEnabled = this.isServiceFeatureEnabledMethod('CallPark');\n    isOnDemandCallRecordingEnabled = this.isServiceFeatureEnabledMethod('OnDemandCallRecording');\n\n}\n\nexport function $get(context:context.Context):Service {\n    return context.createSingleton('Service', ()=> {\n        return new Service(context);\n    });\n}\n\nexport interface IService extends helper.IHelperObject {\n    serviceFeatures?:IServiceFeature[];\n    servicePlanName?:string;\n}\n\nexport interface IServiceFeature {\n    featureName?:string;\n    enabled?:boolean;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Service.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class ShippingMethod extends helper.Helper {\n\n    /**\n     * TODO Add or describe options http://jira.ringcentral.com/browse/SDK-3 id done\n     */\n    createUrl() {\n        return '/dictionary/shipping-options';\n    }\n\n}\n\nexport function $get(context:context.Context):ShippingMethod {\n    return context.createSingleton('ShippingMethod', ()=> {\n        return new ShippingMethod(context);\n    });\n}\n\nexport interface IShippingMethodOptions {\n    quantity?:number;\n    servicePlanId?:number;\n    brandId?:number;\n}\n\nexport interface IShippingMethodInfo {\n    quantity?:string;\n    price?:string;\n    method?:IShippingMethod;\n}\n\n/**\n * @discrepancy Methods does not have URI\n */\nexport interface IShippingMethod extends helper.IHelperObject {\n    id?:string;\n    name?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/ShippingMethod.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\nimport list = require('../core/List');\nimport country = require('./Country');\n\nexport class State extends helper.Helper {\n\n    private countryHelper:country.Country;\n    private list:list.List;\n\n    constructor(context:context.Context) {\n        super(context);\n        this.countryHelper = country.$get(context);\n        this.list = list.$get(context);\n    }\n\n    createUrl() {\n        return '/dictionary/state';\n    }\n\n    filter(options?:IStateOptions) {\n\n        options = this.utils.extend({\n            countryId: ''\n        }, options);\n\n        return this.list.filter([\n            {\n                condition: options.countryId,\n                filterFn: (item:IState, opts) => {\n                    return (this.countryHelper.getId(item.country) == opts.condition);\n                }\n            }\n        ]);\n\n    }\n\n}\n\nexport function $get(context:context.Context):State {\n    return context.createSingleton('State', ()=> {\n        return new State(context);\n    });\n}\n\nexport interface IState extends helper.IHelperObject {\n    name?:string;\n    isoCode?:string;\n    country?:country.ICountry;\n}\n\nexport interface IStateOptions {\n    countryId?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/State.ts\n **/","/// <reference path=\"../../typings/externals.d.ts\" />\n\nimport context = require('../core/Context');\nimport helper = require('../core/Helper');\n\nexport class Timezone extends helper.Helper {\n\n    createUrl() {\n        return '/dictionary/timezone';\n    }\n\n}\n\nexport function $get(context:context.Context):Timezone {\n    return context.createSingleton('Timezone', ()=> {\n        return new Timezone(context);\n    });\n}\n\nexport interface ITimezone extends helper.IHelperObject {\n    name?:string;\n    description?:string;\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/helpers/Timezone.ts\n **/","// Version: 3.7.10\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     JSON     =============================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\n(window['JSON'] && window['JSON']['stringify']) || (function () {\n    window['JSON'] || (window['JSON'] = {});\n\n    function toJSON(key) {\n        try      { return this.valueOf() }\n        catch(e) { return null }\n    }\n\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        gap,\n        indent,\n        meta = {    // table of character substitutions\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"' : '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        },\n        rep;\n\n    function quote(string) {\n        escapable.lastIndex = 0;\n        return escapable.test(string) ?\n            '\"' + string.replace(escapable, function (a) {\n                var c = meta[a];\n                return typeof c === 'string' ? c :\n                    '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + '\"' :\n            '\"' + string + '\"';\n    }\n\n    function str(key, holder) {\n        var i,          // The loop counter.\n            k,          // The member key.\n            v,          // The member value.\n            length,\n            partial,\n            mind  = gap,\n            value = holder[key];\n\n        if (value && typeof value === 'object') {\n            value = toJSON.call( value, key );\n        }\n\n        if (typeof rep === 'function') {\n            value = rep.call(holder, key, value);\n        }\n\n        switch (typeof value) {\n        case 'string':\n            return quote(value);\n\n        case 'number':\n            return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n            return String(value);\n\n        case 'object':\n\n            if (!value) {\n                return 'null';\n            }\n\n            gap += indent;\n            partial = [];\n\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n\n                v = partial.length === 0 ? '[]' :\n                    gap ? '[\\n' + gap +\n                            partial.join(',\\n' + gap) + '\\n' +\n                                mind + ']' :\n                          '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    k = rep[i];\n                    if (typeof k === 'string') {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            } else {\n                for (k in value) {\n                    if (Object.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n\n            v = partial.length === 0 ? '{}' :\n                gap ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' +\n                        mind + '}' : '{' + partial.join(',') + '}';\n            gap = mind;\n            return v;\n        }\n    }\n\n    if (typeof JSON['stringify'] !== 'function') {\n        JSON['stringify'] = function (value, replacer, space) {\n            var i;\n            gap = '';\n            indent = '';\n\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n            } else if (typeof space === 'string') {\n                indent = space;\n            }\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                    (typeof replacer !== 'object' ||\n                     typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n            return str('', {'': value});\n        };\n    }\n\n    if (typeof JSON['parse'] !== 'function') {\n        // JSON is parsed on the server for security.\n        JSON['parse'] = function (text) {return eval('('+text+')')};\n    }\n}());\nvar NOW             = 1\n,   READY           = false\n,   READY_BUFFER    = []\n,   PRESENCE_SUFFIX = '-pnpres'\n,   DEF_WINDOWING   = 10     // MILLISECONDS.\n,   DEF_TIMEOUT     = 10000  // MILLISECONDS.\n,   DEF_SUB_TIMEOUT = 310    // SECONDS.\n,   DEF_KEEPALIVE   = 60     // SECONDS (FOR TIMESYNC).\n,   SECOND          = 1000   // A THOUSAND MILLISECONDS.\n,   URLBIT          = '/'\n,   PARAMSBIT       = '&'\n,   PRESENCE_HB_THRESHOLD = 5\n,   PRESENCE_HB_DEFAULT  = 30\n,   SDK_VER         = '3.7.10'\n,   REPL            = /{([\\w\\-]+)}/g;\n\n/**\n * UTILITIES\n */\nfunction unique() { return'x'+ ++NOW+''+(+new Date) }\nfunction rnow()   { return+new Date }\n\n/**\n * NEXTORIGIN\n * ==========\n * var next_origin = nextorigin();\n */\nvar nextorigin = (function() {\n    var max = 20\n    ,   ori = Math.floor(Math.random() * max);\n    return function( origin, failover ) {\n        return origin.indexOf('pubsub.') > 0\n            && origin.replace(\n             'pubsub', 'ps' + (\n                failover ? generate_uuid().split('-')[0] :\n                (++ori < max? ori : ori=1)\n            ) ) || origin;\n    }\n})();\n\n\n/**\n * Build Url\n * =======\n *\n */\nfunction build_url( url_components, url_params ) {\n    var url    = url_components.join(URLBIT)\n    ,   params = [];\n\n    if (!url_params) return url;\n\n    each( url_params, function( key, value ) {\n        var value_str = (typeof value == 'object')?JSON['stringify'](value):value;\n        (typeof value != 'undefined' &&\n            value != null && encode(value_str).length > 0\n        ) && params.push(key + \"=\" + encode(value_str));\n    } );\n\n    url += \"?\" + params.join(PARAMSBIT);\n    return url;\n}\n\n/**\n * UPDATER\n * =======\n * var timestamp = unique();\n */\nfunction updater( fun, rate ) {\n    var timeout\n    ,   last   = 0\n    ,   runnit = function() {\n        if (last + rate > rnow()) {\n            clearTimeout(timeout);\n            timeout = setTimeout( runnit, rate );\n        }\n        else {\n            last = rnow();\n            fun();\n        }\n    };\n\n    return runnit;\n}\n\n/**\n * GREP\n * ====\n * var list = grep( [1,2,3], function(item) { return item % 2 } )\n */\nfunction grep( list, fun ) {\n    var fin = [];\n    each( list || [], function(l) { fun(l) && fin.push(l) } );\n    return fin\n}\n\n/**\n * SUPPLANT\n * ========\n * var text = supplant( 'Hello {name}!', { name : 'John' } )\n */\nfunction supplant( str, values ) {\n    return str.replace( REPL, function( _, match ) {\n        return values[match] || _\n    } );\n}\n\n/**\n * timeout\n * =======\n * timeout( function(){}, 100 );\n */\nfunction timeout( fun, wait ) {\n    return setTimeout( fun, wait );\n}\n\n/**\n * uuid\n * ====\n * var my_uuid = generate_uuid();\n */\nfunction generate_uuid(callback) {\n    var u = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,\n    function(c) {\n        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n        return v.toString(16);\n    });\n    if (callback) callback(u);\n    return u;\n}\n\nfunction isArray(arg) {\n  return !!arg && typeof arg !== 'string' && (Array.isArray && Array.isArray(arg) || typeof(arg.length) === \"number\")\n  //return !!arg && (Array.isArray && Array.isArray(arg) || typeof(arg.length) === \"number\")\n}\n\n/**\n * EACH\n * ====\n * each( [1,2,3], function(item) { } )\n */\nfunction each( o, f) {\n    if ( !o || !f ) return;\n\n    if ( isArray(o) )\n        for ( var i = 0, l = o.length; i < l; )\n            f.call( o[i], o[i], i++ );\n    else\n        for ( var i in o )\n            o.hasOwnProperty    &&\n            o.hasOwnProperty(i) &&\n            f.call( o[i], i, o[i] );\n}\n\n/**\n * MAP\n * ===\n * var list = map( [1,2,3], function(item) { return item + 1 } )\n */\nfunction map( list, fun ) {\n    var fin = [];\n    each( list || [], function( k, v ) { fin.push(fun( k, v )) } );\n    return fin;\n}\n\n\nfunction pam_encode(str) {\n  return encodeURIComponent(str).replace(/[!'()*~]/g, function(c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase();\n  });\n}\n\n/**\n * ENCODE\n * ======\n * var encoded_data = encode('path');\n */\nfunction encode(path) { return encodeURIComponent(path) }\n\n/**\n * Generate Subscription Channel List\n * ==================================\n * generate_channel_list(channels_object);\n */\nfunction generate_channel_list(channels, nopresence) {\n    var list = [];\n    each( channels, function( channel, status ) {\n        if (nopresence) {\n            if(channel.search('-pnpres') < 0) {\n                if (status.subscribed) list.push(channel);\n            }\n        } else {\n            if (status.subscribed) list.push(channel);\n        }\n    });\n    return list.sort();\n}\n\n/**\n * Generate Subscription Channel Groups List\n * ==================================\n * generate_channel_group_list(channels_groups object);\n */\nfunction generate_channel_group_list(channel_groups, nopresence) {\n    var list = [];\n    each(channel_groups, function( channel_group, status ) {\n        if (nopresence) {\n            if(channel_group.search('-pnpres') < 0) {\n                if (status.subscribed) list.push(channel_group);\n            }\n        } else {\n            if (status.subscribed) list.push(channel_group);\n        }\n    });\n    return list.sort();\n}\n\n// PUBNUB READY TO CONNECT\nfunction ready() { timeout( function() {\n    if (READY) return;\n    READY = 1;\n    each( READY_BUFFER, function(connect) { connect() } );\n}, SECOND ); }\n\nfunction PNmessage(args) {\n    msg = args || {'apns' : {}},\n    msg['getPubnubMessage'] = function() {\n        var m = {};\n\n        if (Object.keys(msg['apns']).length) {\n            m['pn_apns'] = {\n                    'aps' : {\n                        'alert' : msg['apns']['alert'] ,\n                        'badge' : msg['apns']['badge']\n                    }\n            }\n            for (var k in msg['apns']) {\n                m['pn_apns'][k] = msg['apns'][k];\n            }\n            var exclude1 = ['badge','alert'];\n            for (var k in exclude1) {\n                delete m['pn_apns'][exclude1[k]];\n            }\n        }\n\n\n\n        if (msg['gcm']) {\n            m['pn_gcm'] = {\n                'data' : msg['gcm']\n            }\n        }\n\n        for (var k in msg) {\n            m[k] = msg[k];\n        }\n        var exclude = ['apns','gcm','publish', 'channel','callback','error'];\n        for (var k in exclude) {\n            delete m[exclude[k]];\n        }\n\n        return m;\n    };\n    msg['publish'] = function() {\n\n        var m = msg.getPubnubMessage();\n\n        if (msg['pubnub'] && msg['channel']) {\n            msg['pubnub'].publish({\n                'message' : m,\n                'channel' : msg['channel'],\n                'callback' : msg['callback'],\n                'error' : msg['error']\n            })\n        }\n    };\n    return msg;\n}\n\nfunction PN_API(setup) {\n    var SUB_WINDOWING =  +setup['windowing']   || DEF_WINDOWING\n    ,   SUB_TIMEOUT   = (+setup['timeout']     || DEF_SUB_TIMEOUT) * SECOND\n    ,   KEEPALIVE     = (+setup['keepalive']   || DEF_KEEPALIVE)   * SECOND\n    ,   TIME_CHECK    = setup['timecheck']     || 0\n    ,   NOLEAVE       = setup['noleave']       || 0\n    ,   PUBLISH_KEY   = setup['publish_key']   || 'demo'\n    ,   SUBSCRIBE_KEY = setup['subscribe_key'] || 'demo'\n    ,   AUTH_KEY      = setup['auth_key']      || ''\n    ,   SECRET_KEY    = setup['secret_key']    || ''\n    ,   hmac_SHA256   = setup['hmac_SHA256']\n    ,   SSL           = setup['ssl']            ? 's' : ''\n    ,   ORIGIN        = 'http'+SSL+'://'+(setup['origin']||'pubsub.pubnub.com')\n    ,   STD_ORIGIN    = nextorigin(ORIGIN)\n    ,   SUB_ORIGIN    = nextorigin(ORIGIN)\n    ,   CONNECT       = function(){}\n    ,   PUB_QUEUE     = []\n    ,   CLOAK         = true\n    ,   TIME_DRIFT    = 0\n    ,   SUB_CALLBACK  = 0\n    ,   SUB_CHANNEL   = 0\n    ,   SUB_RECEIVER  = 0\n    ,   SUB_RESTORE   = setup['restore'] || 0\n    ,   SUB_BUFF_WAIT = 0\n    ,   TIMETOKEN     = 0\n    ,   RESUMED       = false\n    ,   CHANNELS      = {}\n    ,   CHANNEL_GROUPS       = {}\n    ,   SUB_ERROR     = function(){}\n    ,   STATE         = {}\n    ,   PRESENCE_HB_TIMEOUT  = null\n    ,   PRESENCE_HB          = validate_presence_heartbeat(\n        setup['heartbeat'] || setup['pnexpires'] || 0, setup['error']\n    )\n    ,   PRESENCE_HB_INTERVAL = setup['heartbeat_interval'] || (PRESENCE_HB / 2) -1\n    ,   PRESENCE_HB_RUNNING  = false\n    ,   NO_WAIT_FOR_PENDING  = setup['no_wait_for_pending']\n    ,   COMPATIBLE_35 = setup['compatible_3.5']  || false\n    ,   xdr           = setup['xdr']\n    ,   params        = setup['params'] || {}\n    ,   error         = setup['error']      || function() {}\n    ,   _is_online    = setup['_is_online'] || function() { return 1 }\n    ,   jsonp_cb      = setup['jsonp_cb']   || function() { return 0 }\n    ,   db            = setup['db']         || {'get': function(){}, 'set': function(){}}\n    ,   CIPHER_KEY    = setup['cipher_key']\n    ,   UUID          = setup['uuid'] || ( !setup['unique_uuid'] && db && db['get'](SUBSCRIBE_KEY+'uuid') || '')\n    ,   USE_INSTANCEID = setup['instance_id'] || false\n    ,   INSTANCEID     = ''\n    ,   _poll_timer\n    ,   _poll_timer2;\n\n    if (PRESENCE_HB === 2) PRESENCE_HB_INTERVAL = 1;\n\n    var crypto_obj    = setup['crypto_obj'] ||\n        {\n            'encrypt' : function(a,key){ return a},\n            'decrypt' : function(b,key){return b}\n        };\n\n    function _get_url_params(data) {\n        if (!data) data = {};\n        each( params , function( key, value ) {\n            if (!(key in data)) data[key] = value;\n        });\n        return data;\n    }\n\n    function _object_to_key_list(o) {\n        var l = []\n        each( o , function( key, value ) {\n            l.push(key);\n        });\n        return l;\n    }\n    function _object_to_key_list_sorted(o) {\n        return _object_to_key_list(o).sort();\n    }\n\n    function _get_pam_sign_input_from_params(params) {\n        var si = \"\";\n        var l = _object_to_key_list_sorted(params);\n\n        for (var i in l) {\n            var k = l[i]\n            si += k + \"=\" + pam_encode(params[k]) ;\n            if (i != l.length - 1) si += \"&\"\n        }\n        return si;\n    }\n\n    function validate_presence_heartbeat(heartbeat, cur_heartbeat, error) {\n        var err = false;\n\n        if (typeof heartbeat === 'undefined') {\n            return cur_heartbeat;\n        }\n\n        if (typeof heartbeat === 'number') {\n            if (heartbeat > PRESENCE_HB_THRESHOLD || heartbeat == 0)\n                err = false;\n            else\n                err = true;\n        } else if(typeof heartbeat === 'boolean'){\n            if (!heartbeat) {\n                return 0;\n            } else {\n                return PRESENCE_HB_DEFAULT;\n            }\n        } else {\n            err = true;\n        }\n\n        if (err) {\n            error && error(\"Presence Heartbeat value invalid. Valid range ( x > \" + PRESENCE_HB_THRESHOLD + \" or x = 0). Current Value : \" + (cur_heartbeat || PRESENCE_HB_THRESHOLD));\n            return cur_heartbeat || PRESENCE_HB_THRESHOLD;\n        } else return heartbeat;\n    }\n\n    function encrypt(input, key) {\n        return crypto_obj['encrypt'](input, key || CIPHER_KEY) || input;\n    }\n    function decrypt(input, key) {\n        return crypto_obj['decrypt'](input, key || CIPHER_KEY) ||\n               crypto_obj['decrypt'](input, CIPHER_KEY) ||\n               input;\n    }\n\n    function error_common(message, callback) {\n        callback && callback({ 'error' : message || \"error occurred\"});\n        error && error(message);\n    }\n    function _presence_heartbeat() {\n\n        clearTimeout(PRESENCE_HB_TIMEOUT);\n\n        if (!PRESENCE_HB_INTERVAL || PRESENCE_HB_INTERVAL >= 500 ||\n            PRESENCE_HB_INTERVAL < 1 ||\n            (!generate_channel_list(CHANNELS,true).length  && !generate_channel_group_list(CHANNEL_GROUPS, true).length ) )\n        {\n            PRESENCE_HB_RUNNING = false;\n            return;\n        }\n\n        PRESENCE_HB_RUNNING = true;\n        SELF['presence_heartbeat']({\n            'callback' : function(r) {\n                PRESENCE_HB_TIMEOUT = timeout( _presence_heartbeat, (PRESENCE_HB_INTERVAL) * SECOND );\n            },\n            'error' : function(e) {\n                error && error(\"Presence Heartbeat unable to reach Pubnub servers.\" + JSON.stringify(e));\n                PRESENCE_HB_TIMEOUT = timeout( _presence_heartbeat, (PRESENCE_HB_INTERVAL) * SECOND );\n            }\n        });\n    }\n\n    function start_presence_heartbeat() {\n        !PRESENCE_HB_RUNNING && _presence_heartbeat();\n    }\n\n    function publish(next) {\n\n        if (NO_WAIT_FOR_PENDING) {\n            if (!PUB_QUEUE.length) return;\n        } else {\n            if (next) PUB_QUEUE.sending = 0;\n            if ( PUB_QUEUE.sending || !PUB_QUEUE.length ) return;\n            PUB_QUEUE.sending = 1;\n        }\n\n        xdr(PUB_QUEUE.shift());\n    }\n    function each_channel_group(callback) {\n        var count = 0;\n\n        each( generate_channel_group_list(CHANNEL_GROUPS), function(channel_group) {\n            var chang = CHANNEL_GROUPS[channel_group];\n\n            if (!chang) return;\n\n            count++;\n            (callback||function(){})(chang);\n        } );\n\n        return count;\n    }\n\n    function each_channel(callback) {\n        var count = 0;\n\n        each( generate_channel_list(CHANNELS), function(channel) {\n            var chan = CHANNELS[channel];\n\n            if (!chan) return;\n\n            count++;\n            (callback||function(){})(chan);\n        } );\n\n        return count;\n    }\n    function _invoke_callback(response, callback, err) {\n        if (typeof response == 'object') {\n            if (response['error']) {\n                var callback_data = {};\n\n                if (response['message']) {\n                    callback_data['message'] = response['message'];\n                }\n\n                if (response['payload']) {\n                    callback_data['payload'] = response['payload'];\n                }\n\n                err && err(callback_data);\n                return;\n\n            }\n            if (response['payload']) {\n                if (response['next_page'])\n                    callback && callback(response['payload'], response['next_page']);\n                else\n                    callback && callback(response['payload']);\n                return;\n            }\n        }\n        callback && callback(response);\n    }\n\n    function _invoke_error(response,err) {\n\n        if (typeof response == 'object' && response['error']) {\n                var callback_data = {};\n\n                if (response['message']) {\n                    callback_data['message'] = response['message'];\n                }\n\n                if (response['payload']) {\n                    callback_data['payload'] = response['payload'];\n                }\n                \n                err && err(callback_data);\n                return;\n        } else {\n            err && err(response);\n        }\n    }\n    function CR(args, callback, url1, data) {\n            var callback        = args['callback']      || callback\n            ,   err             = args['error']         || error\n            ,   jsonp           = jsonp_cb();\n\n            data = data || {};\n            \n            if (!data['auth']) {\n                data['auth'] = args['auth_key'] || AUTH_KEY;\n            }\n            \n            var url = [\n                    STD_ORIGIN, 'v1', 'channel-registration',\n                    'sub-key', SUBSCRIBE_KEY\n                ];\n\n            url.push.apply(url,url1);\n            \n            if (jsonp) data['callback']              = jsonp;\n            \n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n\n    }\n\n    // Announce Leave Event\n    var SELF = {\n        'LEAVE' : function( channel, blocking, auth_key, callback, error ) {\n\n            var data   = { 'uuid' : UUID, 'auth' : auth_key || AUTH_KEY }\n            ,   origin = nextorigin(ORIGIN)\n            ,   callback = callback || function(){}\n            ,   err      = error    || function(){}\n            ,   jsonp  = jsonp_cb();\n\n            // Prevent Leaving a Presence Channel\n            if (channel.indexOf(PRESENCE_SUFFIX) > 0) return true;\n\n            if (COMPATIBLE_35) {\n                if (!SSL)         return false;\n                if (jsonp == '0') return false;\n            }\n\n            if (NOLEAVE)  return false;\n\n            if (jsonp != '0') data['callback'] = jsonp;\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                blocking : blocking || SSL,\n                timeout  : 2000,\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    origin, 'v2', 'presence', 'sub_key',\n                    SUBSCRIBE_KEY, 'channel', encode(channel), 'leave'\n                ]\n            });\n            return true;\n        },\n        'LEAVE_GROUP' : function( channel_group, blocking, auth_key, callback, error ) {\n\n            var data   = { 'uuid' : UUID, 'auth' : auth_key || AUTH_KEY }\n            ,   origin = nextorigin(ORIGIN)\n            ,   callback = callback || function(){}\n            ,   err      = error    || function(){}\n            ,   jsonp  = jsonp_cb();\n\n            // Prevent Leaving a Presence Channel Group\n            if (channel_group.indexOf(PRESENCE_SUFFIX) > 0) return true;\n\n            if (COMPATIBLE_35) {\n                if (!SSL)         return false;\n                if (jsonp == '0') return false;\n            }\n\n            if (NOLEAVE)  return false;\n\n            if (jsonp != '0') data['callback'] = jsonp;\n\n            if (channel_group && channel_group.length > 0) data['channel-group'] = channel_group;\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                blocking : blocking || SSL,\n                timeout  : 5000,\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    origin, 'v2', 'presence', 'sub_key',\n                    SUBSCRIBE_KEY, 'channel', encode(','), 'leave'\n                ]\n            });\n            return true;\n        },\n        'set_resumed' : function(resumed) {\n                RESUMED = resumed;\n        },\n        'get_cipher_key' : function() {\n            return CIPHER_KEY;\n        },\n        'set_cipher_key' : function(key) {\n            CIPHER_KEY = key;\n        },\n        'raw_encrypt' : function(input, key) {\n            return encrypt(input, key);\n        },\n        'raw_decrypt' : function(input, key) {\n            return decrypt(input, key);\n        },\n        'get_heartbeat' : function() {\n            return PRESENCE_HB;\n        },\n        \n        'set_heartbeat' : function(heartbeat, heartbeat_interval) {\n            PRESENCE_HB = validate_presence_heartbeat(heartbeat, PRESENCE_HB, error);\n            PRESENCE_HB_INTERVAL = heartbeat_interval || (PRESENCE_HB / 2) - 1;\n            if (PRESENCE_HB == 2) {\n                PRESENCE_HB_INTERVAL = 1;\n            }\n            CONNECT();\n            _presence_heartbeat();\n        },\n        \n        'get_heartbeat_interval' : function() {\n            return PRESENCE_HB_INTERVAL;\n        },\n        \n        'set_heartbeat_interval' : function(heartbeat_interval) {\n            PRESENCE_HB_INTERVAL = heartbeat_interval;\n            _presence_heartbeat();\n        },\n        \n        'get_version' : function() {\n            return SDK_VER;\n        },\n        'getGcmMessageObject' : function(obj) {\n            return {\n                'data' : obj\n            }\n        },\n        'getApnsMessageObject' : function(obj) {\n            var x =  {\n                'aps' : { 'badge' : 1, 'alert' : ''}\n            }\n            for (k in obj) {\n                k[x] = obj[k];\n            }\n            return x;\n        },\n        'newPnMessage' : function() {\n            var x = {};\n            if (gcm) x['pn_gcm'] = gcm;\n            if (apns) x['pn_apns'] = apns;\n            for ( k in n ) {\n                x[k] = n[k];\n            }\n            return x;\n        },\n\n        '_add_param' : function(key,val) {\n            params[key] = val;\n        },\n\n        'channel_group' : function(args, callback) {\n            var ns_ch       = args['channel_group']\n            ,   callback    = callback         || args['callback']\n            ,   channels    = args['channels'] || args['channel']\n            ,   cloak       = args['cloak']\n            ,   namespace\n            ,   channel_group\n            ,   url = []\n            ,   data = {}\n            ,   mode = args['mode'] || 'add';\n\n\n            if (ns_ch) {\n                var ns_ch_a = ns_ch.split(':');\n\n                if (ns_ch_a.length > 1) {\n                    namespace = (ns_ch_a[0] === '*')?null:ns_ch_a[0];\n\n                    channel_group = ns_ch_a[1];\n                } else {\n                    channel_group = ns_ch_a[0];\n                }\n            }\n\n            namespace && url.push('namespace') && url.push(encode(namespace));\n\n            url.push('channel-group');\n\n            if (channel_group && channel_group !== '*') {\n                url.push(channel_group);\n            }\n\n            if (channels ) {\n                if (isArray(channels)) {\n                    channels = channels.join(',');\n                }\n                data[mode] = channels;\n                data['cloak'] = (CLOAK)?'true':'false';\n            } else {\n                if (mode === 'remove') url.push('remove');\n            }\n\n            if (typeof cloak != 'undefined') data['cloak'] = (cloak)?'true':'false';\n\n            CR(args, callback, url, data);\n        },\n\n        'channel_group_list_groups' : function(args, callback) {\n            var namespace;\n\n            namespace = args['namespace'] || args['ns'] || args['channel_group'] || null;\n            if (namespace) {\n                args[\"channel_group\"] = namespace + \":*\";\n            }\n\n            SELF['channel_group'](args, callback);\n        },\n\n        'channel_group_list_channels' : function(args, callback) {\n            if (!args['channel_group']) return error('Missing Channel Group');\n            SELF['channel_group'](args, callback);\n        },\n\n        'channel_group_remove_channel' : function(args, callback) {\n            if (!args['channel_group']) return error('Missing Channel Group');\n            if (!args['channel'] && !args['channels'] ) return error('Missing Channel');\n\n            args['mode'] = 'remove';\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_remove_group' : function(args, callback) {\n            if (!args['channel_group']) return error('Missing Channel Group');\n            if (args['channel']) return error('Use channel_group_remove_channel if you want to remove a channel from a group.');\n\n            args['mode'] = 'remove';\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_add_channel' : function(args, callback) {\n           if (!args['channel_group']) return error('Missing Channel Group');\n           if (!args['channel'] && !args['channels'] ) return error('Missing Channel');\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_cloak' : function(args, callback) {\n            if (typeof args['cloak'] == 'undefined') {\n                callback(CLOAK);\n                return;\n            }\n            CLOAK = args['cloak'];\n            SELF['channel_group'](args,callback);\n        },\n\n        'channel_group_list_namespaces' : function(args, callback) {\n            var url = ['namespace'];\n            CR(args, callback, url);\n        },\n        'channel_group_remove_namespace' : function(args, callback) {\n            var url = ['namespace',args['namespace'],'remove'];\n            CR(args, callback, url);\n        },\n\n        /*\n            PUBNUB.history({\n                channel  : 'my_chat_channel',\n                limit    : 100,\n                callback : function(history) { }\n            });\n        */\n        'history' : function( args, callback ) {\n            var callback         = args['callback'] || callback\n            ,   count            = args['count']    || args['limit'] || 100\n            ,   reverse          = args['reverse']  || \"false\"\n            ,   err              = args['error']    || function(){}\n            ,   auth_key         = args['auth_key'] || AUTH_KEY\n            ,   cipher_key       = args['cipher_key']\n            ,   channel          = args['channel']\n            ,   channel_group    = args['channel_group']\n            ,   start            = args['start']\n            ,   end              = args['end']\n            ,   include_token    = args['include_token']\n            ,   params           = {}\n            ,   jsonp            = jsonp_cb();\n\n            // Make sure we have a Channel\n            if (!channel && !channel_group) return error('Missing Channel');\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            params['stringtoken'] = 'true';\n            params['count']       = count;\n            params['reverse']     = reverse;\n            params['auth']        = auth_key;\n\n            if (channel_group) {\n                params['channel-group'] = channel_group;\n                if (!channel) {\n                    channel = ','; \n                }\n            }\n            if (jsonp) params['callback']              = jsonp;\n            if (start) params['start']                 = start;\n            if (end)   params['end']                   = end;\n            if (include_token) params['include_token'] = 'true';\n\n            // Send Message\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(params),\n                success  : function(response) {\n                    if (typeof response == 'object' && response['error']) {\n                        err({'message' : response['message'], 'payload' : response['payload']});\n                        return;\n                    }\n                    var messages = response[0];\n                    var decrypted_messages = [];\n                    for (var a = 0; a < messages.length; a++) {\n                        var new_message = decrypt(messages[a],cipher_key);\n                        try {\n                            decrypted_messages['push'](JSON['parse'](new_message));\n                        } catch (e) {\n                            decrypted_messages['push']((new_message));\n                        }\n                    }\n                    callback([decrypted_messages, response[1], response[2]]);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v2', 'history', 'sub-key',\n                    SUBSCRIBE_KEY, 'channel', encode(channel)\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.replay({\n                source      : 'my_channel',\n                destination : 'new_channel'\n            });\n        */\n        'replay' : function(args, callback) {\n            var callback    = callback || args['callback'] || function(){}\n            ,   auth_key    = args['auth_key'] || AUTH_KEY\n            ,   source      = args['source']\n            ,   destination = args['destination']\n            ,   stop        = args['stop']\n            ,   start       = args['start']\n            ,   end         = args['end']\n            ,   reverse     = args['reverse']\n            ,   limit       = args['limit']\n            ,   jsonp       = jsonp_cb()\n            ,   data        = {}\n            ,   url;\n\n            // Check User Input\n            if (!source)        return error('Missing Source Channel');\n            if (!destination)   return error('Missing Destination Channel');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            // Setup URL Params\n            if (jsonp != '0') data['callback'] = jsonp;\n            if (stop)         data['stop']     = 'all';\n            if (reverse)      data['reverse']  = 'true';\n            if (start)        data['start']    = start;\n            if (end)          data['end']      = end;\n            if (limit)        data['count']    = limit;\n\n            data['auth'] = auth_key;\n\n            // Compose URL Parts\n            url = [\n                STD_ORIGIN, 'v1', 'replay',\n                PUBLISH_KEY, SUBSCRIBE_KEY,\n                source, destination\n            ];\n\n            // Start (or Stop) Replay!\n            xdr({\n                callback : jsonp,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function() { callback([ 0, 'Disconnected' ]) },\n                url      : url,\n                data     : _get_url_params(data)\n            });\n        },\n\n        /*\n            PUBNUB.auth('AJFLKAJSDKLA');\n        */\n        'auth' : function(auth) {\n            AUTH_KEY = auth;\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.time(function(time){ });\n        */\n        'time' : function(callback) {\n            var jsonp = jsonp_cb();\n\n            var data = { 'uuid' : UUID, 'auth' : AUTH_KEY }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                timeout  : SECOND * 5,\n                url      : [STD_ORIGIN, 'time', jsonp],\n                success  : function(response) { callback(response[0]) },\n                fail     : function() { callback(0) }\n            });\n        },\n\n        /*\n            PUBNUB.publish({\n                channel : 'my_chat_channel',\n                message : 'hello!'\n            });\n        */\n        'publish' : function( args, callback ) {\n            var msg      = args['message'];\n            if (!msg) return error('Missing Message');\n\n            var callback = callback || args['callback'] || msg['callback'] || function(){}\n            ,   channel  = args['channel'] || msg['channel']\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   cipher_key = args['cipher_key']\n            ,   err      = args['error'] || msg['error'] || function() {}\n            ,   post     = args['post'] || false\n            ,   store    = ('store_in_history' in args) ? args['store_in_history']: true\n            ,   jsonp    = jsonp_cb()\n            ,   add_msg  = 'push'\n            ,   url;\n\n            if (args['prepend']) add_msg = 'unshift'\n\n            if (!channel)       return error('Missing Channel');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (msg['getPubnubMessage']) {\n                msg = msg['getPubnubMessage']();\n            }\n\n            // If trying to send Object\n            msg = JSON['stringify'](encrypt(msg, cipher_key));\n\n            // Create URL\n            url = [\n                STD_ORIGIN, 'publish',\n                PUBLISH_KEY, SUBSCRIBE_KEY,\n                0, encode(channel),\n                jsonp, encode(msg)\n            ];\n\n            params = { 'uuid' : UUID, 'auth' : auth_key }\n\n            if (!store) params['store'] =\"0\"\n\n            if (USE_INSTANCEID) params['instanceid'] = INSTANCEID;\n\n            // Queue Message Send\n            PUB_QUEUE[add_msg]({\n                callback : jsonp,\n                timeout  : SECOND * 5,\n                url      : url,\n                data     : _get_url_params(params),\n                fail     : function(response){\n                    _invoke_error(response, err);\n                    publish(1);\n                },\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                    publish(1);\n                },\n                mode     : (post)?'POST':'GET'\n            });\n\n            // Send Message\n            publish();\n        },\n\n        /*\n            PUBNUB.unsubscribe({ channel : 'my_chat' });\n        */\n        'unsubscribe' : function(args, callback) {\n            var channel       = args['channel']\n            ,   channel_group = args['channel_group']\n            ,   auth_key      = args['auth_key']    || AUTH_KEY\n            ,   callback      = callback            || args['callback'] || function(){}\n            ,   err           = args['error']       || function(){};\n\n            TIMETOKEN   = 0;\n            //SUB_RESTORE = 1;    REVISIT !!!!\n\n            if (channel) {\n                // Prepare Channel(s)\n                channel = map( (\n                    channel.join ? channel.join(',') : ''+channel\n                ).split(','), function(channel) {\n                    if (!CHANNELS[channel]) return;\n                    return channel + ',' + channel + PRESENCE_SUFFIX;\n                } ).join(',');\n\n                // Iterate over Channels\n                each( channel.split(','), function(ch) {\n                    var CB_CALLED = true;\n                    if (!ch) return;\n                    CHANNELS[ch] = 0;\n                    if (ch in STATE) delete STATE[ch];\n                    if (READY) {\n                        CB_CALLED = SELF['LEAVE']( ch, 0 , auth_key, callback, err);\n                    }\n                    if (!CB_CALLED) callback({action : \"leave\"});\n\n                    \n                } );\n            }\n\n            if (channel_group) {\n                // Prepare channel group(s)\n                channel_group = map( (\n                    channel_group.join ? channel_group.join(',') : ''+channel_group\n                ).split(','), function(channel_group) {\n                    if (!CHANNEL_GROUPS[channel_group]) return;\n                    return channel_group + ',' + channel_group + PRESENCE_SUFFIX;\n                } ).join(',');\n\n                // Iterate over channel groups\n                each( channel_group.split(','), function(chg) {\n                    var CB_CALLED = true;\n                    if (!chg) return;\n                    CHANNEL_GROUPS[chg] = 0;\n                    if (chg in STATE) delete STATE[chg];\n                    if (READY) {\n                        CB_CALLED = SELF['LEAVE_GROUP']( chg, 0 , auth_key, callback, err);\n                    }\n                    if (!CB_CALLED) callback({action : \"leave\"});\n\n                } );\n            }\n\n            // Reset Connection if Count Less\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.subscribe({\n                channel  : 'my_chat'\n                callback : function(message) { }\n            });\n        */\n        'subscribe' : function( args, callback ) {\n            var channel         = args['channel']\n            ,   channel_group   = args['channel_group']\n            ,   callback        = callback            || args['callback']\n            ,   callback        = callback            || args['message']\n            ,   connect         = args['connect']     || function(){}\n            ,   reconnect       = args['reconnect']   || function(){}\n            ,   disconnect      = args['disconnect']  || function(){}\n            ,   SUB_ERROR       = args['error']       || SUB_ERROR || function(){}\n            ,   idlecb          = args['idle']        || function(){}\n            ,   presence        = args['presence']    || 0\n            ,   noheresync      = args['noheresync']  || 0\n            ,   backfill        = args['backfill']    || 0\n            ,   timetoken       = args['timetoken']   || 0\n            ,   sub_timeout     = args['timeout']     || SUB_TIMEOUT\n            ,   windowing       = args['windowing']   || SUB_WINDOWING\n            ,   state           = args['state']\n            ,   heartbeat       = args['heartbeat'] || args['pnexpires']\n            ,   heartbeat_interval = args['heartbeat_interval']\n            ,   restore         = args['restore'] || SUB_RESTORE;\n\n            AUTH_KEY            = args['auth_key']    || AUTH_KEY;\n\n            // Restore Enabled?\n            SUB_RESTORE = restore;\n\n            // Always Reset the TT\n            TIMETOKEN = timetoken;\n\n            // Make sure we have a Channel\n            if (!channel && !channel_group) {\n                return error('Missing Channel');\n            }\n\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (heartbeat || heartbeat === 0 || heartbeat_interval || heartbeat_interval === 0) {\n                SELF['set_heartbeat'](heartbeat, heartbeat_interval);\n            }\n\n            // Setup Channel(s)\n            if (channel) {\n                each( (channel.join ? channel.join(',') : ''+channel).split(','),\n                function(channel) {\n                    var settings = CHANNELS[channel] || {};\n\n                    // Store Channel State\n                    CHANNELS[SUB_CHANNEL = channel] = {\n                        name         : channel,\n                        connected    : settings.connected,\n                        disconnected : settings.disconnected,\n                        subscribed   : 1,\n                        callback     : SUB_CALLBACK = callback,\n                        'cipher_key' : args['cipher_key'],\n                        connect      : connect,\n                        disconnect   : disconnect,\n                        reconnect    : reconnect\n                    };\n\n                    if (state) {\n                        if (channel in state) {\n                            STATE[channel] = state[channel];\n                        } else {\n                            STATE[channel] = state;\n                        }\n                    }\n\n                    // Presence Enabled?\n                    if (!presence) return;\n\n                    // Subscribe Presence Channel\n                    SELF['subscribe']({\n                        'channel'  : channel + PRESENCE_SUFFIX,\n                        'callback' : presence,\n                        'restore'  : restore\n                    });\n\n                    // Presence Subscribed?\n                    if (settings.subscribed) return;\n\n                    // See Who's Here Now?\n                    if (noheresync) return;\n                    SELF['here_now']({\n                        'channel'  : channel,\n                        'data'     : _get_url_params({ 'uuid' : UUID, 'auth' : AUTH_KEY }),\n                        'callback' : function(here) {\n                            each( 'uuids' in here ? here['uuids'] : [],\n                            function(uid) { presence( {\n                                'action'    : 'join',\n                                'uuid'      : uid,\n                                'timestamp' : Math.floor(rnow() / 1000),\n                                'occupancy' : here['occupancy'] || 1\n                            }, here, channel ); } );\n                        }\n                    });\n                } );\n            }\n\n            // Setup Channel Groups\n            if (channel_group) {\n                each( (channel_group.join ? channel_group.join(',') : ''+channel_group).split(','),\n                function(channel_group) {\n                    var settings = CHANNEL_GROUPS[channel_group] || {};\n\n                    CHANNEL_GROUPS[channel_group] = {\n                        name         : channel_group,\n                        connected    : settings.connected,\n                        disconnected : settings.disconnected,\n                        subscribed   : 1,\n                        callback     : SUB_CALLBACK = callback,\n                        'cipher_key' : args['cipher_key'],\n                        connect      : connect,\n                        disconnect   : disconnect,\n                        reconnect    : reconnect\n                    };\n\n                    // Presence Enabled?\n                    if (!presence) return;\n\n                    // Subscribe Presence Channel\n                    SELF['subscribe']({\n                        'channel_group'  : channel_group + PRESENCE_SUFFIX,\n                        'callback' : presence,\n                        'restore'  : restore,\n                        'auth_key' : AUTH_KEY\n                    });\n\n                    // Presence Subscribed?\n                    if (settings.subscribed) return;\n\n                    // See Who's Here Now?\n                    if (noheresync) return;\n                    SELF['here_now']({\n                        'channel_group'  : channel_group,\n                        'data'           : _get_url_params({ 'uuid' : UUID, 'auth' : AUTH_KEY }),\n                        'callback' : function(here) {\n                            each( 'uuids' in here ? here['uuids'] : [],\n                            function(uid) { presence( {\n                                'action'    : 'join',\n                                'uuid'      : uid,\n                                'timestamp' : Math.floor(rnow() / 1000),\n                                'occupancy' : here['occupancy'] || 1\n                            }, here, channel_group ); } );\n                        }\n                    });\n                } );\n            }\n\n\n            // Test Network Connection\n            function _test_connection(success) {\n                if (success) {\n                    // Begin Next Socket Connection\n                    timeout( CONNECT, SECOND );\n                }\n                else {\n                    // New Origin on Failed Connection\n                    STD_ORIGIN = nextorigin( ORIGIN, 1 );\n                    SUB_ORIGIN = nextorigin( ORIGIN, 1 );\n\n                    // Re-test Connection\n                    timeout( function() {\n                        SELF['time'](_test_connection);\n                    }, SECOND );\n                }\n\n                // Disconnect & Reconnect\n                each_channel(function(channel){\n                    // Reconnect\n                    if (success && channel.disconnected) {\n                        channel.disconnected = 0;\n                        return channel.reconnect(channel.name);\n                    }\n\n                    // Disconnect\n                    if (!success && !channel.disconnected) {\n                        channel.disconnected = 1;\n                        channel.disconnect(channel.name);\n                    }\n                });\n                \n                // Disconnect & Reconnect for channel groups\n                each_channel_group(function(channel_group){\n                    // Reconnect\n                    if (success && channel_group.disconnected) {\n                        channel_group.disconnected = 0;\n                        return channel_group.reconnect(channel_group.name);\n                    }\n\n                    // Disconnect\n                    if (!success && !channel_group.disconnected) {\n                        channel_group.disconnected = 1;\n                        channel_group.disconnect(channel_group.name);\n                    }\n                });\n            }\n\n            // Evented Subscribe\n            function _connect() {\n                var jsonp           = jsonp_cb()\n                ,   channels        = generate_channel_list(CHANNELS).join(',')\n                ,   channel_groups  = generate_channel_group_list(CHANNEL_GROUPS).join(',');\n\n                // Stop Connection\n                if (!channels && !channel_groups) return;\n\n                if (!channels) channels = ',';\n\n                // Connect to PubNub Subscribe Servers\n                _reset_offline();\n\n                var data = _get_url_params({ 'uuid' : UUID, 'auth' : AUTH_KEY });\n\n                if (channel_groups) {\n                    data['channel-group'] = channel_groups;\n                }\n\n\n                var st = JSON.stringify(STATE);\n                if (st.length > 2) data['state'] = JSON.stringify(STATE);\n\n                if (PRESENCE_HB) data['heartbeat'] = PRESENCE_HB;\n\n                if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n                start_presence_heartbeat();\n                SUB_RECEIVER = xdr({\n                    timeout  : sub_timeout,\n                    callback : jsonp,\n                    fail     : function(response) {\n                        if (response && response['error'] && response['service']) {\n                            _invoke_error(response, SUB_ERROR);\n                            _test_connection(1);\n                        } else {\n                            SELF['time'](function(success){\n                                !success && ( _invoke_error(response, SUB_ERROR));\n                                _test_connection(success);\n                            });\n                        }\n                    },\n                    data     : _get_url_params(data),\n                    url      : [\n                        SUB_ORIGIN, 'subscribe',\n                        SUBSCRIBE_KEY, encode(channels),\n                        jsonp, TIMETOKEN\n                    ],\n                    success : function(messages) {\n\n                        // Check for Errors\n                        if (!messages || (\n                            typeof messages == 'object' &&\n                            'error' in messages         &&\n                            messages['error']\n                        )) {\n                            SUB_ERROR(messages['error']);\n                            return timeout( CONNECT, SECOND );\n                        }\n\n                        // User Idle Callback\n                        idlecb(messages[1]);\n\n                        // Restore Previous Connection Point if Needed\n                        TIMETOKEN = !TIMETOKEN               &&\n                                    SUB_RESTORE              &&\n                                    db['get'](SUBSCRIBE_KEY) || messages[1];\n\n                        /*\n                        // Connect\n                        each_channel_registry(function(registry){\n                            if (registry.connected) return;\n                            registry.connected = 1;\n                            registry.connect(channel.name);\n                        });\n                        */\n\n                        // Connect\n                        each_channel(function(channel){\n                            if (channel.connected) return;\n                            channel.connected = 1;\n                            channel.connect(channel.name);\n                        });\n\n                        // Connect for channel groups\n                        each_channel_group(function(channel_group){\n                            if (channel_group.connected) return;\n                            channel_group.connected = 1;\n                            channel_group.connect(channel_group.name);\n                        });\n\n                        if (RESUMED && !SUB_RESTORE) {\n                                TIMETOKEN = 0;\n                                RESUMED = false;\n                                // Update Saved Timetoken\n                                db['set']( SUBSCRIBE_KEY, 0 );\n                                timeout( _connect, windowing );\n                                return;\n                        }\n\n                        // Invoke Memory Catchup and Receive Up to 100\n                        // Previous Messages from the Queue.\n                        if (backfill) {\n                            TIMETOKEN = 10000;\n                            backfill  = 0;\n                        }\n\n                        // Update Saved Timetoken\n                        db['set']( SUBSCRIBE_KEY, messages[1] );\n\n                        // Route Channel <---> Callback for Message\n                        var next_callback = (function() {\n                            var channels = '';\n                            var channels2 = '';\n\n                            if (messages.length > 3) {\n                                channels  = messages[3];\n                                channels2 = messages[2];\n                            } else if (messages.length > 2) {\n                                channels = messages[2];\n                            } else {\n                                channels =  map(\n                                    generate_channel_list(CHANNELS), function(chan) { return map(\n                                        Array(messages[0].length)\n                                        .join(',').split(','),\n                                        function() { return chan; }\n                                    ) }).join(',')\n                            }\n\n                            var list  = channels.split(',');\n                            var list2 = (channels2)?channels2.split(','):[];\n\n                            return function() {\n                                var channel  = list.shift()||SUB_CHANNEL;\n                                var channel2 = list2.shift();\n\n                                var chobj = {};\n\n                                if (channel2) {\n                                    if (channel && channel.indexOf('-pnpres') >= 0 \n                                        && channel2.indexOf('-pnpres') < 0) {\n                                        channel2 += '-pnpres';\n                                    }\n                                    chobj = CHANNEL_GROUPS[channel2] || CHANNELS[channel2] || {'callback' : function(){}};\n                                } else {\n                                    chobj = CHANNELS[channel];\n                                }\n\n                                var r = [\n                                    chobj\n                                    .callback||SUB_CALLBACK,\n                                    channel.split(PRESENCE_SUFFIX)[0]\n                                ];\n                                channel2 && r.push(channel2.split(PRESENCE_SUFFIX)[0]);\n                                return r;\n                            };\n                        })();\n\n                        var latency = detect_latency(+messages[1]);\n                        each( messages[0], function(msg) {\n                            var next = next_callback();\n                            var decrypted_msg = decrypt(msg,\n                                (CHANNELS[next[1]])?CHANNELS[next[1]]['cipher_key']:null);\n                            next[0] && next[0]( decrypted_msg, messages, next[2] || next[1], latency, next[1]);\n                        });\n\n                        timeout( _connect, windowing );\n                    }\n                });\n            }\n\n            CONNECT = function() {\n                _reset_offline();\n                timeout( _connect, windowing );\n            };\n\n            // Reduce Status Flicker\n            if (!READY) return READY_BUFFER.push(CONNECT);\n\n            // Connect Now\n            CONNECT();\n        },\n\n        /*\n            PUBNUB.here_now({ channel : 'my_chat', callback : fun });\n        */\n        'here_now' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   channel  = args['channel']\n            ,   channel_group = args['channel_group']\n            ,   jsonp    = jsonp_cb()\n            ,   uuids    = ('uuids' in args) ? args['uuids'] : true\n            ,   state    = args['state']\n            ,   data     = { 'uuid' : UUID, 'auth' : auth_key };\n\n            if (!uuids) data['disable_uuids'] = 1;\n            if (state) data['state'] = 1;\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            var url = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub_key', SUBSCRIBE_KEY\n                ];\n\n            channel && url.push('channel') && url.push(encode(channel));\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (channel_group) {\n                data['channel-group'] = channel_group;\n                !channel && url.push('channel') && url.push(','); \n            }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n        },\n\n        /*\n            PUBNUB.current_channels_by_uuid({ channel : 'my_chat', callback : fun });\n        */\n        'where_now' : function( args, callback ) {\n            var callback = args['callback'] || callback\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   jsonp    = jsonp_cb()\n            ,   uuid     = args['uuid']     || UUID\n            ,   data     = { 'auth' : auth_key };\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub_key', SUBSCRIBE_KEY,\n                    'uuid', encode(uuid)\n                ]\n            });\n        },\n\n        'state' : function(args, callback) {\n            var callback = args['callback'] || callback || function(r) {}\n            ,   err      = args['error']    || function(){}\n            ,   auth_key = args['auth_key'] || AUTH_KEY\n            ,   jsonp    = jsonp_cb()\n            ,   state    = args['state']\n            ,   uuid     = args['uuid'] || UUID\n            ,   channel  = args['channel']\n            ,   channel_group = args['channel_group']\n            ,   url\n            ,   data     = _get_url_params({ 'auth' : auth_key });\n\n            // Make sure we have a Channel\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!uuid) return error('Missing UUID');\n            if (!channel && !channel_group) return error('Missing Channel');\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            if (typeof channel != 'undefined'\n                && CHANNELS[channel] && CHANNELS[channel].subscribed ) {\n                if (state) STATE[channel] = state;\n            }\n\n            if (typeof channel_group != 'undefined'\n                && CHANNEL_GROUPS[channel_group]\n                && CHANNEL_GROUPS[channel_group].subscribed\n                ) {\n                if (state) STATE[channel_group] = state;\n                data['channel-group'] = channel_group;\n\n                if (!channel) {\n                    channel = ',';\n                }\n            }\n\n            data['state'] = JSON.stringify(state);\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            if (state) {\n                url      = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel', channel,\n                    'uuid', uuid, 'data'\n                ]\n            } else {\n                url      = [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel', channel,\n                    'uuid', encode(uuid)\n                ]\n            }\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n\n            });\n\n        },\n\n        /*\n            PUBNUB.grant({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                ttl      : 24 * 60, // Minutes\n                read     : true,\n                write    : true,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'grant' : function( args, callback ) {\n            var callback        = args['callback'] || callback\n            ,   err             = args['error']    || function(){}\n            ,   channel         = args['channel']  || args['channels']\n            ,   channel_group   = args['channel_group']\n            ,   jsonp           = jsonp_cb()\n            ,   ttl             = args['ttl']\n            ,   r               = (args['read'] )?\"1\":\"0\"\n            ,   w               = (args['write'])?\"1\":\"0\"\n            ,   m               = (args['manage'])?\"1\":\"0\"\n            ,   auth_key        = args['auth_key'] || args['auth_keys'];\n\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SECRET_KEY)    return error('Missing Secret Key');\n\n            var timestamp  = Math.floor(new Date().getTime() / 1000)\n            ,   sign_input = SUBSCRIBE_KEY + \"\\n\" + PUBLISH_KEY + \"\\n\"\n                    + \"grant\" + \"\\n\";\n\n            var data = {\n                'w'         : w,\n                'r'         : r,\n                'timestamp' : timestamp\n            };\n            if (args['manage']) {\n                data['m'] = m;\n            }\n            if (isArray(channel)) {\n                channel = channel['join'](',');\n            }\n            if (isArray(auth_key)) {\n                auth_key = auth_key['join'](',');\n            }\n            if (typeof channel != 'undefined' && channel != null && channel.length > 0) data['channel'] = channel;\n            if (typeof channel_group != 'undefined' && channel_group != null && channel_group.length > 0) {\n                data['channel-group'] = channel_group;\n            }\n            if (jsonp != '0') { data['callback'] = jsonp; }\n            if (ttl || ttl === 0) data['ttl'] = ttl;\n\n            if (auth_key) data['auth'] = auth_key;\n\n            data = _get_url_params(data)\n\n            if (!auth_key) delete data['auth'];\n\n            sign_input += _get_pam_sign_input_from_params(data);\n\n            var signature = hmac_SHA256( sign_input, SECRET_KEY );\n\n            signature = signature.replace( /\\+/g, \"-\" );\n            signature = signature.replace( /\\//g, \"_\" );\n\n            data['signature'] = signature;\n\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v1', 'auth', 'grant' ,\n                    'sub-key', SUBSCRIBE_KEY\n                ]\n            });\n        },\n\n        /*\n         PUBNUB.mobile_gw_provision ({\n         device_id: 'A655FBA9931AB',\n         op       : 'add' | 'remove',\n         gw_type  : 'apns' | 'gcm',\n         channel  : 'my_chat',\n         callback : fun,\n         error    : fun,\n         });\n         */\n\n        'mobile_gw_provision' : function( args ) {\n\n            var callback = args['callback'] || function(){}\n                ,   auth_key       = args['auth_key'] || AUTH_KEY\n                ,   err            = args['error'] || function() {}\n                ,   jsonp          = jsonp_cb()\n                ,   channel        = args['channel']\n                ,   op             = args['op']\n                ,   gw_type        = args['gw_type']\n                ,   device_id      = args['device_id']\n                ,   url;\n\n            if (!device_id)     return error('Missing Device ID (device_id)');\n            if (!gw_type)       return error('Missing GW Type (gw_type: gcm or apns)');\n            if (!op)            return error('Missing GW Operation (op: add or remove)');\n            if (!channel)       return error('Missing gw destination Channel (channel)');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n\n            // Create URL\n            url = [\n                STD_ORIGIN, 'v1/push/sub-key',\n                SUBSCRIBE_KEY, 'devices', device_id\n            ];\n\n            params = { 'uuid' : UUID, 'auth' : auth_key, 'type': gw_type};\n\n            if (op == \"add\") {\n                params['add'] = channel;\n            } else if (op == \"remove\") {\n                params['remove'] = channel;\n            }\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : params,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : url\n            });\n\n        },\n\n        /*\n            PUBNUB.audit({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                read     : true,\n                write    : true,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'audit' : function( args, callback ) {\n            var callback        = args['callback'] || callback\n            ,   err             = args['error']    || function(){}\n            ,   channel         = args['channel']\n            ,   channel_group   = args['channel_group']\n            ,   auth_key        = args['auth_key']\n            ,   jsonp           = jsonp_cb();\n\n            // Make sure we have a Channel\n            if (!callback)      return error('Missing Callback');\n            if (!SUBSCRIBE_KEY) return error('Missing Subscribe Key');\n            if (!PUBLISH_KEY)   return error('Missing Publish Key');\n            if (!SECRET_KEY)    return error('Missing Secret Key');\n\n            var timestamp  = Math.floor(new Date().getTime() / 1000)\n            ,   sign_input = SUBSCRIBE_KEY + \"\\n\"\n                + PUBLISH_KEY + \"\\n\"\n                + \"audit\" + \"\\n\";\n\n            var data = {'timestamp' : timestamp };\n            if (jsonp != '0') { data['callback'] = jsonp; }\n            if (typeof channel != 'undefined' && channel != null && channel.length > 0) data['channel'] = channel;\n            if (typeof channel_group != 'undefined' && channel_group != null && channel_group.length > 0) {\n                data['channel-group'] = channel_group;\n            }\n            if (auth_key) data['auth']    = auth_key;\n\n            data = _get_url_params(data);\n\n            if (!auth_key) delete data['auth'];\n\n            sign_input += _get_pam_sign_input_from_params(data);\n\n            var signature = hmac_SHA256( sign_input, SECRET_KEY );\n\n            signature = signature.replace( /\\+/g, \"-\" );\n            signature = signature.replace( /\\//g, \"_\" );\n\n            data['signature'] = signature;\n            xdr({\n                callback : jsonp,\n                data     : data,\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) {\n                    _invoke_error(response, err);\n                },\n                url      : [\n                    STD_ORIGIN, 'v1', 'auth', 'audit' ,\n                    'sub-key', SUBSCRIBE_KEY\n                ]\n            });\n        },\n\n        /*\n            PUBNUB.revoke({\n                channel  : 'my_chat',\n                callback : fun,\n                error    : fun,\n                auth_key : '3y8uiajdklytowsj'\n            });\n        */\n        'revoke' : function( args, callback ) {\n            args['read']  = false;\n            args['write'] = false;\n            SELF['grant']( args, callback );\n        },\n        'set_uuid' : function(uuid) {\n            UUID = uuid;\n            CONNECT();\n        },\n        'get_uuid' : function() {\n            return UUID;\n        },\n        'isArray'  : function(arg) {\n            return isArray(arg);\n        },\n        'get_subscibed_channels' : function() {\n            return generate_channel_list(CHANNELS, true);\n        },\n        'presence_heartbeat' : function(args) {\n            var callback = args['callback'] || function() {}\n            var err      = args['error']    || function() {}\n            var jsonp    = jsonp_cb();\n            var data     = { 'uuid' : UUID, 'auth' : AUTH_KEY };\n\n            var st = JSON['stringify'](STATE);\n            if (st.length > 2) data['state'] = JSON['stringify'](STATE);\n\n            if (PRESENCE_HB > 0 && PRESENCE_HB < 320) data['heartbeat'] = PRESENCE_HB;\n\n            if (jsonp != '0') { data['callback'] = jsonp; }\n\n            var channels        = encode(generate_channel_list(CHANNELS, true)['join'](','));\n            var channel_groups  = generate_channel_group_list(CHANNEL_GROUPS, true)['join'](',');\n\n            if (!channels) channels = ',';\n            if (channel_groups) data['channel-group'] = channel_groups;\n\n            if (USE_INSTANCEID) data['instanceid'] = INSTANCEID;\n\n            xdr({\n                callback : jsonp,\n                data     : _get_url_params(data),\n                timeout  : SECOND * 5,\n                url      : [\n                    STD_ORIGIN, 'v2', 'presence',\n                    'sub-key', SUBSCRIBE_KEY,\n                    'channel' , channels,\n                    'heartbeat'\n                ],\n                success  : function(response) {\n                    _invoke_callback(response, callback, err);\n                },\n                fail     : function(response) { _invoke_error(response, err); }\n            });\n        },\n        'stop_timers': function () {\n            clearTimeout(_poll_timer);\n            clearTimeout(_poll_timer2);\n        },\n\n        // Expose PUBNUB Functions\n        'xdr'           : xdr,\n        'ready'         : ready,\n        'db'            : db,\n        'uuid'          : generate_uuid,\n        'map'           : map,\n        'each'          : each,\n        'each-channel'  : each_channel,\n        'grep'          : grep,\n        'offline'       : function(){ _reset_offline(\n            1, { \"message\" : \"Offline. Please check your network settings.\" })\n        },\n        'supplant'      : supplant,\n        'now'           : rnow,\n        'unique'        : unique,\n        'updater'       : updater\n    };\n\n    function _poll_online() {\n        _is_online() || _reset_offline( 1, {\n            \"error\" : \"Offline. Please check your network settings. \"\n        });\n        _poll_timer && clearTimeout(_poll_timer);\n        _poll_timer = timeout( _poll_online, SECOND );\n    }\n\n    function _poll_online2() {\n        if (!TIME_CHECK) return;\n        SELF['time'](function(success){\n            detect_time_detla( function(){}, success );\n            success || _reset_offline( 1, {\n                \"error\" : \"Heartbeat failed to connect to Pubnub Servers.\" +\n                    \"Please check your network settings.\"\n                });\n            _poll_timer2 && clearTimeout(_poll_timer2);\n            _poll_timer2 = timeout( _poll_online2, KEEPALIVE );\n        });\n    }\n\n    function _reset_offline(err, msg) {\n        SUB_RECEIVER && SUB_RECEIVER(err, msg);\n        SUB_RECEIVER = null;\n\n        clearTimeout(_poll_timer);\n        clearTimeout(_poll_timer2);\n    }\n    \n    if (!UUID) UUID = SELF['uuid']();\n    if (!INSTANCEID) INSTANCEID = SELF['uuid']();\n    db['set']( SUBSCRIBE_KEY + 'uuid', UUID );\n\n    _poll_timer  = timeout( _poll_online,  SECOND    );\n    _poll_timer2 = timeout( _poll_online2, KEEPALIVE );\n    PRESENCE_HB_TIMEOUT = timeout(\n        start_presence_heartbeat,\n        ( PRESENCE_HB_INTERVAL - 3 ) * SECOND\n    );\n\n    // Detect Age of Message\n    function detect_latency(tt) {\n        var adjusted_time = rnow() - TIME_DRIFT;\n        return adjusted_time - tt / 10000;\n    }\n\n    detect_time_detla();\n    function detect_time_detla( cb, time ) {\n        var stime = rnow();\n\n        time && calculate(time) || SELF['time'](calculate);\n\n        function calculate(time) {\n            if (!time) return;\n            var ptime   = time / 10000\n            ,   latency = (rnow() - stime) / 2;\n            TIME_DRIFT = rnow() - (ptime + latency);\n            cb && cb(TIME_DRIFT);\n        }\n    }\n\n    return SELF;\n}\nfunction crypto_obj() {\n\n    function SHA256(s) {\n        return CryptoJS['SHA256'](s)['toString'](CryptoJS['enc']['Hex']);\n    }\n\n    var iv = \"0123456789012345\";\n\n    var allowedKeyEncodings = ['hex', 'utf8', 'base64', 'binary'];\n    var allowedKeyLengths = [128, 256];\n    var allowedModes = ['ecb', 'cbc'];\n\n    var defaultOptions = {\n        'encryptKey': true,\n        'keyEncoding': 'utf8',\n        'keyLength': 256,\n        'mode': 'cbc'\n    };\n\n    function parse_options(options) {\n\n        // Defaults\n        options = options || {};\n        if (!options['hasOwnProperty']('encryptKey')) options['encryptKey'] = defaultOptions['encryptKey'];\n        if (!options['hasOwnProperty']('keyEncoding')) options['keyEncoding'] = defaultOptions['keyEncoding'];\n        if (!options['hasOwnProperty']('keyLength')) options['keyLength'] = defaultOptions['keyLength'];\n        if (!options['hasOwnProperty']('mode')) options['mode'] = defaultOptions['mode'];\n\n        // Validation\n        if (allowedKeyEncodings['indexOf'](options['keyEncoding']['toLowerCase']()) == -1) options['keyEncoding'] = defaultOptions['keyEncoding'];\n        if (allowedKeyLengths['indexOf'](parseInt(options['keyLength'], 10)) == -1) options['keyLength'] = defaultOptions['keyLength'];\n        if (allowedModes['indexOf'](options['mode']['toLowerCase']()) == -1) options['mode'] = defaultOptions['mode'];\n\n        return options;\n\n    }\n\n    function decode_key(key, options) {\n        if (options['keyEncoding'] == 'base64') {\n            return CryptoJS['enc']['Base64']['parse'](key);\n        } else if (options['keyEncoding'] == 'hex') {\n            return CryptoJS['enc']['Hex']['parse'](key);\n        } else {\n            return key;\n        }\n    }\n\n    function get_padded_key(key, options) {\n        key = decode_key(key, options);\n        if (options['encryptKey']) {\n            return CryptoJS['enc']['Utf8']['parse'](SHA256(key)['slice'](0, 32));\n        } else {\n            return key;\n        }\n    }\n\n    function get_mode(options) {\n        if (options['mode'] == 'ecb') {\n            return CryptoJS['mode']['ECB'];\n        } else {\n            return CryptoJS['mode']['CBC'];\n        }\n    }\n\n    function get_iv(options) {\n        return (options['mode'] == 'cbc') ? CryptoJS['enc']['Utf8']['parse'](iv) : null;\n    }\n\n    return {\n\n        'encrypt': function(data, key, options) {\n            if (!key) return data;\n            options = parse_options(options);\n            var iv = get_iv(options);\n            var mode = get_mode(options);\n            var cipher_key = get_padded_key(key, options);\n            var hex_message = JSON['stringify'](data);\n            var encryptedHexArray = CryptoJS['AES']['encrypt'](hex_message, cipher_key, {'iv': iv, 'mode': mode})['ciphertext'];\n            var base_64_encrypted = encryptedHexArray['toString'](CryptoJS['enc']['Base64']);\n            return base_64_encrypted || data;\n        },\n\n        'decrypt': function(data, key, options) {\n            if (!key) return data;\n            options = parse_options(options);\n            var iv = get_iv(options);\n            var mode = get_mode(options);\n            var cipher_key = get_padded_key(key, options);\n            try {\n                var binary_enc = CryptoJS['enc']['Base64']['parse'](data);\n                var json_plain = CryptoJS['AES']['decrypt']({'ciphertext': binary_enc}, cipher_key, {'iv': iv, 'mode': mode})['toString'](CryptoJS['enc']['Utf8']);\n                var plaintext = JSON['parse'](json_plain);\n                return plaintext;\n            }\n            catch (e) {\n                return undefined;\n            }\n        }\n    };\n}\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     UTIL     =============================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\nwindow['PUBNUB'] || (function() {\n\n/**\n * UTIL LOCALS\n */\n\nvar SWF             = 'https://pubnub.a.ssl.fastly.net/pubnub.swf'\n,   ASYNC           = 'async'\n,   UA              = navigator.userAgent\n,   PNSDK           = 'PubNub-JS-' + 'Web' + '/' + '3.7.10'\n,   XORIGN          = UA.indexOf('MSIE 6') == -1;\n\n/**\n * CONSOLE COMPATIBILITY\n */\nwindow.console || (window.console=window.console||{});\nconsole.log    || (\n    console.log   =\n    console.error =\n    ((window.opera||{}).postError||function(){})\n);\n\n/**\n * LOCAL STORAGE OR COOKIE\n */\nvar db = (function(){\n    var store = {};\n    var ls = false;\n    try {\n        ls = window['localStorage'];\n    } catch (e) { }\n    var cookieGet = function(key) {\n        if (document.cookie.indexOf(key) == -1) return null;\n        return ((document.cookie||'').match(\n            RegExp(key+'=([^;]+)')\n        )||[])[1] || null;\n    };\n    var cookieSet = function( key, value ) {\n        document.cookie = key + '=' + value +\n            '; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/';\n    };\n    var cookieTest = (function() {\n        try {\n            cookieSet('pnctest', '1');\n            return cookieGet('pnctest') === '1';\n        } catch (e) {\n            return false;\n        }\n    }());\n    return {\n        'get' : function(key) {\n            try {\n                if (ls) return ls.getItem(key);\n                if (cookieTest) return cookieGet(key);\n                return store[key];\n            } catch(e) {\n                return store[key];\n            }\n        },\n        'set' : function( key, value ) {\n            try {\n                if (ls) return ls.setItem( key, value ) && 0;\n                if (cookieTest) cookieSet( key, value );\n                store[key] = value;\n            } catch(e) {\n                store[key] = value;\n            }\n        }\n    };\n})();\n\nfunction get_hmac_SHA256(data,key) {\n    var hash = CryptoJS['HmacSHA256'](data, key);\n    return hash.toString(CryptoJS['enc']['Base64']);\n}\n\n/**\n * $\n * =\n * var div = $('divid');\n */\nfunction $(id) { return document.getElementById(id) }\n\n/**\n * ERROR\n * =====\n * error('message');\n */\nfunction error(message) { console['error'](message) }\n\n/**\n * SEARCH\n * ======\n * var elements = search('a div span');\n */\nfunction search( elements, start) {\n    var list = [];\n    each( elements.split(/\\s+/), function(el) {\n        each( (start || document).getElementsByTagName(el), function(node) {\n            list.push(node);\n        } );\n    });\n    return list;\n}\n\n/**\n * BIND\n * ====\n * bind( 'keydown', search('a')[0], function(element) {\n *     ...\n * } );\n */\nfunction bind( type, el, fun ) {\n    each( type.split(','), function(etype) {\n        var rapfun = function(e) {\n            if (!e) e = window.event;\n            if (!fun(e)) {\n                e.cancelBubble = true;\n                e.preventDefault  && e.preventDefault();\n                e.stopPropagation && e.stopPropagation();\n            }\n        };\n\n        if ( el.addEventListener ) el.addEventListener( etype, rapfun, false );\n        else if ( el.attachEvent ) el.attachEvent( 'on' + etype, rapfun );\n        else  el[ 'on' + etype ] = rapfun;\n    } );\n}\n\n/**\n * UNBIND\n * ======\n * unbind( 'keydown', search('a')[0] );\n */\nfunction unbind( type, el, fun ) {\n    if ( el.removeEventListener ) el.removeEventListener( type, false );\n    else if ( el.detachEvent ) el.detachEvent( 'on' + type, false );\n    else  el[ 'on' + type ] = null;\n}\n\n/**\n * HEAD\n * ====\n * head().appendChild(elm);\n */\nfunction head() { return search('head')[0] }\n\n/**\n * ATTR\n * ====\n * var attribute = attr( node, 'attribute' );\n */\nfunction attr( node, attribute, value ) {\n    if (value) node.setAttribute( attribute, value );\n    else return node && node.getAttribute && node.getAttribute(attribute);\n}\n\n/**\n * CSS\n * ===\n * var obj = create('div');\n */\nfunction css( element, styles ) {\n    for (var style in styles) if (styles.hasOwnProperty(style))\n        try {element.style[style] = styles[style] + (\n            '|width|height|top|left|'.indexOf(style) > 0 &&\n            typeof styles[style] == 'number'\n            ? 'px' : ''\n        )}catch(e){}\n}\n\n/**\n * CREATE\n * ======\n * var obj = create('div');\n */\nfunction create(element) { return document.createElement(element) }\n\n\n/**\n * jsonp_cb\n * ========\n * var callback = jsonp_cb();\n */\nfunction jsonp_cb() { return XORIGN || FDomainRequest() ? 0 : unique() }\n\n\n\n/**\n * EVENTS\n * ======\n * PUBNUB.events.bind( 'you-stepped-on-flower', function(message) {\n *     // Do Stuff with message\n * } );\n *\n * PUBNUB.events.fire( 'you-stepped-on-flower', \"message-data\" );\n * PUBNUB.events.fire( 'you-stepped-on-flower', {message:\"data\"} );\n * PUBNUB.events.fire( 'you-stepped-on-flower', [1,2,3] );\n *\n */\nvar events = {\n    'list'   : {},\n    'unbind' : function( name ) { events.list[name] = [] },\n    'bind'   : function( name, fun ) {\n        (events.list[name] = events.list[name] || []).push(fun);\n    },\n    'fire' : function( name, data ) {\n        each(\n            events.list[name] || [],\n            function(fun) { fun(data) }\n        );\n    }\n};\n\n/**\n * XDR Cross Domain Request\n * ========================\n *  xdr({\n *     url     : ['http://www.blah.com/url'],\n *     success : function(response) {},\n *     fail    : function() {}\n *  });\n */\nfunction xdr( setup ) {\n    if (XORIGN || FDomainRequest()) return ajax(setup);\n\n    var script    = create('script')\n    ,   callback  = setup.callback\n    ,   id        = unique()\n    ,   finished  = 0\n    ,   xhrtme    = setup.timeout || DEF_TIMEOUT\n    ,   timer     = timeout( function(){done(1, {\"message\" : \"timeout\"})}, xhrtme )\n    ,   fail      = setup.fail    || function(){}\n    ,   data      = setup.data    || {}\n    ,   success   = setup.success || function(){}\n    ,   append    = function() { head().appendChild(script) }\n    ,   done      = function( failed, response ) {\n            if (finished) return;\n            finished = 1;\n\n            script.onerror = null;\n            clearTimeout(timer);\n\n            (failed || !response) || success(response);\n\n            timeout( function() {\n                failed && fail();\n                var s = $(id)\n                ,   p = s && s.parentNode;\n                p && p.removeChild(s);\n            }, SECOND );\n        };\n\n    window[callback] = function(response) {\n        done( 0, response );\n    };\n\n    if (!setup.blocking) script[ASYNC] = ASYNC;\n\n    script.onerror = function() { done(1) };\n    script.src     = build_url( setup.url, data );\n\n    attr( script, 'id', id );\n\n    append();\n    return done;\n}\n\n/**\n * CORS XHR Request\n * ================\n *  xdr({\n *     url     : ['http://www.blah.com/url'],\n *     success : function(response) {},\n *     fail    : function() {}\n *  });\n */\nfunction ajax( setup ) {\n    var xhr, response\n    ,   finished = function() {\n            if (loaded) return;\n            loaded = 1;\n\n            clearTimeout(timer);\n\n            try       { response = JSON['parse'](xhr.responseText); }\n            catch (r) { return done(1); }\n\n            complete = 1;\n            success(response);\n        }\n    ,   complete = 0\n    ,   loaded   = 0\n    ,   xhrtme   = setup.timeout || DEF_TIMEOUT\n    ,   timer    = timeout( function(){done(1, {\"message\" : \"timeout\"})}, xhrtme )\n    ,   fail     = setup.fail    || function(){}\n    ,   data     = setup.data    || {}\n    ,   success  = setup.success || function(){}\n    ,   async    = !(setup.blocking)\n    ,   done     = function(failed,response) {\n            if (complete) return;\n            complete = 1;\n\n            clearTimeout(timer);\n\n            if (xhr) {\n                xhr.onerror = xhr.onload = null;\n                xhr.abort && xhr.abort();\n                xhr = null;\n            }\n\n            failed && fail(response);\n        };\n\n    // Send\n    try {\n        xhr = FDomainRequest()      ||\n              window.XDomainRequest &&\n              new XDomainRequest()  ||\n              new XMLHttpRequest();\n\n        xhr.onerror = xhr.onabort   = function(){ done(\n            1, xhr.responseText || { \"error\" : \"Network Connection Error\"}\n        ) };\n        xhr.onload  = xhr.onloadend = finished;\n        xhr.onreadystatechange = function() {\n            if (xhr && xhr.readyState == 4) {\n                switch(xhr.status) {\n                    case 200:\n                        break;\n                    default:\n                        try {\n                            response = JSON['parse'](xhr.responseText);\n                            done(1,response);\n                        }\n                        catch (r) { return done(1, {status : xhr.status, payload : null, message : xhr.responseText}); }\n                        return;\n                }\n            }\n        }\n\n        var url = build_url(setup.url,data);\n\n        xhr.open( 'GET', url, async );\n        if (async) xhr.timeout = xhrtme;\n        xhr.send();\n    }\n    catch(eee) {\n        done(0);\n        XORIGN = 0;\n        return xdr(setup);\n    }\n\n    // Return 'done'\n    return done;\n}\n\n// Test Connection State\nfunction _is_online() {\n    if (!('onLine' in navigator)) return 1;\n    try       { return navigator['onLine'] }\n    catch (e) { return true }\n}\n\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n/* =-=========================     PUBNUB     ===========================-= */\n/* =-====================================================================-= */\n/* =-====================================================================-= */\n\nvar PDIV          = $('pubnub') || 0\n,   CREATE_PUBNUB = function(setup) {\n\n    // Force JSONP if requested from user.\n    if (setup['jsonp'])  XORIGN = 0;\n    else                 XORIGN = UA.indexOf('MSIE 6') == -1;\n\n    var SUBSCRIBE_KEY = setup['subscribe_key'] || ''\n    ,   KEEPALIVE     = (+setup['keepalive']   || DEF_KEEPALIVE)   * SECOND\n    ,   UUID          = setup['uuid'] || db['get'](SUBSCRIBE_KEY+'uuid')||'';\n\n    var leave_on_unload = setup['leave_on_unload'] || 0;\n\n    setup['xdr']        = xdr;\n    setup['db']         = db;\n    setup['error']      = setup['error'] || error;\n    setup['_is_online'] = _is_online;\n    setup['jsonp_cb']   = jsonp_cb;\n    setup['hmac_SHA256']= get_hmac_SHA256;\n    setup['crypto_obj'] = crypto_obj();\n    setup['params']     = { 'pnsdk' : PNSDK }\n\n    var SELF = function(setup) {\n        return CREATE_PUBNUB(setup);\n    };\n\n    var PN = PN_API(setup);\n\n    for (var prop in PN) {\n        if (PN.hasOwnProperty(prop)) {\n            SELF[prop] = PN[prop];\n        }\n    }\n    SELF['css']         = css;\n    SELF['$']           = $;\n    SELF['create']      = create;\n    SELF['bind']        = bind;\n    SELF['head']        = head;\n    SELF['search']      = search;\n    SELF['attr']        = attr;\n    SELF['events']      = events;\n    SELF['init']        = SELF;\n    SELF['secure']      = SELF;\n    SELF['crypto_obj']  = crypto_obj(); // export to instance\n\n\n    // Add Leave Functions\n    bind( 'beforeunload', window, function() {\n        if (leave_on_unload) SELF['each-channel'](function(ch){ SELF['LEAVE']( ch.name, 0 ) });\n        return true;\n    } );\n\n    // Return without Testing\n    if (setup['notest']) return SELF;\n\n    bind( 'offline', window,   SELF['offline'] );\n    bind( 'offline', document, SELF['offline'] );\n\n    // Return PUBNUB Socket Object\n    return SELF;\n};\nCREATE_PUBNUB['init']   = CREATE_PUBNUB;\nCREATE_PUBNUB['secure'] = CREATE_PUBNUB;\nCREATE_PUBNUB['crypto_obj'] = crypto_obj(); // export to constructor\n\n// Bind for PUBNUB Readiness to Subscribe\nif (document.readyState === 'complete') {\n    timeout( ready, 0 );\n}\nelse {\n    bind( 'load', window, function(){ timeout( ready, 0 ) } );\n}\n\nvar pdiv = PDIV || {};\n\n// CREATE A PUBNUB GLOBAL OBJECT\nPUBNUB = CREATE_PUBNUB({\n    'notest'        : 1,\n    'publish_key'   : attr( pdiv, 'pub-key' ),\n    'subscribe_key' : attr( pdiv, 'sub-key' ),\n    'ssl'           : !document.location.href.indexOf('https') ||\n                      attr( pdiv, 'ssl' ) == 'on',\n    'origin'        : attr( pdiv, 'origin' ),\n    'uuid'          : attr( pdiv, 'uuid' )\n});\n\n// jQuery Interface\nwindow['jQuery'] && (window['jQuery']['PUBNUB'] = CREATE_PUBNUB);\n\n// For Modern JS + Testling.js - http://testling.com/\ntypeof(module) !== 'undefined' && (module['exports'] = PUBNUB) && ready();\n\nvar pubnubs = $('pubnubs') || 0;\n\n// LEAVE NOW IF NO PDIV.\nif (!PDIV) return;\n\n// PUBNUB Flash Socket\ncss( PDIV, { 'position' : 'absolute', 'top' : -SECOND } );\n\nif ('opera' in window || attr( PDIV, 'flash' )) PDIV['innerHTML'] =\n    '<object id=pubnubs data='  + SWF +\n    '><param name=movie value=' + SWF +\n    '><param name=allowscriptaccess value=always></object>';\n\n// Create Interface for Opera Flash\nPUBNUB['rdx'] = function( id, data ) {\n    if (!data) return FDomainRequest[id]['onerror']();\n    FDomainRequest[id]['responseText'] = unescape(data);\n    FDomainRequest[id]['onload']();\n};\n\nfunction FDomainRequest() {\n    if (!pubnubs || !pubnubs['get']) return 0;\n\n    var fdomainrequest = {\n        'id'    : FDomainRequest['id']++,\n        'send'  : function() {},\n        'abort' : function() { fdomainrequest['id'] = {} },\n        'open'  : function( method, url ) {\n            FDomainRequest[fdomainrequest['id']] = fdomainrequest;\n            pubnubs['get']( fdomainrequest['id'], url );\n        }\n    };\n\n    return fdomainrequest;\n}\nFDomainRequest['id'] = SECOND;\n\n})();\n(function(){\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET INTERFACE\n// ---------------------------------------------------------------------------\nvar WS = PUBNUB['ws'] = function( url, protocols ) {\n    if (!(this instanceof WS)) return new WS( url, protocols );\n\n    var self     = this\n    ,   url      = self.url      = url || ''\n    ,   protocol = self.protocol = protocols || 'Sec-WebSocket-Protocol'\n    ,   bits     = url.split('/')\n    ,   setup    = {\n         'ssl'           : bits[0] === 'wss:'\n        ,'origin'        : bits[2]\n        ,'publish_key'   : bits[3]\n        ,'subscribe_key' : bits[4]\n        ,'channel'       : bits[5]\n    };\n\n    // READY STATES\n    self['CONNECTING'] = 0; // The connection is not yet open.\n    self['OPEN']       = 1; // The connection is open and ready to communicate.\n    self['CLOSING']    = 2; // The connection is in the process of closing.\n    self['CLOSED']     = 3; // The connection is closed or couldn't be opened.\n\n    // CLOSE STATES\n    self['CLOSE_NORMAL']         = 1000; // Normal Intended Close; completed.\n    self['CLOSE_GOING_AWAY']     = 1001; // Closed Unexpecttedly.\n    self['CLOSE_PROTOCOL_ERROR'] = 1002; // Server: Not Supported.\n    self['CLOSE_UNSUPPORTED']    = 1003; // Server: Unsupported Protocol.\n    self['CLOSE_TOO_LARGE']      = 1004; // Server: Too Much Data.\n    self['CLOSE_NO_STATUS']      = 1005; // Server: No reason.\n    self['CLOSE_ABNORMAL']       = 1006; // Abnormal Disconnect.\n\n    // Events Default\n    self['onclose']   = self['onerror'] =\n    self['onmessage'] = self['onopen']  =\n    self['onsend']    =  function(){};\n\n    // Attributes\n    self['binaryType']     = '';\n    self['extensions']     = '';\n    self['bufferedAmount'] = 0;\n    self['trasnmitting']   = false;\n    self['buffer']         = [];\n    self['readyState']     = self['CONNECTING'];\n\n    // Close if no setup.\n    if (!url) {\n        self['readyState'] = self['CLOSED'];\n        self['onclose']({\n            'code'     : self['CLOSE_ABNORMAL'],\n            'reason'   : 'Missing URL',\n            'wasClean' : true\n        });\n        return self;\n    }\n\n    // PubNub WebSocket Emulation\n    self.pubnub       = PUBNUB['init'](setup);\n    self.pubnub.setup = setup;\n    self.setup        = setup;\n\n    self.pubnub['subscribe']({\n        'restore'    : false,\n        'channel'    : setup['channel'],\n        'disconnect' : self['onerror'],\n        'reconnect'  : self['onopen'],\n        'error'      : function() {\n            self['onclose']({\n                'code'     : self['CLOSE_ABNORMAL'],\n                'reason'   : 'Missing URL',\n                'wasClean' : false\n            });\n        },\n        'callback'   : function(message) {\n            self['onmessage']({ 'data' : message });\n        },\n        'connect'    : function() {\n            self['readyState'] = self['OPEN'];\n            self['onopen']();\n        }\n    });\n};\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET SEND\n// ---------------------------------------------------------------------------\nWS.prototype.send = function(data) {\n    var self = this;\n    self.pubnub['publish']({\n        'channel'  : self.pubnub.setup['channel'],\n        'message'  : data,\n        'callback' : function(response) {\n            self['onsend']({ 'data' : response });\n        }\n    });\n};\n\n// ---------------------------------------------------------------------------\n// WEBSOCKET CLOSE\n// ---------------------------------------------------------------------------\nWS.prototype.close = function() {\n    var self = this;\n    self.pubnub['unsubscribe']({ 'channel' : self.pubnub.setup['channel'] });\n    self['readyState'] = self['CLOSED'];\n    self['onclose']({});\n};\n\n})();\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(h,s){var f={},g=f.lib={},q=function(){},m=g.Base={extend:function(a){q.prototype=this;var c=new q;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\nr=g.WordArray=m.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=s?c:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;a=a.sigBytes;this.clamp();if(b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((b+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\n32-8*(c%4);a.length=h.ceil(c/4)},clone:function(){var a=m.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new r.init(c,a)}}),l=f.enc={},k=l.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-8*(b%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,\n2),16)<<24-4*(b%8);return new r.init(d,c/2)}},n=l.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-8*(b%4)&255));return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(a.charCodeAt(b)&255)<<24-8*(b%4);return new r.init(d,c)}},j=l.Utf8={stringify:function(a){try{return decodeURIComponent(escape(n.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return n.parse(unescape(encodeURIComponent(a)))}},\nu=g.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=j.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;b=h.min(4*a,b);if(a){for(var g=0;g<a;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a);c.sigBytes-=b}return new r.init(g,b)},clone:function(){var a=m.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});g.Hasher=u.extend({cfg:m.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return(new a.init(d)).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return(new t.HMAC.init(a,\nd)).finalize(c)}}});var t=f.algo={};return f}(Math);\n\n// SHA256\n(function(h){for(var s=CryptoJS,f=s.lib,g=f.WordArray,q=f.Hasher,f=s.algo,m=[],r=[],l=function(a){return 4294967296*(a-(a|0))|0},k=2,n=0;64>n;){var j;a:{j=k;for(var u=h.sqrt(j),t=2;t<=u;t++)if(!(j%t)){j=!1;break a}j=!0}j&&(8>n&&(m[n]=l(h.pow(k,0.5))),r[n]=l(h.pow(k,1/3)),n++);k++}var a=[],f=f.SHA256=q.extend({_doReset:function(){this._hash=new g.init(m.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],g=b[2],j=b[3],h=b[4],m=b[5],n=b[6],q=b[7],p=0;64>p;p++){if(16>p)a[p]=\nc[d+p]|0;else{var k=a[p-15],l=a[p-2];a[p]=((k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3)+a[p-7]+((l<<15|l>>>17)^(l<<13|l>>>19)^l>>>10)+a[p-16]}k=q+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&m^~h&n)+r[p]+a[p];l=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&g^f&g);q=n;n=m;m=h;h=j+k|0;j=g;g=f;f=e;e=k+l|0}b[0]=b[0]+e|0;b[1]=b[1]+f|0;b[2]=b[2]+g|0;b[3]=b[3]+j|0;b[4]=b[4]+h|0;b[5]=b[5]+m|0;b[6]=b[6]+n|0;b[7]=b[7]+q|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;\nd[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=h.floor(b/4294967296);d[(e+64>>>9<<4)+15]=b;a.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var a=q.clone.call(this);a._hash=this._hash.clone();return a}});s.SHA256=q._createHelper(f);s.HmacSHA256=q._createHmacHelper(f)})(Math);\n\n// HMAC SHA256\n(function(){var h=CryptoJS,s=h.enc.Utf8;h.algo.HMAC=h.lib.Base.extend({init:function(f,g){f=this._hasher=new f.init;\"string\"==typeof g&&(g=s.parse(g));var h=f.blockSize,m=4*h;g.sigBytes>m&&(g=f.finalize(g));g.clamp();for(var r=this._oKey=g.clone(),l=this._iKey=g.clone(),k=r.words,n=l.words,j=0;j<h;j++)k[j]^=1549556828,n[j]^=909522486;r.sigBytes=l.sigBytes=m;this.reset()},reset:function(){var f=this._hasher;f.reset();f.update(this._iKey)},update:function(f){this._hasher.update(f);return this},finalize:function(f){var g=\nthis._hasher;f=g.finalize(f);g.reset();return g.finalize(this._oKey.clone().concat(f))}})})();\n\n// Base64\n(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join(\"\")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<\nl;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"}})();\n\n// BlockCipher\n(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},\n_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),\nf=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,\nm,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,\nE,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/\n4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);\n(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,\nl)}})();\n\n// Cipher\nCryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},\nfinalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return(\"string\"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return(\"string\"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=\nc[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,\ne,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,\nthis,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,\n1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},\ndecrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return\"string\"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,\nb.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();\n\n// AES\n(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,\n16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>\n8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=\nd[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();\n\n// Mode ECB\nCryptoJS.mode.ECB = (function () {\n    var ECB = CryptoJS.lib.BlockCipherMode.extend();\n\n    ECB.Encryptor = ECB.extend({\n        processBlock: function (words, offset) {\n            this._cipher.encryptBlock(words, offset);\n        }\n    });\n\n    ECB.Decryptor = ECB.extend({\n        processBlock: function (words, offset) {\n            this._cipher.decryptBlock(words, offset);\n        }\n    });\n\n    return ECB;\n}());// Moved to hmac-sha-256.js\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./bower_components/pubnub/web/pubnub.js\n ** module id = 39\n ** module chunks = 0\n **/","(function(global){\n\n//\n// Check for native Promise and it has correct interface\n//\n\nvar NativePromise = global['Promise'];\nvar nativePromiseSupported =\n  NativePromise &&\n  // Some of these methods are missing from\n  // Firefox/Chrome experimental implementations\n  'resolve' in NativePromise &&\n  'reject' in NativePromise &&\n  'all' in NativePromise &&\n  'race' in NativePromise &&\n  // Older version of the spec had a resolver object\n  // as the arg rather than a function\n  (function(){\n    var resolve;\n    new NativePromise(function(r){ resolve = r; });\n    return typeof resolve === 'function';\n  })();\n\n\n//\n// export if necessary\n//\n\nif (typeof exports !== 'undefined' && exports)\n{\n  // node.js\n  exports.Promise = Promise || NativePromise;\n}\nelse\n{\n  // in browser add to global\n  if (!nativePromiseSupported)\n    global['Promise'] = Promise;\n}\n\n\n//\n// Polyfill\n//\n\nvar PENDING = 'pending';\nvar SEALED = 'sealed';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function(){};\n\n// async calls\nvar asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush(){\n  // run promise callbacks\n  for (var i = 0; i < asyncQueue.length; i++)\n    asyncQueue[i][0](asyncQueue[i][1]);\n\n  // reset async asyncQueue\n  asyncQueue = [];\n  asyncTimer = false;\n}\n\nfunction asyncCall(callback, arg){\n  asyncQueue.push([callback, arg]);\n\n  if (!asyncTimer)\n  {\n    asyncTimer = true;\n    asyncSetTimer(asyncFlush, 0);\n  }\n}\n\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch(e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber){\n  var owner = subscriber.owner;\n  var settled = owner.state_;\n  var value = owner.data_;  \n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function')\n  {\n    settled = FULFILLED;\n    try {\n      value = callback(value);\n    } catch(e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value))\n  {\n    if (settled === FULFILLED)\n      resolve(promise, value);\n\n    if (settled === REJECTED)\n      reject(promise, value);\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value)\n      throw new TypeError('A promises callback cannot return that same promise.');\n\n    if (value && (typeof value === 'function' || typeof value === 'object'))\n    {\n      var then = value.then;  // then should be retrived only once\n\n      if (typeof then === 'function')\n      {\n        then.call(value, function(val){\n          if (!resolved)\n          {\n            resolved = true;\n\n            if (value !== val)\n              resolve(promise, val);\n            else\n              fulfill(promise, val);\n          }\n        }, function(reason){\n          if (!resolved)\n          {\n            resolved = true;\n\n            reject(promise, reason);\n          }\n        });\n\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved)\n      reject(promise, e);\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value){\n  if (promise === value || !handleThenable(promise, value))\n    fulfill(promise, value);\n}\n\nfunction fulfill(promise, value){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = value;\n\n    asyncCall(publishFulfillment, promise);\n  }\n}\n\nfunction reject(promise, reason){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = reason;\n\n    asyncCall(publishRejection, promise);\n  }\n}\n\nfunction publish(promise) {\n  promise.then_ = promise.then_.forEach(invokeCallback);\n}\n\nfunction publishFulfillment(promise){\n  promise.state_ = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise){\n  promise.state_ = REJECTED;\n  publish(promise);\n}\n\n/**\n* @class\n*/\nfunction Promise(resolver){\n  if (typeof resolver !== 'function')\n    throw new TypeError('Promise constructor takes a function argument');\n\n  if (this instanceof Promise === false)\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\n  this.then_ = [];\n\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n\n  state_: PENDING,\n  then_: null,\n  data_: undefined,\n\n  then: function(onFulfillment, onRejection){\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if (this.state_ === FULFILLED || this.state_ === REJECTED)\n    {\n      // already resolved, call callback async\n      asyncCall(invokeCallback, subscriber);\n    }\n    else\n    {\n      // subscribe\n      this.then_.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n\n  'catch': function(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function(promises){\n  var Class = this;\n\n  if (!Array.isArray(promises))\n    throw new TypeError('You must pass an array to Promise.all().');\n\n  return new Class(function(resolve, reject){\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index){\n      remaining++;\n      return function(value){\n        results[index] = value;\n        if (!--remaining)\n          resolve(results);\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolver(i), reject);\n      else\n        results[i] = promise;\n    }\n\n    if (!remaining)\n      resolve(results);\n  });\n};\n\nPromise.race = function(promises){\n  var Class = this;\n\n  if (!Array.isArray(promises))\n    throw new TypeError('You must pass an array to Promise.race().');\n\n  return new Class(function(resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolve, reject);\n      else\n        resolve(promise);\n    }\n  });\n};\n\nPromise.resolve = function(value){\n  var Class = this;\n\n  if (value && typeof value === 'object' && value.constructor === Class)\n    return value;\n\n  return new Class(function(resolve){\n    resolve(value);\n  });\n};\n\nPromise.reject = function(reason){\n  var Class = this;\n\n  return new Class(function(resolve, reject){\n    reject(reason);\n  });\n};\n\n})(new Function('return this')());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./bower_components/es6-promise-polyfill/promise.js\n ** module id = 40\n ** module chunks = 0\n **/","/// <reference path=\"../../../typings/externals.d.ts\" />\n\nimport h = require('./Headers');\nimport utils = require('../Utils');\nimport log = require('../Log');\nimport context = require('../Context');\nimport ajaxObserver = require('../AjaxObserver');\nimport r = require('./Response');\n\n/**\n * TODO @see https://github.com/github/fetch/blob/master/fetch.js\n */\nexport class Request extends h.Headers<Request> {\n\n    public async:boolean;\n    public method:string;\n    public url:string;\n    public query:any;\n    public body:any;\n    public xhr:XMLHttpRequest;\n\n    private observer:ajaxObserver.AjaxObserver;\n\n    constructor(context:context.Context) {\n\n        super(context);\n\n        this.async = true;\n        this.method = '';\n        this.url = '';\n        this.query = null;\n        this.body = {};\n        this.context = context;\n        this.xhr = null;\n\n        this.observer = ajaxObserver.$get(context);\n\n    }\n\n    isLoaded():boolean {\n        return !!this.xhr;\n    }\n\n    setOptions(options?:IAjaxOptions):Request {\n\n        options = options || {};\n\n        // backwards compatibility\n        if (!('body' in options) && options.post) options.body = options.post;\n        if (!('query' in options) && options.get) options.query = options.get;\n\n        if ('method' in options) this.method = options.method;\n        if ('url' in options) this.url = options.url;\n        if ('query' in options) this.query = options.query;\n        if ('body' in options) this.body = options.body;\n        if ('headers' in options) this.setHeaders(options.headers);\n        if ('async' in options) this.async = !!options.async;\n\n        return this;\n\n    }\n\n    /**\n     * Checks the send options, defaulting various of the options,\n     * and consuming / transforming some of the options (like get).\n     */\n    checkOptions() {\n\n        if (!this.url) throw new Error('Url is not defined');\n\n        if (!this.hasHeader('Accept')) this.setHeader('Accept', h.Headers.jsonContentType);\n        if (!this.hasHeader('Content-Type')) this.setHeader('Content-Type', h.Headers.jsonContentType);\n\n        this.method = this.method ? this.method.toUpperCase() : 'GET';\n\n        if (['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'OPTIONS', 'HEAD'].indexOf(this.method) < 0) throw new Error('Method has wrong value');\n\n        return this;\n\n    }\n\n    getEncodedBody() {\n\n        if (this.method === 'GET') return null;\n\n        if (typeof this.body === 'string') {\n            return this.body;\n        } else if (this.isJson()) {\n            return JSON.stringify(this.body);\n        } else if (this.isUrlEncoded()) {\n            return this.utils.queryStringify(this.body);\n        } else {\n            return this.body;\n        }\n\n    }\n\n    send():Promise<r.Response> {\n\n        this.observer.emit(this.observer.events.beforeRequest, this);\n\n        var responsePromise = new (this.context.getPromise())((resolve, reject) => {\n\n            this.checkOptions();\n\n            var xhr = this.getXHR(),\n                url = this.url + (!!this.query ? ((this.url.indexOf('?') > -1 ? '&' : '?') + this.utils.queryStringify(this.query)) : '');\n\n            xhr.open(this.method, url, this.async);\n\n            //@see http://stackoverflow.com/questions/19666809/cors-withcredentials-support-limited\n            xhr.withCredentials = true;\n\n            xhr.onload = () => {\n\n                //TODO http://jira.ringcentral.com/browse/PLA-10585\n                var response = r.$get(this.context, xhr.status, xhr.statusText, xhr.responseText, xhr.getAllResponseHeaders());\n\n                if (response.error) {\n                    var e = <IAjaxError> response.error;\n                    e.ajax = response; // backwards compatibility\n                    e.response = response; //FIXME Circular\n                    e.request = this;\n                    reject(e);\n                } else {\n                    resolve(response);\n                }\n\n            };\n\n            xhr.onerror = (event) => { // CORS or network issue\n                var e = <IAjaxError> new Error('The request cannot be sent' + (event ? ' (' + event.toString() + ')' : ''));\n                e.request = this;\n                e.response = null;\n                e.ajax = null; // backwards compatibility\n                reject(e);\n            };\n\n            this.utils.forEach(this.headers, (value, header) => {\n                if (!!value) xhr.setRequestHeader(header, value);\n            });\n\n            xhr.send(this.getEncodedBody());\n\n            this.xhr = xhr;\n\n        });\n\n        return responsePromise.then((response:r.Response) => {\n\n            this.observer.emit(this.observer.events.requestSuccess, response, this);\n\n            return response;\n\n        }).catch((e):any => { //TODO Replace any with something\n\n            this.observer.emit(this.observer.events.requestError, e);\n\n            throw e;\n\n        });\n\n    }\n\n    getXHR():XMLHttpRequest {\n        return this.context.getXHR();\n    }\n\n    destroy() {\n        if (this.xhr) this.xhr.abort();\n    }\n\n}\n\nexport function $get(context:context.Context):Request {\n    return new Request(context);\n}\n\nexport interface IAjaxError extends Error {\n    ajax?:r.Response;\n    response?:r.Response;\n    request?:Request;\n}\n\nexport interface IAjaxOptions {\n    url?:string;\n    method?:string;\n    async?:boolean;\n    query?:any;\n    body?:any;\n    headers?:h.IHeadersObject;\n    post?:any; // @deprecated\n    get?:any; // @deprecated\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/http/Request.ts\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 42\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 43\n ** module chunks = 0\n **/","/// <reference path=\"../../../typings/externals.d.ts\" />\n\nimport utils = require('../Utils');\nimport context = require('../Context');\n\n/**\n * @see https://github.com/Microsoft/TypeScript/issues/275\n */\nexport class Headers<T extends Headers<any>> {\n\n    protected headers:IHeadersObject;\n    protected context:context.Context;\n    protected utils:utils.Utils;\n\n    constructor(context:context.Context) {\n        this.headers = {};\n        this.context = context;\n        this.utils = utils.$get(context);\n    }\n\n    static contentType = 'Content-Type';\n    static jsonContentType = 'application/json';\n    static multipartContentType = 'multipart/mixed';\n    static urlencodedContentType = 'application/x-www-form-urlencoded';\n\n    setHeader(name:string, value:string):T {\n\n        this.headers[name.toLowerCase()] = value;\n\n        return <any>this;\n\n    }\n\n    getHeader(name:string) {\n\n        return this.headers[name.toLowerCase()];\n\n    }\n\n    hasHeader(name:string):boolean {\n\n        return (name.toLowerCase() in this.headers);\n\n    }\n\n    setHeaders(headers:IHeadersObject):T {\n\n        this.utils.forEach(headers, (value:string, name:string) => {\n            this.setHeader(name, value);\n        });\n\n        return <any>this;\n\n    }\n\n    isContentType(contentType:string):boolean {\n        return this.getContentType().indexOf(contentType) > -1;\n    }\n\n    setContentType(contentType:string):T {\n        this.setHeader(Headers.contentType, contentType);\n        return <any>this;\n    }\n\n    getContentType():string {\n        return this.getHeader(Headers.contentType) || '';\n    }\n\n    isMultipart():boolean {\n        return this.isContentType(Headers.multipartContentType);\n    }\n\n    isUrlEncoded():boolean {\n        return this.isContentType(Headers.urlencodedContentType);\n    }\n\n    isJson():boolean {\n        return this.isContentType(Headers.jsonContentType);\n    }\n\n}\n\nexport interface IHeadersObject {\n    [name: string]: string;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/http/Headers.ts\n **/","/// <reference path=\"../../../typings/externals.d.ts\" />\n\nimport h = require('./Headers');\nimport utils = require('../Utils');\nimport log = require('../Log');\nimport context = require('../Context');\n\nexport class Response extends h.Headers<Response> {\n\n    static boundarySeparator = '--';\n    static headerSeparator = ':';\n    static bodySeparator = '\\n\\n';\n\n    public data:any;\n    public json:any;\n    public responses:Response[];\n    public error:Error;\n    public status:number;\n    public statusText:string;\n    public body:any;\n\n    private log:log.Log;\n\n    constructor(context:context.Context, status:number, statusText:string, body:any, headers?:any) {\n\n        super(context);\n\n        this.log = log.$get(context);\n\n        if (typeof(body) === 'string') {\n\n            body = body.replace(/\\r/g, '');\n\n            if (!headers) {\n\n                var tmp = body.split(Response.bodySeparator);\n\n                headers = (tmp.length > 1) ? tmp.shift() : {};\n                body = tmp.join(Response.bodySeparator);\n\n            }\n\n        }\n\n        /** @type {Response[]|object} */\n        this.data = null;\n\n        /** @type {object} */\n        this.json = null;\n\n        /** @type {Response[]} */\n        this.responses = [];\n\n        /** @type {Error} */\n        this.error = null;\n\n        //@see http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n        if (status == 1223) status = 204;\n\n        this.status = status;\n        this.statusText = statusText;\n        this.body = body;\n\n        try {\n\n            // Step 1. Parse headers\n\n            if (typeof(headers) === 'string') {\n\n                (headers || '')\n                    .split('\\n')\n                    .forEach((header:string) => {\n\n                        if (!header) return;\n\n                        var parts = <string[]>header.split(Response.headerSeparator),\n                            name = parts.shift().trim();\n\n                        this.setHeader(name, parts.join(Response.headerSeparator).trim());\n\n                    });\n\n            } else {\n\n                this.setHeaders(headers);\n\n            }\n\n            // Step 1.1. JEDI proxy sometimes may omit Content-Type header\n\n            if (!this.hasHeader(h.Headers.contentType)) this.setHeader(h.Headers.contentType, h.Headers.jsonContentType);\n\n            // Step 2. Parse body\n\n            if (this.isJson() && !!this.body && typeof(this.body) === 'string') { // Handle 204 No Content -- response may be empty\n\n                this.json = JSON.parse(this.body);\n                this.data = this.json; // backwards compatibility\n\n                if (!this.checkStatus()) this.error = new Error(this.getError());\n\n            } else if (this.isMultipart()) { // Handle 207 Multi-Status\n\n                // Step 2.1. Split multipart response\n\n                var boundary = this.getContentType().match(/boundary=([^;]+)/i)[1],\n                    parts = this.body.split(Response.boundarySeparator + boundary);\n\n                if (parts[0].trim() === '') parts.shift();\n                if (parts[parts.length - 1].trim() == Response.boundarySeparator) parts.pop();\n\n                // Step 2.2. Parse status info\n\n                var statusInfo = new Response(this.context, this.status, '', parts.shift());\n\n                // Step 2.3. Parse all other parts\n\n                this.responses = parts.map((part:string, i) => {\n\n                    var status = statusInfo.data.response[i].status;\n\n                    return new Response(this.context, status, '', part);\n\n                });\n\n                this.data = this.responses; // backwards compatibility\n\n            } else { //TODO Add more parsers\n\n                this.data = this.body;\n\n            }\n\n        } catch (e) { // Capture parse errors\n\n            this.log.error('Response.parseResponse(): Unable to parse data');\n            this.log.error(e.stack || e);\n            this.log.error(this.body);\n\n            this.error = e;\n\n        }\n\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    isUnauthorized() {\n        return (this.status == 401);\n    }\n\n    checkStatus() {\n        return this.status >= 200 && this.status < 300;\n    }\n\n\n    getError() {\n        return this.data.message ||\n               this.data.error_description ||\n               this.data.description ||\n               'Unknown error';\n    }\n\n}\n\nexport function $get(context:context.Context, status:number, statusText:string, body:any, headers?:any):Response {\n\n    return new Response(context, status, statusText, body, headers);\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ../src/lib/core/http/Response.ts\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 46\n ** module chunks = 0\n **/"],"sourceRoot":"/source/"}